(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f7fcabe4"],{"2ef0":function(t,n,e){(function(t,i){var r;
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(){var o,s="4.17.20",a=200,u="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",l="Expected a function",c="__lodash_hash_undefined__",h=500,f="__lodash_placeholder__",p=1,d=2,g=4,v=1,m=2,y=1,b=2,_=4,P=8,x=16,C=32,j=64,w=128,E=256,S=512,D=30,A="...",I=800,k=16,O=1,T=2,M=3,L=1/0,F=9007199254740991,R=17976931348623157e292,N=NaN,U=4294967295,G=U-1,B=U>>>1,z=[["ary",w],["bind",y],["bindKey",b],["curry",P],["curryRight",x],["flip",S],["partial",C],["partialRight",j],["rearg",E]],W="[object Arguments]",H="[object Array]",Y="[object AsyncFunction]",X="[object Boolean]",q="[object Date]",V="[object DOMException]",$="[object Error]",Z="[object Function]",J="[object GeneratorFunction]",K="[object Map]",Q="[object Number]",tt="[object Null]",nt="[object Object]",et="[object Promise]",it="[object Proxy]",rt="[object RegExp]",ot="[object Set]",st="[object String]",at="[object Symbol]",ut="[object Undefined]",lt="[object WeakMap]",ct="[object WeakSet]",ht="[object ArrayBuffer]",ft="[object DataView]",pt="[object Float32Array]",dt="[object Float64Array]",gt="[object Int8Array]",vt="[object Int16Array]",mt="[object Int32Array]",yt="[object Uint8Array]",bt="[object Uint8ClampedArray]",_t="[object Uint16Array]",Pt="[object Uint32Array]",xt=/\b__p \+= '';/g,Ct=/\b(__p \+=) '' \+/g,jt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,wt=/&(?:amp|lt|gt|quot|#39);/g,Et=/[&<>"']/g,St=RegExp(wt.source),Dt=RegExp(Et.source),At=/<%-([\s\S]+?)%>/g,It=/<%([\s\S]+?)%>/g,kt=/<%=([\s\S]+?)%>/g,Ot=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Tt=/^\w*$/,Mt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Lt=/[\\^$.*+?()[\]{}|]/g,Ft=RegExp(Lt.source),Rt=/^\s+|\s+$/g,Nt=/^\s+/,Ut=/\s+$/,Gt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Bt=/\{\n\/\* \[wrapped with (.+)\] \*/,zt=/,? & /,Wt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ht=/\\(\\)?/g,Yt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Xt=/\w*$/,qt=/^[-+]0x[0-9a-f]+$/i,Vt=/^0b[01]+$/i,$t=/^\[object .+?Constructor\]$/,Zt=/^0o[0-7]+$/i,Jt=/^(?:0|[1-9]\d*)$/,Kt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Qt=/($^)/,tn=/['\n\r\u2028\u2029\\]/g,nn="\\ud800-\\udfff",en="\\u0300-\\u036f",rn="\\ufe20-\\ufe2f",on="\\u20d0-\\u20ff",sn=en+rn+on,an="\\u2700-\\u27bf",un="a-z\\xdf-\\xf6\\xf8-\\xff",ln="\\xac\\xb1\\xd7\\xf7",cn="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",hn="\\u2000-\\u206f",fn=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",pn="A-Z\\xc0-\\xd6\\xd8-\\xde",dn="\\ufe0e\\ufe0f",gn=ln+cn+hn+fn,vn="['’]",mn="["+nn+"]",yn="["+gn+"]",bn="["+sn+"]",_n="\\d+",Pn="["+an+"]",xn="["+un+"]",Cn="[^"+nn+gn+_n+an+un+pn+"]",jn="\\ud83c[\\udffb-\\udfff]",wn="(?:"+bn+"|"+jn+")",En="[^"+nn+"]",Sn="(?:\\ud83c[\\udde6-\\uddff]){2}",Dn="[\\ud800-\\udbff][\\udc00-\\udfff]",An="["+pn+"]",In="\\u200d",kn="(?:"+xn+"|"+Cn+")",On="(?:"+An+"|"+Cn+")",Tn="(?:"+vn+"(?:d|ll|m|re|s|t|ve))?",Mn="(?:"+vn+"(?:D|LL|M|RE|S|T|VE))?",Ln=wn+"?",Fn="["+dn+"]?",Rn="(?:"+In+"(?:"+[En,Sn,Dn].join("|")+")"+Fn+Ln+")*",Nn="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Un="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Gn=Fn+Ln+Rn,Bn="(?:"+[Pn,Sn,Dn].join("|")+")"+Gn,zn="(?:"+[En+bn+"?",bn,Sn,Dn,mn].join("|")+")",Wn=RegExp(vn,"g"),Hn=RegExp(bn,"g"),Yn=RegExp(jn+"(?="+jn+")|"+zn+Gn,"g"),Xn=RegExp([An+"?"+xn+"+"+Tn+"(?="+[yn,An,"$"].join("|")+")",On+"+"+Mn+"(?="+[yn,An+kn,"$"].join("|")+")",An+"?"+kn+"+"+Tn,An+"+"+Mn,Un,Nn,_n,Bn].join("|"),"g"),qn=RegExp("["+In+nn+sn+dn+"]"),Vn=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,$n=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Zn=-1,Jn={};Jn[pt]=Jn[dt]=Jn[gt]=Jn[vt]=Jn[mt]=Jn[yt]=Jn[bt]=Jn[_t]=Jn[Pt]=!0,Jn[W]=Jn[H]=Jn[ht]=Jn[X]=Jn[ft]=Jn[q]=Jn[$]=Jn[Z]=Jn[K]=Jn[Q]=Jn[nt]=Jn[rt]=Jn[ot]=Jn[st]=Jn[lt]=!1;var Kn={};Kn[W]=Kn[H]=Kn[ht]=Kn[ft]=Kn[X]=Kn[q]=Kn[pt]=Kn[dt]=Kn[gt]=Kn[vt]=Kn[mt]=Kn[K]=Kn[Q]=Kn[nt]=Kn[rt]=Kn[ot]=Kn[st]=Kn[at]=Kn[yt]=Kn[bt]=Kn[_t]=Kn[Pt]=!0,Kn[$]=Kn[Z]=Kn[lt]=!1;var Qn={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"},te={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},ne={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},ee={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ie=parseFloat,re=parseInt,oe="object"==typeof t&&t&&t.Object===Object&&t,se="object"==typeof self&&self&&self.Object===Object&&self,ae=oe||se||Function("return this")(),ue=n&&!n.nodeType&&n,le=ue&&"object"==typeof i&&i&&!i.nodeType&&i,ce=le&&le.exports===ue,he=ce&&oe.process,fe=function(){try{var t=le&&le.require&&le.require("util").types;return t||he&&he.binding&&he.binding("util")}catch(n){}}(),pe=fe&&fe.isArrayBuffer,de=fe&&fe.isDate,ge=fe&&fe.isMap,ve=fe&&fe.isRegExp,me=fe&&fe.isSet,ye=fe&&fe.isTypedArray;function be(t,n,e){switch(e.length){case 0:return t.call(n);case 1:return t.call(n,e[0]);case 2:return t.call(n,e[0],e[1]);case 3:return t.call(n,e[0],e[1],e[2])}return t.apply(n,e)}function _e(t,n,e,i){var r=-1,o=null==t?0:t.length;while(++r<o){var s=t[r];n(i,s,e(s),t)}return i}function Pe(t,n){var e=-1,i=null==t?0:t.length;while(++e<i)if(!1===n(t[e],e,t))break;return t}function xe(t,n){var e=null==t?0:t.length;while(e--)if(!1===n(t[e],e,t))break;return t}function Ce(t,n){var e=-1,i=null==t?0:t.length;while(++e<i)if(!n(t[e],e,t))return!1;return!0}function je(t,n){var e=-1,i=null==t?0:t.length,r=0,o=[];while(++e<i){var s=t[e];n(s,e,t)&&(o[r++]=s)}return o}function we(t,n){var e=null==t?0:t.length;return!!e&&Re(t,n,0)>-1}function Ee(t,n,e){var i=-1,r=null==t?0:t.length;while(++i<r)if(e(n,t[i]))return!0;return!1}function Se(t,n){var e=-1,i=null==t?0:t.length,r=Array(i);while(++e<i)r[e]=n(t[e],e,t);return r}function De(t,n){var e=-1,i=n.length,r=t.length;while(++e<i)t[r+e]=n[e];return t}function Ae(t,n,e,i){var r=-1,o=null==t?0:t.length;i&&o&&(e=t[++r]);while(++r<o)e=n(e,t[r],r,t);return e}function Ie(t,n,e,i){var r=null==t?0:t.length;i&&r&&(e=t[--r]);while(r--)e=n(e,t[r],r,t);return e}function ke(t,n){var e=-1,i=null==t?0:t.length;while(++e<i)if(n(t[e],e,t))return!0;return!1}var Oe=Be("length");function Te(t){return t.split("")}function Me(t){return t.match(Wt)||[]}function Le(t,n,e){var i;return e(t,(function(t,e,r){if(n(t,e,r))return i=e,!1})),i}function Fe(t,n,e,i){var r=t.length,o=e+(i?1:-1);while(i?o--:++o<r)if(n(t[o],o,t))return o;return-1}function Re(t,n,e){return n===n?fi(t,n,e):Fe(t,Ue,e)}function Ne(t,n,e,i){var r=e-1,o=t.length;while(++r<o)if(i(t[r],n))return r;return-1}function Ue(t){return t!==t}function Ge(t,n){var e=null==t?0:t.length;return e?Ye(t,n)/e:N}function Be(t){return function(n){return null==n?o:n[t]}}function ze(t){return function(n){return null==t?o:t[n]}}function We(t,n,e,i,r){return r(t,(function(t,r,o){e=i?(i=!1,t):n(e,t,r,o)})),e}function He(t,n){var e=t.length;t.sort(n);while(e--)t[e]=t[e].value;return t}function Ye(t,n){var e,i=-1,r=t.length;while(++i<r){var s=n(t[i]);s!==o&&(e=e===o?s:e+s)}return e}function Xe(t,n){var e=-1,i=Array(t);while(++e<t)i[e]=n(e);return i}function qe(t,n){return Se(n,(function(n){return[n,t[n]]}))}function Ve(t){return function(n){return t(n)}}function $e(t,n){return Se(n,(function(n){return t[n]}))}function Ze(t,n){return t.has(n)}function Je(t,n){var e=-1,i=t.length;while(++e<i&&Re(n,t[e],0)>-1);return e}function Ke(t,n){var e=t.length;while(e--&&Re(n,t[e],0)>-1);return e}function Qe(t,n){var e=t.length,i=0;while(e--)t[e]===n&&++i;return i}var ti=ze(Qn),ni=ze(te);function ei(t){return"\\"+ee[t]}function ii(t,n){return null==t?o:t[n]}function ri(t){return qn.test(t)}function oi(t){return Vn.test(t)}function si(t){var n,e=[];while(!(n=t.next()).done)e.push(n.value);return e}function ai(t){var n=-1,e=Array(t.size);return t.forEach((function(t,i){e[++n]=[i,t]})),e}function ui(t,n){return function(e){return t(n(e))}}function li(t,n){var e=-1,i=t.length,r=0,o=[];while(++e<i){var s=t[e];s!==n&&s!==f||(t[e]=f,o[r++]=e)}return o}function ci(t){var n=-1,e=Array(t.size);return t.forEach((function(t){e[++n]=t})),e}function hi(t){var n=-1,e=Array(t.size);return t.forEach((function(t){e[++n]=[t,t]})),e}function fi(t,n,e){var i=e-1,r=t.length;while(++i<r)if(t[i]===n)return i;return-1}function pi(t,n,e){var i=e+1;while(i--)if(t[i]===n)return i;return i}function di(t){return ri(t)?mi(t):Oe(t)}function gi(t){return ri(t)?yi(t):Te(t)}var vi=ze(ne);function mi(t){var n=Yn.lastIndex=0;while(Yn.test(t))++n;return n}function yi(t){return t.match(Yn)||[]}function bi(t){return t.match(Xn)||[]}var _i=function t(n){n=null==n?ae:Pi.defaults(ae.Object(),n,Pi.pick(ae,$n));var e=n.Array,i=n.Date,r=n.Error,Wt=n.Function,nn=n.Math,en=n.Object,rn=n.RegExp,on=n.String,sn=n.TypeError,an=e.prototype,un=Wt.prototype,ln=en.prototype,cn=n["__core-js_shared__"],hn=un.toString,fn=ln.hasOwnProperty,pn=0,dn=function(){var t=/[^.]+$/.exec(cn&&cn.keys&&cn.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),gn=ln.toString,vn=hn.call(en),mn=ae._,yn=rn("^"+hn.call(fn).replace(Lt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),bn=ce?n.Buffer:o,_n=n.Symbol,Pn=n.Uint8Array,xn=bn?bn.allocUnsafe:o,Cn=ui(en.getPrototypeOf,en),jn=en.create,wn=ln.propertyIsEnumerable,En=an.splice,Sn=_n?_n.isConcatSpreadable:o,Dn=_n?_n.iterator:o,An=_n?_n.toStringTag:o,In=function(){try{var t=Ys(en,"defineProperty");return t({},"",{}),t}catch(n){}}(),kn=n.clearTimeout!==ae.clearTimeout&&n.clearTimeout,On=i&&i.now!==ae.Date.now&&i.now,Tn=n.setTimeout!==ae.setTimeout&&n.setTimeout,Mn=nn.ceil,Ln=nn.floor,Fn=en.getOwnPropertySymbols,Rn=bn?bn.isBuffer:o,Nn=n.isFinite,Un=an.join,Gn=ui(en.keys,en),Bn=nn.max,zn=nn.min,Yn=i.now,Xn=n.parseInt,qn=nn.random,Vn=an.reverse,Qn=Ys(n,"DataView"),te=Ys(n,"Map"),ne=Ys(n,"Promise"),ee=Ys(n,"Set"),oe=Ys(n,"WeakMap"),se=Ys(en,"create"),ue=oe&&new oe,le={},he=Ia(Qn),fe=Ia(te),Oe=Ia(ne),Te=Ia(ee),ze=Ia(oe),fi=_n?_n.prototype:o,mi=fi?fi.valueOf:o,yi=fi?fi.toString:o;function _i(t){if(Cc(t)&&!sc(t)&&!(t instanceof wi)){if(t instanceof ji)return t;if(fn.call(t,"__wrapped__"))return Oa(t)}return new ji(t)}var xi=function(){function t(){}return function(n){if(!xc(n))return{};if(jn)return jn(n);t.prototype=n;var e=new t;return t.prototype=o,e}}();function Ci(){}function ji(t,n){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!n,this.__index__=0,this.__values__=o}function wi(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=U,this.__views__=[]}function Ei(){var t=new wi(this.__wrapped__);return t.__actions__=es(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=es(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=es(this.__views__),t}function Si(){if(this.__filtered__){var t=new wi(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function Di(){var t=this.__wrapped__.value(),n=this.__dir__,e=sc(t),i=n<0,r=e?t.length:0,o=Zs(0,r,this.__views__),s=o.start,a=o.end,u=a-s,l=i?a:s-1,c=this.__iteratees__,h=c.length,f=0,p=zn(u,this.__takeCount__);if(!e||!i&&r==u&&p==u)return Ro(t,this.__actions__);var d=[];t:while(u--&&f<p){l+=n;var g=-1,v=t[l];while(++g<h){var m=c[g],y=m.iteratee,b=m.type,_=y(v);if(b==T)v=_;else if(!_){if(b==O)continue t;break t}}d[f++]=v}return d}function Ai(t){var n=-1,e=null==t?0:t.length;this.clear();while(++n<e){var i=t[n];this.set(i[0],i[1])}}function Ii(){this.__data__=se?se(null):{},this.size=0}function ki(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n}function Oi(t){var n=this.__data__;if(se){var e=n[t];return e===c?o:e}return fn.call(n,t)?n[t]:o}function Ti(t){var n=this.__data__;return se?n[t]!==o:fn.call(n,t)}function Mi(t,n){var e=this.__data__;return this.size+=this.has(t)?0:1,e[t]=se&&n===o?c:n,this}function Li(t){var n=-1,e=null==t?0:t.length;this.clear();while(++n<e){var i=t[n];this.set(i[0],i[1])}}function Fi(){this.__data__=[],this.size=0}function Ri(t){var n=this.__data__,e=ur(n,t);if(e<0)return!1;var i=n.length-1;return e==i?n.pop():En.call(n,e,1),--this.size,!0}function Ni(t){var n=this.__data__,e=ur(n,t);return e<0?o:n[e][1]}function Ui(t){return ur(this.__data__,t)>-1}function Gi(t,n){var e=this.__data__,i=ur(e,t);return i<0?(++this.size,e.push([t,n])):e[i][1]=n,this}function Bi(t){var n=-1,e=null==t?0:t.length;this.clear();while(++n<e){var i=t[n];this.set(i[0],i[1])}}function zi(){this.size=0,this.__data__={hash:new Ai,map:new(te||Li),string:new Ai}}function Wi(t){var n=Ws(this,t)["delete"](t);return this.size-=n?1:0,n}function Hi(t){return Ws(this,t).get(t)}function Yi(t){return Ws(this,t).has(t)}function Xi(t,n){var e=Ws(this,t),i=e.size;return e.set(t,n),this.size+=e.size==i?0:1,this}function qi(t){var n=-1,e=null==t?0:t.length;this.__data__=new Bi;while(++n<e)this.add(t[n])}function Vi(t){return this.__data__.set(t,c),this}function $i(t){return this.__data__.has(t)}function Zi(t){var n=this.__data__=new Li(t);this.size=n.size}function Ji(){this.__data__=new Li,this.size=0}function Ki(t){var n=this.__data__,e=n["delete"](t);return this.size=n.size,e}function Qi(t){return this.__data__.get(t)}function tr(t){return this.__data__.has(t)}function nr(t,n){var e=this.__data__;if(e instanceof Li){var i=e.__data__;if(!te||i.length<a-1)return i.push([t,n]),this.size=++e.size,this;e=this.__data__=new Bi(i)}return e.set(t,n),this.size=e.size,this}function er(t,n){var e=sc(t),i=!e&&oc(t),r=!e&&!i&&hc(t),o=!e&&!i&&!r&&Nc(t),s=e||i||r||o,a=s?Xe(t.length,on):[],u=a.length;for(var l in t)!n&&!fn.call(t,l)||s&&("length"==l||r&&("offset"==l||"parent"==l)||o&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||ra(l,u))||a.push(l);return a}function ir(t){var n=t.length;return n?t[vo(0,n-1)]:o}function rr(t,n){return Sa(es(t),dr(n,0,t.length))}function or(t){return Sa(es(t))}function sr(t,n,e){(e!==o&&!ec(t[n],e)||e===o&&!(n in t))&&fr(t,n,e)}function ar(t,n,e){var i=t[n];fn.call(t,n)&&ec(i,e)&&(e!==o||n in t)||fr(t,n,e)}function ur(t,n){var e=t.length;while(e--)if(ec(t[e][0],n))return e;return-1}function lr(t,n,e,i){return _r(t,(function(t,r,o){n(i,t,e(t),o)})),i}function cr(t,n){return t&&is(n,_h(n),t)}function hr(t,n){return t&&is(n,Ph(n),t)}function fr(t,n,e){"__proto__"==n&&In?In(t,n,{configurable:!0,enumerable:!0,value:e,writable:!0}):t[n]=e}function pr(t,n){var i=-1,r=n.length,s=e(r),a=null==t;while(++i<r)s[i]=a?o:dh(t,n[i]);return s}function dr(t,n,e){return t===t&&(e!==o&&(t=t<=e?t:e),n!==o&&(t=t>=n?t:n)),t}function gr(t,n,e,i,r,s){var a,u=n&p,l=n&d,c=n&g;if(e&&(a=r?e(t,i,r,s):e(t)),a!==o)return a;if(!xc(t))return t;var h=sc(t);if(h){if(a=Qs(t),!u)return es(t,a)}else{var f=$s(t),v=f==Z||f==J;if(hc(t))return Xo(t,u);if(f==nt||f==W||v&&!r){if(a=l||v?{}:ta(t),!u)return l?os(t,hr(a,t)):rs(t,cr(a,t))}else{if(!Kn[f])return r?t:{};a=na(t,f,u)}}s||(s=new Zi);var m=s.get(t);if(m)return m;s.set(t,a),Lc(t)?t.forEach((function(i){a.add(gr(i,n,e,i,t,s))})):jc(t)&&t.forEach((function(i,r){a.set(r,gr(i,n,e,r,t,s))}));var y=c?l?Ns:Rs:l?Ph:_h,b=h?o:y(t);return Pe(b||t,(function(i,r){b&&(r=i,i=t[r]),ar(a,r,gr(i,n,e,r,t,s))})),a}function vr(t){var n=_h(t);return function(e){return mr(e,t,n)}}function mr(t,n,e){var i=e.length;if(null==t)return!i;t=en(t);while(i--){var r=e[i],s=n[r],a=t[r];if(a===o&&!(r in t)||!s(a))return!1}return!0}function yr(t,n,e){if("function"!=typeof t)throw new sn(l);return Ca((function(){t.apply(o,e)}),n)}function br(t,n,e,i){var r=-1,o=we,s=!0,u=t.length,l=[],c=n.length;if(!u)return l;e&&(n=Se(n,Ve(e))),i?(o=Ee,s=!1):n.length>=a&&(o=Ze,s=!1,n=new qi(n));t:while(++r<u){var h=t[r],f=null==e?h:e(h);if(h=i||0!==h?h:0,s&&f===f){var p=c;while(p--)if(n[p]===f)continue t;l.push(h)}else o(n,f,i)||l.push(h)}return l}_i.templateSettings={escape:At,evaluate:It,interpolate:kt,variable:"",imports:{_:_i}},_i.prototype=Ci.prototype,_i.prototype.constructor=_i,ji.prototype=xi(Ci.prototype),ji.prototype.constructor=ji,wi.prototype=xi(Ci.prototype),wi.prototype.constructor=wi,Ai.prototype.clear=Ii,Ai.prototype["delete"]=ki,Ai.prototype.get=Oi,Ai.prototype.has=Ti,Ai.prototype.set=Mi,Li.prototype.clear=Fi,Li.prototype["delete"]=Ri,Li.prototype.get=Ni,Li.prototype.has=Ui,Li.prototype.set=Gi,Bi.prototype.clear=zi,Bi.prototype["delete"]=Wi,Bi.prototype.get=Hi,Bi.prototype.has=Yi,Bi.prototype.set=Xi,qi.prototype.add=qi.prototype.push=Vi,qi.prototype.has=$i,Zi.prototype.clear=Ji,Zi.prototype["delete"]=Ki,Zi.prototype.get=Qi,Zi.prototype.has=tr,Zi.prototype.set=nr;var _r=us(Ar),Pr=us(Ir,!0);function xr(t,n){var e=!0;return _r(t,(function(t,i,r){return e=!!n(t,i,r),e})),e}function Cr(t,n,e){var i=-1,r=t.length;while(++i<r){var s=t[i],a=n(s);if(null!=a&&(u===o?a===a&&!Rc(a):e(a,u)))var u=a,l=s}return l}function jr(t,n,e,i){var r=t.length;e=Xc(e),e<0&&(e=-e>r?0:r+e),i=i===o||i>r?r:Xc(i),i<0&&(i+=r),i=e>i?0:qc(i);while(e<i)t[e++]=n;return t}function wr(t,n){var e=[];return _r(t,(function(t,i,r){n(t,i,r)&&e.push(t)})),e}function Er(t,n,e,i,r){var o=-1,s=t.length;e||(e=ia),r||(r=[]);while(++o<s){var a=t[o];n>0&&e(a)?n>1?Er(a,n-1,e,i,r):De(r,a):i||(r[r.length]=a)}return r}var Sr=ls(),Dr=ls(!0);function Ar(t,n){return t&&Sr(t,n,_h)}function Ir(t,n){return t&&Dr(t,n,_h)}function kr(t,n){return je(n,(function(n){return bc(t[n])}))}function Or(t,n){n=zo(n,t);var e=0,i=n.length;while(null!=t&&e<i)t=t[Aa(n[e++])];return e&&e==i?t:o}function Tr(t,n,e){var i=n(t);return sc(t)?i:De(i,e(t))}function Mr(t){return null==t?t===o?ut:tt:An&&An in en(t)?Xs(t):ma(t)}function Lr(t,n){return t>n}function Fr(t,n){return null!=t&&fn.call(t,n)}function Rr(t,n){return null!=t&&n in en(t)}function Nr(t,n,e){return t>=zn(n,e)&&t<Bn(n,e)}function Ur(t,n,i){var r=i?Ee:we,s=t[0].length,a=t.length,u=a,l=e(a),c=1/0,h=[];while(u--){var f=t[u];u&&n&&(f=Se(f,Ve(n))),c=zn(f.length,c),l[u]=!i&&(n||s>=120&&f.length>=120)?new qi(u&&f):o}f=t[0];var p=-1,d=l[0];t:while(++p<s&&h.length<c){var g=f[p],v=n?n(g):g;if(g=i||0!==g?g:0,!(d?Ze(d,v):r(h,v,i))){u=a;while(--u){var m=l[u];if(!(m?Ze(m,v):r(t[u],v,i)))continue t}d&&d.push(v),h.push(g)}}return h}function Gr(t,n,e,i){return Ar(t,(function(t,r,o){n(i,e(t),r,o)})),i}function Br(t,n,e){n=zo(n,t),t=ba(t,n);var i=null==t?t:t[Aa(iu(n))];return null==i?o:be(i,t,e)}function zr(t){return Cc(t)&&Mr(t)==W}function Wr(t){return Cc(t)&&Mr(t)==ht}function Hr(t){return Cc(t)&&Mr(t)==q}function Yr(t,n,e,i,r){return t===n||(null==t||null==n||!Cc(t)&&!Cc(n)?t!==t&&n!==n:Xr(t,n,e,i,Yr,r))}function Xr(t,n,e,i,r,o){var s=sc(t),a=sc(n),u=s?H:$s(t),l=a?H:$s(n);u=u==W?nt:u,l=l==W?nt:l;var c=u==nt,h=l==nt,f=u==l;if(f&&hc(t)){if(!hc(n))return!1;s=!0,c=!1}if(f&&!c)return o||(o=new Zi),s||Nc(t)?Ts(t,n,e,i,r,o):Ms(t,n,u,e,i,r,o);if(!(e&v)){var p=c&&fn.call(t,"__wrapped__"),d=h&&fn.call(n,"__wrapped__");if(p||d){var g=p?t.value():t,m=d?n.value():n;return o||(o=new Zi),r(g,m,e,i,o)}}return!!f&&(o||(o=new Zi),Ls(t,n,e,i,r,o))}function qr(t){return Cc(t)&&$s(t)==K}function Vr(t,n,e,i){var r=e.length,s=r,a=!i;if(null==t)return!s;t=en(t);while(r--){var u=e[r];if(a&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}while(++r<s){u=e[r];var l=u[0],c=t[l],h=u[1];if(a&&u[2]){if(c===o&&!(l in t))return!1}else{var f=new Zi;if(i)var p=i(c,h,l,t,n,f);if(!(p===o?Yr(h,c,v|m,i,f):p))return!1}}return!0}function $r(t){if(!xc(t)||la(t))return!1;var n=bc(t)?yn:$t;return n.test(Ia(t))}function Zr(t){return Cc(t)&&Mr(t)==rt}function Jr(t){return Cc(t)&&$s(t)==ot}function Kr(t){return Cc(t)&&Pc(t.length)&&!!Jn[Mr(t)]}function Qr(t){return"function"==typeof t?t:null==t?Af:"object"==typeof t?sc(t)?oo(t[0],t[1]):ro(t):zf(t)}function to(t){if(!ha(t))return Gn(t);var n=[];for(var e in en(t))fn.call(t,e)&&"constructor"!=e&&n.push(e);return n}function no(t){if(!xc(t))return va(t);var n=ha(t),e=[];for(var i in t)("constructor"!=i||!n&&fn.call(t,i))&&e.push(i);return e}function eo(t,n){return t<n}function io(t,n){var i=-1,r=uc(t)?e(t.length):[];return _r(t,(function(t,e,o){r[++i]=n(t,e,o)})),r}function ro(t){var n=Hs(t);return 1==n.length&&n[0][2]?pa(n[0][0],n[0][1]):function(e){return e===t||Vr(e,t,n)}}function oo(t,n){return sa(t)&&fa(n)?pa(Aa(t),n):function(e){var i=dh(e,t);return i===o&&i===n?vh(e,t):Yr(n,i,v|m)}}function so(t,n,e,i,r){t!==n&&Sr(n,(function(s,a){if(r||(r=new Zi),xc(s))ao(t,n,a,e,so,i,r);else{var u=i?i(Pa(t,a),s,a+"",t,n,r):o;u===o&&(u=s),sr(t,a,u)}}),Ph)}function ao(t,n,e,i,r,s,a){var u=Pa(t,e),l=Pa(n,e),c=a.get(l);if(c)sr(t,e,c);else{var h=s?s(u,l,e+"",t,n,a):o,f=h===o;if(f){var p=sc(l),d=!p&&hc(l),g=!p&&!d&&Nc(l);h=l,p||d||g?sc(u)?h=u:lc(u)?h=es(u):d?(f=!1,h=Xo(l,!0)):g?(f=!1,h=Jo(l,!0)):h=[]:Oc(l)||oc(l)?(h=u,oc(u)?h=$c(u):xc(u)&&!bc(u)||(h=ta(l))):f=!1}f&&(a.set(l,h),r(h,l,i,s,a),a["delete"](l)),sr(t,e,h)}}function uo(t,n){var e=t.length;if(e)return n+=n<0?e:0,ra(n,e)?t[n]:o}function lo(t,n,e){n=n.length?Se(n,(function(t){return sc(t)?function(n){return Or(n,1===t.length?t[0]:t)}:t})):[Af];var i=-1;n=Se(n,Ve(zs()));var r=io(t,(function(t,e,r){var o=Se(n,(function(n){return n(t)}));return{criteria:o,index:++i,value:t}}));return He(r,(function(t,n){return Qo(t,n,e)}))}function co(t,n){return ho(t,n,(function(n,e){return vh(t,e)}))}function ho(t,n,e){var i=-1,r=n.length,o={};while(++i<r){var s=n[i],a=Or(t,s);e(a,s)&&xo(o,zo(s,t),a)}return o}function fo(t){return function(n){return Or(n,t)}}function po(t,n,e,i){var r=i?Ne:Re,o=-1,s=n.length,a=t;t===n&&(n=es(n)),e&&(a=Se(t,Ve(e)));while(++o<s){var u=0,l=n[o],c=e?e(l):l;while((u=r(a,c,u,i))>-1)a!==t&&En.call(a,u,1),En.call(t,u,1)}return t}function go(t,n){var e=t?n.length:0,i=e-1;while(e--){var r=n[e];if(e==i||r!==o){var o=r;ra(r)?En.call(t,r,1):Mo(t,r)}}return t}function vo(t,n){return t+Ln(qn()*(n-t+1))}function mo(t,n,i,r){var o=-1,s=Bn(Mn((n-t)/(i||1)),0),a=e(s);while(s--)a[r?s:++o]=t,t+=i;return a}function yo(t,n){var e="";if(!t||n<1||n>F)return e;do{n%2&&(e+=t),n=Ln(n/2),n&&(t+=t)}while(n);return e}function bo(t,n){return ja(ya(t,n,Af),t+"")}function _o(t){return ir(Uh(t))}function Po(t,n){var e=Uh(t);return Sa(e,dr(n,0,e.length))}function xo(t,n,e,i){if(!xc(t))return t;n=zo(n,t);var r=-1,s=n.length,a=s-1,u=t;while(null!=u&&++r<s){var l=Aa(n[r]),c=e;if("__proto__"===l||"constructor"===l||"prototype"===l)return t;if(r!=a){var h=u[l];c=i?i(h,l,u):o,c===o&&(c=xc(h)?h:ra(n[r+1])?[]:{})}ar(u,l,c),u=u[l]}return t}var Co=ue?function(t,n){return ue.set(t,n),t}:Af,jo=In?function(t,n){return In(t,"toString",{configurable:!0,enumerable:!1,value:wf(n),writable:!0})}:Af;function wo(t){return Sa(Uh(t))}function Eo(t,n,i){var r=-1,o=t.length;n<0&&(n=-n>o?0:o+n),i=i>o?o:i,i<0&&(i+=o),o=n>i?0:i-n>>>0,n>>>=0;var s=e(o);while(++r<o)s[r]=t[r+n];return s}function So(t,n){var e;return _r(t,(function(t,i,r){return e=n(t,i,r),!e})),!!e}function Do(t,n,e){var i=0,r=null==t?i:t.length;if("number"==typeof n&&n===n&&r<=B){while(i<r){var o=i+r>>>1,s=t[o];null!==s&&!Rc(s)&&(e?s<=n:s<n)?i=o+1:r=o}return r}return Ao(t,n,Af,e)}function Ao(t,n,e,i){var r=0,s=null==t?0:t.length;if(0===s)return 0;n=e(n);var a=n!==n,u=null===n,l=Rc(n),c=n===o;while(r<s){var h=Ln((r+s)/2),f=e(t[h]),p=f!==o,d=null===f,g=f===f,v=Rc(f);if(a)var m=i||g;else m=c?g&&(i||p):u?g&&p&&(i||!d):l?g&&p&&!d&&(i||!v):!d&&!v&&(i?f<=n:f<n);m?r=h+1:s=h}return zn(s,G)}function Io(t,n){var e=-1,i=t.length,r=0,o=[];while(++e<i){var s=t[e],a=n?n(s):s;if(!e||!ec(a,u)){var u=a;o[r++]=0===s?0:s}}return o}function ko(t){return"number"==typeof t?t:Rc(t)?N:+t}function Oo(t){if("string"==typeof t)return t;if(sc(t))return Se(t,Oo)+"";if(Rc(t))return yi?yi.call(t):"";var n=t+"";return"0"==n&&1/t==-L?"-0":n}function To(t,n,e){var i=-1,r=we,o=t.length,s=!0,u=[],l=u;if(e)s=!1,r=Ee;else if(o>=a){var c=n?null:Ss(t);if(c)return ci(c);s=!1,r=Ze,l=new qi}else l=n?[]:u;t:while(++i<o){var h=t[i],f=n?n(h):h;if(h=e||0!==h?h:0,s&&f===f){var p=l.length;while(p--)if(l[p]===f)continue t;n&&l.push(f),u.push(h)}else r(l,f,e)||(l!==u&&l.push(f),u.push(h))}return u}function Mo(t,n){return n=zo(n,t),t=ba(t,n),null==t||delete t[Aa(iu(n))]}function Lo(t,n,e,i){return xo(t,n,e(Or(t,n)),i)}function Fo(t,n,e,i){var r=t.length,o=i?r:-1;while((i?o--:++o<r)&&n(t[o],o,t));return e?Eo(t,i?0:o,i?o+1:r):Eo(t,i?o+1:0,i?r:o)}function Ro(t,n){var e=t;return e instanceof wi&&(e=e.value()),Ae(n,(function(t,n){return n.func.apply(n.thisArg,De([t],n.args))}),e)}function No(t,n,i){var r=t.length;if(r<2)return r?To(t[0]):[];var o=-1,s=e(r);while(++o<r){var a=t[o],u=-1;while(++u<r)u!=o&&(s[o]=br(s[o]||a,t[u],n,i))}return To(Er(s,1),n,i)}function Uo(t,n,e){var i=-1,r=t.length,s=n.length,a={};while(++i<r){var u=i<s?n[i]:o;e(a,t[i],u)}return a}function Go(t){return lc(t)?t:[]}function Bo(t){return"function"==typeof t?t:Af}function zo(t,n){return sc(t)?t:sa(t,n)?[t]:Da(Jc(t))}var Wo=bo;function Ho(t,n,e){var i=t.length;return e=e===o?i:e,!n&&e>=i?t:Eo(t,n,e)}var Yo=kn||function(t){return ae.clearTimeout(t)};function Xo(t,n){if(n)return t.slice();var e=t.length,i=xn?xn(e):new t.constructor(e);return t.copy(i),i}function qo(t){var n=new t.constructor(t.byteLength);return new Pn(n).set(new Pn(t)),n}function Vo(t,n){var e=n?qo(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.byteLength)}function $o(t){var n=new t.constructor(t.source,Xt.exec(t));return n.lastIndex=t.lastIndex,n}function Zo(t){return mi?en(mi.call(t)):{}}function Jo(t,n){var e=n?qo(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.length)}function Ko(t,n){if(t!==n){var e=t!==o,i=null===t,r=t===t,s=Rc(t),a=n!==o,u=null===n,l=n===n,c=Rc(n);if(!u&&!c&&!s&&t>n||s&&a&&l&&!u&&!c||i&&a&&l||!e&&l||!r)return 1;if(!i&&!s&&!c&&t<n||c&&e&&r&&!i&&!s||u&&e&&r||!a&&r||!l)return-1}return 0}function Qo(t,n,e){var i=-1,r=t.criteria,o=n.criteria,s=r.length,a=e.length;while(++i<s){var u=Ko(r[i],o[i]);if(u){if(i>=a)return u;var l=e[i];return u*("desc"==l?-1:1)}}return t.index-n.index}function ts(t,n,i,r){var o=-1,s=t.length,a=i.length,u=-1,l=n.length,c=Bn(s-a,0),h=e(l+c),f=!r;while(++u<l)h[u]=n[u];while(++o<a)(f||o<s)&&(h[i[o]]=t[o]);while(c--)h[u++]=t[o++];return h}function ns(t,n,i,r){var o=-1,s=t.length,a=-1,u=i.length,l=-1,c=n.length,h=Bn(s-u,0),f=e(h+c),p=!r;while(++o<h)f[o]=t[o];var d=o;while(++l<c)f[d+l]=n[l];while(++a<u)(p||o<s)&&(f[d+i[a]]=t[o++]);return f}function es(t,n){var i=-1,r=t.length;n||(n=e(r));while(++i<r)n[i]=t[i];return n}function is(t,n,e,i){var r=!e;e||(e={});var s=-1,a=n.length;while(++s<a){var u=n[s],l=i?i(e[u],t[u],u,e,t):o;l===o&&(l=t[u]),r?fr(e,u,l):ar(e,u,l)}return e}function rs(t,n){return is(t,qs(t),n)}function os(t,n){return is(t,Vs(t),n)}function ss(t,n){return function(e,i){var r=sc(e)?_e:lr,o=n?n():{};return r(e,t,zs(i,2),o)}}function as(t){return bo((function(n,e){var i=-1,r=e.length,s=r>1?e[r-1]:o,a=r>2?e[2]:o;s=t.length>3&&"function"==typeof s?(r--,s):o,a&&oa(e[0],e[1],a)&&(s=r<3?o:s,r=1),n=en(n);while(++i<r){var u=e[i];u&&t(n,u,i,s)}return n}))}function us(t,n){return function(e,i){if(null==e)return e;if(!uc(e))return t(e,i);var r=e.length,o=n?r:-1,s=en(e);while(n?o--:++o<r)if(!1===i(s[o],o,s))break;return e}}function ls(t){return function(n,e,i){var r=-1,o=en(n),s=i(n),a=s.length;while(a--){var u=s[t?a:++r];if(!1===e(o[u],u,o))break}return n}}function cs(t,n,e){var i=n&y,r=ps(t);function o(){var n=this&&this!==ae&&this instanceof o?r:t;return n.apply(i?e:this,arguments)}return o}function hs(t){return function(n){n=Jc(n);var e=ri(n)?gi(n):o,i=e?e[0]:n.charAt(0),r=e?Ho(e,1).join(""):n.slice(1);return i[t]()+r}}function fs(t){return function(n){return Ae(_f(Xh(n).replace(Wn,"")),t,"")}}function ps(t){return function(){var n=arguments;switch(n.length){case 0:return new t;case 1:return new t(n[0]);case 2:return new t(n[0],n[1]);case 3:return new t(n[0],n[1],n[2]);case 4:return new t(n[0],n[1],n[2],n[3]);case 5:return new t(n[0],n[1],n[2],n[3],n[4]);case 6:return new t(n[0],n[1],n[2],n[3],n[4],n[5]);case 7:return new t(n[0],n[1],n[2],n[3],n[4],n[5],n[6])}var e=xi(t.prototype),i=t.apply(e,n);return xc(i)?i:e}}function ds(t,n,i){var r=ps(t);function s(){var a=arguments.length,u=e(a),l=a,c=Bs(s);while(l--)u[l]=arguments[l];var h=a<3&&u[0]!==c&&u[a-1]!==c?[]:li(u,c);if(a-=h.length,a<i)return ws(t,n,ms,s.placeholder,o,u,h,o,o,i-a);var f=this&&this!==ae&&this instanceof s?r:t;return be(f,this,u)}return s}function gs(t){return function(n,e,i){var r=en(n);if(!uc(n)){var s=zs(e,3);n=_h(n),e=function(t){return s(r[t],t,r)}}var a=t(n,e,i);return a>-1?r[s?n[a]:a]:o}}function vs(t){return Fs((function(n){var e=n.length,i=e,r=ji.prototype.thru;t&&n.reverse();while(i--){var s=n[i];if("function"!=typeof s)throw new sn(l);if(r&&!a&&"wrapper"==Gs(s))var a=new ji([],!0)}i=a?i:e;while(++i<e){s=n[i];var u=Gs(s),c="wrapper"==u?Us(s):o;a=c&&ua(c[0])&&c[1]==(w|P|C|E)&&!c[4].length&&1==c[9]?a[Gs(c[0])].apply(a,c[3]):1==s.length&&ua(s)?a[u]():a.thru(s)}return function(){var t=arguments,i=t[0];if(a&&1==t.length&&sc(i))return a.plant(i).value();var r=0,o=e?n[r].apply(this,t):i;while(++r<e)o=n[r].call(this,o);return o}}))}function ms(t,n,i,r,s,a,u,l,c,h){var f=n&w,p=n&y,d=n&b,g=n&(P|x),v=n&S,m=d?o:ps(t);function _(){var o=arguments.length,y=e(o),b=o;while(b--)y[b]=arguments[b];if(g)var P=Bs(_),x=Qe(y,P);if(r&&(y=ts(y,r,s,g)),a&&(y=ns(y,a,u,g)),o-=x,g&&o<h){var C=li(y,P);return ws(t,n,ms,_.placeholder,i,y,C,l,c,h-o)}var j=p?i:this,w=d?j[t]:t;return o=y.length,l?y=_a(y,l):v&&o>1&&y.reverse(),f&&c<o&&(y.length=c),this&&this!==ae&&this instanceof _&&(w=m||ps(w)),w.apply(j,y)}return _}function ys(t,n){return function(e,i){return Gr(e,t,n(i),{})}}function bs(t,n){return function(e,i){var r;if(e===o&&i===o)return n;if(e!==o&&(r=e),i!==o){if(r===o)return i;"string"==typeof e||"string"==typeof i?(e=Oo(e),i=Oo(i)):(e=ko(e),i=ko(i)),r=t(e,i)}return r}}function _s(t){return Fs((function(n){return n=Se(n,Ve(zs())),bo((function(e){var i=this;return t(n,(function(t){return be(t,i,e)}))}))}))}function Ps(t,n){n=n===o?" ":Oo(n);var e=n.length;if(e<2)return e?yo(n,t):n;var i=yo(n,Mn(t/di(n)));return ri(n)?Ho(gi(i),0,t).join(""):i.slice(0,t)}function xs(t,n,i,r){var o=n&y,s=ps(t);function a(){var n=-1,u=arguments.length,l=-1,c=r.length,h=e(c+u),f=this&&this!==ae&&this instanceof a?s:t;while(++l<c)h[l]=r[l];while(u--)h[l++]=arguments[++n];return be(f,o?i:this,h)}return a}function Cs(t){return function(n,e,i){return i&&"number"!=typeof i&&oa(n,e,i)&&(e=i=o),n=Yc(n),e===o?(e=n,n=0):e=Yc(e),i=i===o?n<e?1:-1:Yc(i),mo(n,e,i,t)}}function js(t){return function(n,e){return"string"==typeof n&&"string"==typeof e||(n=Vc(n),e=Vc(e)),t(n,e)}}function ws(t,n,e,i,r,s,a,u,l,c){var h=n&P,f=h?a:o,p=h?o:a,d=h?s:o,g=h?o:s;n|=h?C:j,n&=~(h?j:C),n&_||(n&=~(y|b));var v=[t,n,r,d,f,g,p,u,l,c],m=e.apply(o,v);return ua(t)&&xa(m,v),m.placeholder=i,wa(m,t,n)}function Es(t){var n=nn[t];return function(t,e){if(t=Vc(t),e=null==e?0:zn(Xc(e),292),e&&Nn(t)){var i=(Jc(t)+"e").split("e"),r=n(i[0]+"e"+(+i[1]+e));return i=(Jc(r)+"e").split("e"),+(i[0]+"e"+(+i[1]-e))}return n(t)}}var Ss=ee&&1/ci(new ee([,-0]))[1]==L?function(t){return new ee(t)}:Rf;function Ds(t){return function(n){var e=$s(n);return e==K?ai(n):e==ot?hi(n):qe(n,t(n))}}function As(t,n,e,i,r,s,a,u){var c=n&b;if(!c&&"function"!=typeof t)throw new sn(l);var h=i?i.length:0;if(h||(n&=~(C|j),i=r=o),a=a===o?a:Bn(Xc(a),0),u=u===o?u:Xc(u),h-=r?r.length:0,n&j){var f=i,p=r;i=r=o}var d=c?o:Us(t),g=[t,n,e,i,r,f,p,s,a,u];if(d&&ga(g,d),t=g[0],n=g[1],e=g[2],i=g[3],r=g[4],u=g[9]=g[9]===o?c?0:t.length:Bn(g[9]-h,0),!u&&n&(P|x)&&(n&=~(P|x)),n&&n!=y)v=n==P||n==x?ds(t,n,u):n!=C&&n!=(y|C)||r.length?ms.apply(o,g):xs(t,n,e,i);else var v=cs(t,n,e);var m=d?Co:xa;return wa(m(v,g),t,n)}function Is(t,n,e,i){return t===o||ec(t,ln[e])&&!fn.call(i,e)?n:t}function ks(t,n,e,i,r,s){return xc(t)&&xc(n)&&(s.set(n,t),so(t,n,o,ks,s),s["delete"](n)),t}function Os(t){return Oc(t)?o:t}function Ts(t,n,e,i,r,s){var a=e&v,u=t.length,l=n.length;if(u!=l&&!(a&&l>u))return!1;var c=s.get(t),h=s.get(n);if(c&&h)return c==n&&h==t;var f=-1,p=!0,d=e&m?new qi:o;s.set(t,n),s.set(n,t);while(++f<u){var g=t[f],y=n[f];if(i)var b=a?i(y,g,f,n,t,s):i(g,y,f,t,n,s);if(b!==o){if(b)continue;p=!1;break}if(d){if(!ke(n,(function(t,n){if(!Ze(d,n)&&(g===t||r(g,t,e,i,s)))return d.push(n)}))){p=!1;break}}else if(g!==y&&!r(g,y,e,i,s)){p=!1;break}}return s["delete"](t),s["delete"](n),p}function Ms(t,n,e,i,r,o,s){switch(e){case ft:if(t.byteLength!=n.byteLength||t.byteOffset!=n.byteOffset)return!1;t=t.buffer,n=n.buffer;case ht:return!(t.byteLength!=n.byteLength||!o(new Pn(t),new Pn(n)));case X:case q:case Q:return ec(+t,+n);case $:return t.name==n.name&&t.message==n.message;case rt:case st:return t==n+"";case K:var a=ai;case ot:var u=i&v;if(a||(a=ci),t.size!=n.size&&!u)return!1;var l=s.get(t);if(l)return l==n;i|=m,s.set(t,n);var c=Ts(a(t),a(n),i,r,o,s);return s["delete"](t),c;case at:if(mi)return mi.call(t)==mi.call(n)}return!1}function Ls(t,n,e,i,r,s){var a=e&v,u=Rs(t),l=u.length,c=Rs(n),h=c.length;if(l!=h&&!a)return!1;var f=l;while(f--){var p=u[f];if(!(a?p in n:fn.call(n,p)))return!1}var d=s.get(t),g=s.get(n);if(d&&g)return d==n&&g==t;var m=!0;s.set(t,n),s.set(n,t);var y=a;while(++f<l){p=u[f];var b=t[p],_=n[p];if(i)var P=a?i(_,b,p,n,t,s):i(b,_,p,t,n,s);if(!(P===o?b===_||r(b,_,e,i,s):P)){m=!1;break}y||(y="constructor"==p)}if(m&&!y){var x=t.constructor,C=n.constructor;x==C||!("constructor"in t)||!("constructor"in n)||"function"==typeof x&&x instanceof x&&"function"==typeof C&&C instanceof C||(m=!1)}return s["delete"](t),s["delete"](n),m}function Fs(t){return ja(ya(t,o,Xa),t+"")}function Rs(t){return Tr(t,_h,qs)}function Ns(t){return Tr(t,Ph,Vs)}var Us=ue?function(t){return ue.get(t)}:Rf;function Gs(t){var n=t.name+"",e=le[n],i=fn.call(le,n)?e.length:0;while(i--){var r=e[i],o=r.func;if(null==o||o==t)return r.name}return n}function Bs(t){var n=fn.call(_i,"placeholder")?_i:t;return n.placeholder}function zs(){var t=_i.iteratee||If;return t=t===If?Qr:t,arguments.length?t(arguments[0],arguments[1]):t}function Ws(t,n){var e=t.__data__;return aa(n)?e["string"==typeof n?"string":"hash"]:e.map}function Hs(t){var n=_h(t),e=n.length;while(e--){var i=n[e],r=t[i];n[e]=[i,r,fa(r)]}return n}function Ys(t,n){var e=ii(t,n);return $r(e)?e:o}function Xs(t){var n=fn.call(t,An),e=t[An];try{t[An]=o;var i=!0}catch(s){}var r=gn.call(t);return i&&(n?t[An]=e:delete t[An]),r}var qs=Fn?function(t){return null==t?[]:(t=en(t),je(Fn(t),(function(n){return wn.call(t,n)})))}:Xf,Vs=Fn?function(t){var n=[];while(t)De(n,qs(t)),t=Cn(t);return n}:Xf,$s=Mr;function Zs(t,n,e){var i=-1,r=e.length;while(++i<r){var o=e[i],s=o.size;switch(o.type){case"drop":t+=s;break;case"dropRight":n-=s;break;case"take":n=zn(n,t+s);break;case"takeRight":t=Bn(t,n-s);break}}return{start:t,end:n}}function Js(t){var n=t.match(Bt);return n?n[1].split(zt):[]}function Ks(t,n,e){n=zo(n,t);var i=-1,r=n.length,o=!1;while(++i<r){var s=Aa(n[i]);if(!(o=null!=t&&e(t,s)))break;t=t[s]}return o||++i!=r?o:(r=null==t?0:t.length,!!r&&Pc(r)&&ra(s,r)&&(sc(t)||oc(t)))}function Qs(t){var n=t.length,e=new t.constructor(n);return n&&"string"==typeof t[0]&&fn.call(t,"index")&&(e.index=t.index,e.input=t.input),e}function ta(t){return"function"!=typeof t.constructor||ha(t)?{}:xi(Cn(t))}function na(t,n,e){var i=t.constructor;switch(n){case ht:return qo(t);case X:case q:return new i(+t);case ft:return Vo(t,e);case pt:case dt:case gt:case vt:case mt:case yt:case bt:case _t:case Pt:return Jo(t,e);case K:return new i;case Q:case st:return new i(t);case rt:return $o(t);case ot:return new i;case at:return Zo(t)}}function ea(t,n){var e=n.length;if(!e)return t;var i=e-1;return n[i]=(e>1?"& ":"")+n[i],n=n.join(e>2?", ":" "),t.replace(Gt,"{\n/* [wrapped with "+n+"] */\n")}function ia(t){return sc(t)||oc(t)||!!(Sn&&t&&t[Sn])}function ra(t,n){var e=typeof t;return n=null==n?F:n,!!n&&("number"==e||"symbol"!=e&&Jt.test(t))&&t>-1&&t%1==0&&t<n}function oa(t,n,e){if(!xc(e))return!1;var i=typeof n;return!!("number"==i?uc(e)&&ra(n,e.length):"string"==i&&n in e)&&ec(e[n],t)}function sa(t,n){if(sc(t))return!1;var e=typeof t;return!("number"!=e&&"symbol"!=e&&"boolean"!=e&&null!=t&&!Rc(t))||(Tt.test(t)||!Ot.test(t)||null!=n&&t in en(n))}function aa(t){var n=typeof t;return"string"==n||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==t:null===t}function ua(t){var n=Gs(t),e=_i[n];if("function"!=typeof e||!(n in wi.prototype))return!1;if(t===e)return!0;var i=Us(e);return!!i&&t===i[0]}function la(t){return!!dn&&dn in t}(Qn&&$s(new Qn(new ArrayBuffer(1)))!=ft||te&&$s(new te)!=K||ne&&$s(ne.resolve())!=et||ee&&$s(new ee)!=ot||oe&&$s(new oe)!=lt)&&($s=function(t){var n=Mr(t),e=n==nt?t.constructor:o,i=e?Ia(e):"";if(i)switch(i){case he:return ft;case fe:return K;case Oe:return et;case Te:return ot;case ze:return lt}return n});var ca=cn?bc:qf;function ha(t){var n=t&&t.constructor,e="function"==typeof n&&n.prototype||ln;return t===e}function fa(t){return t===t&&!xc(t)}function pa(t,n){return function(e){return null!=e&&(e[t]===n&&(n!==o||t in en(e)))}}function da(t){var n=Nl(t,(function(t){return e.size===h&&e.clear(),t})),e=n.cache;return n}function ga(t,n){var e=t[1],i=n[1],r=e|i,o=r<(y|b|w),s=i==w&&e==P||i==w&&e==E&&t[7].length<=n[8]||i==(w|E)&&n[7].length<=n[8]&&e==P;if(!o&&!s)return t;i&y&&(t[2]=n[2],r|=e&y?0:_);var a=n[3];if(a){var u=t[3];t[3]=u?ts(u,a,n[4]):a,t[4]=u?li(t[3],f):n[4]}return a=n[5],a&&(u=t[5],t[5]=u?ns(u,a,n[6]):a,t[6]=u?li(t[5],f):n[6]),a=n[7],a&&(t[7]=a),i&w&&(t[8]=null==t[8]?n[8]:zn(t[8],n[8])),null==t[9]&&(t[9]=n[9]),t[0]=n[0],t[1]=r,t}function va(t){var n=[];if(null!=t)for(var e in en(t))n.push(e);return n}function ma(t){return gn.call(t)}function ya(t,n,i){return n=Bn(n===o?t.length-1:n,0),function(){var r=arguments,o=-1,s=Bn(r.length-n,0),a=e(s);while(++o<s)a[o]=r[n+o];o=-1;var u=e(n+1);while(++o<n)u[o]=r[o];return u[n]=i(a),be(t,this,u)}}function ba(t,n){return n.length<2?t:Or(t,Eo(n,0,-1))}function _a(t,n){var e=t.length,i=zn(n.length,e),r=es(t);while(i--){var s=n[i];t[i]=ra(s,e)?r[s]:o}return t}function Pa(t,n){if(("constructor"!==n||"function"!==typeof t[n])&&"__proto__"!=n)return t[n]}var xa=Ea(Co),Ca=Tn||function(t,n){return ae.setTimeout(t,n)},ja=Ea(jo);function wa(t,n,e){var i=n+"";return ja(t,ea(i,ka(Js(i),e)))}function Ea(t){var n=0,e=0;return function(){var i=Yn(),r=k-(i-e);if(e=i,r>0){if(++n>=I)return arguments[0]}else n=0;return t.apply(o,arguments)}}function Sa(t,n){var e=-1,i=t.length,r=i-1;n=n===o?i:n;while(++e<n){var s=vo(e,r),a=t[s];t[s]=t[e],t[e]=a}return t.length=n,t}var Da=da((function(t){var n=[];return 46===t.charCodeAt(0)&&n.push(""),t.replace(Mt,(function(t,e,i,r){n.push(i?r.replace(Ht,"$1"):e||t)})),n}));function Aa(t){if("string"==typeof t||Rc(t))return t;var n=t+"";return"0"==n&&1/t==-L?"-0":n}function Ia(t){if(null!=t){try{return hn.call(t)}catch(n){}try{return t+""}catch(n){}}return""}function ka(t,n){return Pe(z,(function(e){var i="_."+e[0];n&e[1]&&!we(t,i)&&t.push(i)})),t.sort()}function Oa(t){if(t instanceof wi)return t.clone();var n=new ji(t.__wrapped__,t.__chain__);return n.__actions__=es(t.__actions__),n.__index__=t.__index__,n.__values__=t.__values__,n}function Ta(t,n,i){n=(i?oa(t,n,i):n===o)?1:Bn(Xc(n),0);var r=null==t?0:t.length;if(!r||n<1)return[];var s=0,a=0,u=e(Mn(r/n));while(s<r)u[a++]=Eo(t,s,s+=n);return u}function Ma(t){var n=-1,e=null==t?0:t.length,i=0,r=[];while(++n<e){var o=t[n];o&&(r[i++]=o)}return r}function La(){var t=arguments.length;if(!t)return[];var n=e(t-1),i=arguments[0],r=t;while(r--)n[r-1]=arguments[r];return De(sc(i)?es(i):[i],Er(n,1))}var Fa=bo((function(t,n){return lc(t)?br(t,Er(n,1,lc,!0)):[]})),Ra=bo((function(t,n){var e=iu(n);return lc(e)&&(e=o),lc(t)?br(t,Er(n,1,lc,!0),zs(e,2)):[]})),Na=bo((function(t,n){var e=iu(n);return lc(e)&&(e=o),lc(t)?br(t,Er(n,1,lc,!0),o,e):[]}));function Ua(t,n,e){var i=null==t?0:t.length;return i?(n=e||n===o?1:Xc(n),Eo(t,n<0?0:n,i)):[]}function Ga(t,n,e){var i=null==t?0:t.length;return i?(n=e||n===o?1:Xc(n),n=i-n,Eo(t,0,n<0?0:n)):[]}function Ba(t,n){return t&&t.length?Fo(t,zs(n,3),!0,!0):[]}function za(t,n){return t&&t.length?Fo(t,zs(n,3),!0):[]}function Wa(t,n,e,i){var r=null==t?0:t.length;return r?(e&&"number"!=typeof e&&oa(t,n,e)&&(e=0,i=r),jr(t,n,e,i)):[]}function Ha(t,n,e){var i=null==t?0:t.length;if(!i)return-1;var r=null==e?0:Xc(e);return r<0&&(r=Bn(i+r,0)),Fe(t,zs(n,3),r)}function Ya(t,n,e){var i=null==t?0:t.length;if(!i)return-1;var r=i-1;return e!==o&&(r=Xc(e),r=e<0?Bn(i+r,0):zn(r,i-1)),Fe(t,zs(n,3),r,!0)}function Xa(t){var n=null==t?0:t.length;return n?Er(t,1):[]}function qa(t){var n=null==t?0:t.length;return n?Er(t,L):[]}function Va(t,n){var e=null==t?0:t.length;return e?(n=n===o?1:Xc(n),Er(t,n)):[]}function $a(t){var n=-1,e=null==t?0:t.length,i={};while(++n<e){var r=t[n];i[r[0]]=r[1]}return i}function Za(t){return t&&t.length?t[0]:o}function Ja(t,n,e){var i=null==t?0:t.length;if(!i)return-1;var r=null==e?0:Xc(e);return r<0&&(r=Bn(i+r,0)),Re(t,n,r)}function Ka(t){var n=null==t?0:t.length;return n?Eo(t,0,-1):[]}var Qa=bo((function(t){var n=Se(t,Go);return n.length&&n[0]===t[0]?Ur(n):[]})),tu=bo((function(t){var n=iu(t),e=Se(t,Go);return n===iu(e)?n=o:e.pop(),e.length&&e[0]===t[0]?Ur(e,zs(n,2)):[]})),nu=bo((function(t){var n=iu(t),e=Se(t,Go);return n="function"==typeof n?n:o,n&&e.pop(),e.length&&e[0]===t[0]?Ur(e,o,n):[]}));function eu(t,n){return null==t?"":Un.call(t,n)}function iu(t){var n=null==t?0:t.length;return n?t[n-1]:o}function ru(t,n,e){var i=null==t?0:t.length;if(!i)return-1;var r=i;return e!==o&&(r=Xc(e),r=r<0?Bn(i+r,0):zn(r,i-1)),n===n?pi(t,n,r):Fe(t,Ue,r,!0)}function ou(t,n){return t&&t.length?uo(t,Xc(n)):o}var su=bo(au);function au(t,n){return t&&t.length&&n&&n.length?po(t,n):t}function uu(t,n,e){return t&&t.length&&n&&n.length?po(t,n,zs(e,2)):t}function lu(t,n,e){return t&&t.length&&n&&n.length?po(t,n,o,e):t}var cu=Fs((function(t,n){var e=null==t?0:t.length,i=pr(t,n);return go(t,Se(n,(function(t){return ra(t,e)?+t:t})).sort(Ko)),i}));function hu(t,n){var e=[];if(!t||!t.length)return e;var i=-1,r=[],o=t.length;n=zs(n,3);while(++i<o){var s=t[i];n(s,i,t)&&(e.push(s),r.push(i))}return go(t,r),e}function fu(t){return null==t?t:Vn.call(t)}function pu(t,n,e){var i=null==t?0:t.length;return i?(e&&"number"!=typeof e&&oa(t,n,e)?(n=0,e=i):(n=null==n?0:Xc(n),e=e===o?i:Xc(e)),Eo(t,n,e)):[]}function du(t,n){return Do(t,n)}function gu(t,n,e){return Ao(t,n,zs(e,2))}function vu(t,n){var e=null==t?0:t.length;if(e){var i=Do(t,n);if(i<e&&ec(t[i],n))return i}return-1}function mu(t,n){return Do(t,n,!0)}function yu(t,n,e){return Ao(t,n,zs(e,2),!0)}function bu(t,n){var e=null==t?0:t.length;if(e){var i=Do(t,n,!0)-1;if(ec(t[i],n))return i}return-1}function _u(t){return t&&t.length?Io(t):[]}function Pu(t,n){return t&&t.length?Io(t,zs(n,2)):[]}function xu(t){var n=null==t?0:t.length;return n?Eo(t,1,n):[]}function Cu(t,n,e){return t&&t.length?(n=e||n===o?1:Xc(n),Eo(t,0,n<0?0:n)):[]}function ju(t,n,e){var i=null==t?0:t.length;return i?(n=e||n===o?1:Xc(n),n=i-n,Eo(t,n<0?0:n,i)):[]}function wu(t,n){return t&&t.length?Fo(t,zs(n,3),!1,!0):[]}function Eu(t,n){return t&&t.length?Fo(t,zs(n,3)):[]}var Su=bo((function(t){return To(Er(t,1,lc,!0))})),Du=bo((function(t){var n=iu(t);return lc(n)&&(n=o),To(Er(t,1,lc,!0),zs(n,2))})),Au=bo((function(t){var n=iu(t);return n="function"==typeof n?n:o,To(Er(t,1,lc,!0),o,n)}));function Iu(t){return t&&t.length?To(t):[]}function ku(t,n){return t&&t.length?To(t,zs(n,2)):[]}function Ou(t,n){return n="function"==typeof n?n:o,t&&t.length?To(t,o,n):[]}function Tu(t){if(!t||!t.length)return[];var n=0;return t=je(t,(function(t){if(lc(t))return n=Bn(t.length,n),!0})),Xe(n,(function(n){return Se(t,Be(n))}))}function Mu(t,n){if(!t||!t.length)return[];var e=Tu(t);return null==n?e:Se(e,(function(t){return be(n,o,t)}))}var Lu=bo((function(t,n){return lc(t)?br(t,n):[]})),Fu=bo((function(t){return No(je(t,lc))})),Ru=bo((function(t){var n=iu(t);return lc(n)&&(n=o),No(je(t,lc),zs(n,2))})),Nu=bo((function(t){var n=iu(t);return n="function"==typeof n?n:o,No(je(t,lc),o,n)})),Uu=bo(Tu);function Gu(t,n){return Uo(t||[],n||[],ar)}function Bu(t,n){return Uo(t||[],n||[],xo)}var zu=bo((function(t){var n=t.length,e=n>1?t[n-1]:o;return e="function"==typeof e?(t.pop(),e):o,Mu(t,e)}));function Wu(t){var n=_i(t);return n.__chain__=!0,n}function Hu(t,n){return n(t),t}function Yu(t,n){return n(t)}var Xu=Fs((function(t){var n=t.length,e=n?t[0]:0,i=this.__wrapped__,r=function(n){return pr(n,t)};return!(n>1||this.__actions__.length)&&i instanceof wi&&ra(e)?(i=i.slice(e,+e+(n?1:0)),i.__actions__.push({func:Yu,args:[r],thisArg:o}),new ji(i,this.__chain__).thru((function(t){return n&&!t.length&&t.push(o),t}))):this.thru(r)}));function qu(){return Wu(this)}function Vu(){return new ji(this.value(),this.__chain__)}function $u(){this.__values__===o&&(this.__values__=Hc(this.value()));var t=this.__index__>=this.__values__.length,n=t?o:this.__values__[this.__index__++];return{done:t,value:n}}function Zu(){return this}function Ju(t){var n,e=this;while(e instanceof Ci){var i=Oa(e);i.__index__=0,i.__values__=o,n?r.__wrapped__=i:n=i;var r=i;e=e.__wrapped__}return r.__wrapped__=t,n}function Ku(){var t=this.__wrapped__;if(t instanceof wi){var n=t;return this.__actions__.length&&(n=new wi(this)),n=n.reverse(),n.__actions__.push({func:Yu,args:[fu],thisArg:o}),new ji(n,this.__chain__)}return this.thru(fu)}function Qu(){return Ro(this.__wrapped__,this.__actions__)}var tl=ss((function(t,n,e){fn.call(t,e)?++t[e]:fr(t,e,1)}));function nl(t,n,e){var i=sc(t)?Ce:xr;return e&&oa(t,n,e)&&(n=o),i(t,zs(n,3))}function el(t,n){var e=sc(t)?je:wr;return e(t,zs(n,3))}var il=gs(Ha),rl=gs(Ya);function ol(t,n){return Er(dl(t,n),1)}function sl(t,n){return Er(dl(t,n),L)}function al(t,n,e){return e=e===o?1:Xc(e),Er(dl(t,n),e)}function ul(t,n){var e=sc(t)?Pe:_r;return e(t,zs(n,3))}function ll(t,n){var e=sc(t)?xe:Pr;return e(t,zs(n,3))}var cl=ss((function(t,n,e){fn.call(t,e)?t[e].push(n):fr(t,e,[n])}));function hl(t,n,e,i){t=uc(t)?t:Uh(t),e=e&&!i?Xc(e):0;var r=t.length;return e<0&&(e=Bn(r+e,0)),Fc(t)?e<=r&&t.indexOf(n,e)>-1:!!r&&Re(t,n,e)>-1}var fl=bo((function(t,n,i){var r=-1,o="function"==typeof n,s=uc(t)?e(t.length):[];return _r(t,(function(t){s[++r]=o?be(n,t,i):Br(t,n,i)})),s})),pl=ss((function(t,n,e){fr(t,e,n)}));function dl(t,n){var e=sc(t)?Se:io;return e(t,zs(n,3))}function gl(t,n,e,i){return null==t?[]:(sc(n)||(n=null==n?[]:[n]),e=i?o:e,sc(e)||(e=null==e?[]:[e]),lo(t,n,e))}var vl=ss((function(t,n,e){t[e?0:1].push(n)}),(function(){return[[],[]]}));function ml(t,n,e){var i=sc(t)?Ae:We,r=arguments.length<3;return i(t,zs(n,4),e,r,_r)}function yl(t,n,e){var i=sc(t)?Ie:We,r=arguments.length<3;return i(t,zs(n,4),e,r,Pr)}function bl(t,n){var e=sc(t)?je:wr;return e(t,Ul(zs(n,3)))}function _l(t){var n=sc(t)?ir:_o;return n(t)}function Pl(t,n,e){n=(e?oa(t,n,e):n===o)?1:Xc(n);var i=sc(t)?rr:Po;return i(t,n)}function xl(t){var n=sc(t)?or:wo;return n(t)}function Cl(t){if(null==t)return 0;if(uc(t))return Fc(t)?di(t):t.length;var n=$s(t);return n==K||n==ot?t.size:to(t).length}function jl(t,n,e){var i=sc(t)?ke:So;return e&&oa(t,n,e)&&(n=o),i(t,zs(n,3))}var wl=bo((function(t,n){if(null==t)return[];var e=n.length;return e>1&&oa(t,n[0],n[1])?n=[]:e>2&&oa(n[0],n[1],n[2])&&(n=[n[0]]),lo(t,Er(n,1),[])})),El=On||function(){return ae.Date.now()};function Sl(t,n){if("function"!=typeof n)throw new sn(l);return t=Xc(t),function(){if(--t<1)return n.apply(this,arguments)}}function Dl(t,n,e){return n=e?o:n,n=t&&null==n?t.length:n,As(t,w,o,o,o,o,n)}function Al(t,n){var e;if("function"!=typeof n)throw new sn(l);return t=Xc(t),function(){return--t>0&&(e=n.apply(this,arguments)),t<=1&&(n=o),e}}var Il=bo((function(t,n,e){var i=y;if(e.length){var r=li(e,Bs(Il));i|=C}return As(t,i,n,e,r)})),kl=bo((function(t,n,e){var i=y|b;if(e.length){var r=li(e,Bs(kl));i|=C}return As(n,i,t,e,r)}));function Ol(t,n,e){n=e?o:n;var i=As(t,P,o,o,o,o,o,n);return i.placeholder=Ol.placeholder,i}function Tl(t,n,e){n=e?o:n;var i=As(t,x,o,o,o,o,o,n);return i.placeholder=Tl.placeholder,i}function Ml(t,n,e){var i,r,s,a,u,c,h=0,f=!1,p=!1,d=!0;if("function"!=typeof t)throw new sn(l);function g(n){var e=i,s=r;return i=r=o,h=n,a=t.apply(s,e),a}function v(t){return h=t,u=Ca(b,n),f?g(t):a}function m(t){var e=t-c,i=t-h,r=n-e;return p?zn(r,s-i):r}function y(t){var e=t-c,i=t-h;return c===o||e>=n||e<0||p&&i>=s}function b(){var t=El();if(y(t))return _(t);u=Ca(b,m(t))}function _(t){return u=o,d&&i?g(t):(i=r=o,a)}function P(){u!==o&&Yo(u),h=0,i=c=r=u=o}function x(){return u===o?a:_(El())}function C(){var t=El(),e=y(t);if(i=arguments,r=this,c=t,e){if(u===o)return v(c);if(p)return Yo(u),u=Ca(b,n),g(c)}return u===o&&(u=Ca(b,n)),a}return n=Vc(n)||0,xc(e)&&(f=!!e.leading,p="maxWait"in e,s=p?Bn(Vc(e.maxWait)||0,n):s,d="trailing"in e?!!e.trailing:d),C.cancel=P,C.flush=x,C}var Ll=bo((function(t,n){return yr(t,1,n)})),Fl=bo((function(t,n,e){return yr(t,Vc(n)||0,e)}));function Rl(t){return As(t,S)}function Nl(t,n){if("function"!=typeof t||null!=n&&"function"!=typeof n)throw new sn(l);var e=function(){var i=arguments,r=n?n.apply(this,i):i[0],o=e.cache;if(o.has(r))return o.get(r);var s=t.apply(this,i);return e.cache=o.set(r,s)||o,s};return e.cache=new(Nl.Cache||Bi),e}function Ul(t){if("function"!=typeof t)throw new sn(l);return function(){var n=arguments;switch(n.length){case 0:return!t.call(this);case 1:return!t.call(this,n[0]);case 2:return!t.call(this,n[0],n[1]);case 3:return!t.call(this,n[0],n[1],n[2])}return!t.apply(this,n)}}function Gl(t){return Al(2,t)}Nl.Cache=Bi;var Bl=Wo((function(t,n){n=1==n.length&&sc(n[0])?Se(n[0],Ve(zs())):Se(Er(n,1),Ve(zs()));var e=n.length;return bo((function(i){var r=-1,o=zn(i.length,e);while(++r<o)i[r]=n[r].call(this,i[r]);return be(t,this,i)}))})),zl=bo((function(t,n){var e=li(n,Bs(zl));return As(t,C,o,n,e)})),Wl=bo((function(t,n){var e=li(n,Bs(Wl));return As(t,j,o,n,e)})),Hl=Fs((function(t,n){return As(t,E,o,o,o,n)}));function Yl(t,n){if("function"!=typeof t)throw new sn(l);return n=n===o?n:Xc(n),bo(t,n)}function Xl(t,n){if("function"!=typeof t)throw new sn(l);return n=null==n?0:Bn(Xc(n),0),bo((function(e){var i=e[n],r=Ho(e,0,n);return i&&De(r,i),be(t,this,r)}))}function ql(t,n,e){var i=!0,r=!0;if("function"!=typeof t)throw new sn(l);return xc(e)&&(i="leading"in e?!!e.leading:i,r="trailing"in e?!!e.trailing:r),Ml(t,n,{leading:i,maxWait:n,trailing:r})}function Vl(t){return Dl(t,1)}function $l(t,n){return zl(Bo(n),t)}function Zl(){if(!arguments.length)return[];var t=arguments[0];return sc(t)?t:[t]}function Jl(t){return gr(t,g)}function Kl(t,n){return n="function"==typeof n?n:o,gr(t,g,n)}function Ql(t){return gr(t,p|g)}function tc(t,n){return n="function"==typeof n?n:o,gr(t,p|g,n)}function nc(t,n){return null==n||mr(t,n,_h(n))}function ec(t,n){return t===n||t!==t&&n!==n}var ic=js(Lr),rc=js((function(t,n){return t>=n})),oc=zr(function(){return arguments}())?zr:function(t){return Cc(t)&&fn.call(t,"callee")&&!wn.call(t,"callee")},sc=e.isArray,ac=pe?Ve(pe):Wr;function uc(t){return null!=t&&Pc(t.length)&&!bc(t)}function lc(t){return Cc(t)&&uc(t)}function cc(t){return!0===t||!1===t||Cc(t)&&Mr(t)==X}var hc=Rn||qf,fc=de?Ve(de):Hr;function pc(t){return Cc(t)&&1===t.nodeType&&!Oc(t)}function dc(t){if(null==t)return!0;if(uc(t)&&(sc(t)||"string"==typeof t||"function"==typeof t.splice||hc(t)||Nc(t)||oc(t)))return!t.length;var n=$s(t);if(n==K||n==ot)return!t.size;if(ha(t))return!to(t).length;for(var e in t)if(fn.call(t,e))return!1;return!0}function gc(t,n){return Yr(t,n)}function vc(t,n,e){e="function"==typeof e?e:o;var i=e?e(t,n):o;return i===o?Yr(t,n,o,e):!!i}function mc(t){if(!Cc(t))return!1;var n=Mr(t);return n==$||n==V||"string"==typeof t.message&&"string"==typeof t.name&&!Oc(t)}function yc(t){return"number"==typeof t&&Nn(t)}function bc(t){if(!xc(t))return!1;var n=Mr(t);return n==Z||n==J||n==Y||n==it}function _c(t){return"number"==typeof t&&t==Xc(t)}function Pc(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=F}function xc(t){var n=typeof t;return null!=t&&("object"==n||"function"==n)}function Cc(t){return null!=t&&"object"==typeof t}var jc=ge?Ve(ge):qr;function wc(t,n){return t===n||Vr(t,n,Hs(n))}function Ec(t,n,e){return e="function"==typeof e?e:o,Vr(t,n,Hs(n),e)}function Sc(t){return kc(t)&&t!=+t}function Dc(t){if(ca(t))throw new r(u);return $r(t)}function Ac(t){return null===t}function Ic(t){return null==t}function kc(t){return"number"==typeof t||Cc(t)&&Mr(t)==Q}function Oc(t){if(!Cc(t)||Mr(t)!=nt)return!1;var n=Cn(t);if(null===n)return!0;var e=fn.call(n,"constructor")&&n.constructor;return"function"==typeof e&&e instanceof e&&hn.call(e)==vn}var Tc=ve?Ve(ve):Zr;function Mc(t){return _c(t)&&t>=-F&&t<=F}var Lc=me?Ve(me):Jr;function Fc(t){return"string"==typeof t||!sc(t)&&Cc(t)&&Mr(t)==st}function Rc(t){return"symbol"==typeof t||Cc(t)&&Mr(t)==at}var Nc=ye?Ve(ye):Kr;function Uc(t){return t===o}function Gc(t){return Cc(t)&&$s(t)==lt}function Bc(t){return Cc(t)&&Mr(t)==ct}var zc=js(eo),Wc=js((function(t,n){return t<=n}));function Hc(t){if(!t)return[];if(uc(t))return Fc(t)?gi(t):es(t);if(Dn&&t[Dn])return si(t[Dn]());var n=$s(t),e=n==K?ai:n==ot?ci:Uh;return e(t)}function Yc(t){if(!t)return 0===t?t:0;if(t=Vc(t),t===L||t===-L){var n=t<0?-1:1;return n*R}return t===t?t:0}function Xc(t){var n=Yc(t),e=n%1;return n===n?e?n-e:n:0}function qc(t){return t?dr(Xc(t),0,U):0}function Vc(t){if("number"==typeof t)return t;if(Rc(t))return N;if(xc(t)){var n="function"==typeof t.valueOf?t.valueOf():t;t=xc(n)?n+"":n}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(Rt,"");var e=Vt.test(t);return e||Zt.test(t)?re(t.slice(2),e?2:8):qt.test(t)?N:+t}function $c(t){return is(t,Ph(t))}function Zc(t){return t?dr(Xc(t),-F,F):0===t?t:0}function Jc(t){return null==t?"":Oo(t)}var Kc=as((function(t,n){if(ha(n)||uc(n))is(n,_h(n),t);else for(var e in n)fn.call(n,e)&&ar(t,e,n[e])})),Qc=as((function(t,n){is(n,Ph(n),t)})),th=as((function(t,n,e,i){is(n,Ph(n),t,i)})),nh=as((function(t,n,e,i){is(n,_h(n),t,i)})),eh=Fs(pr);function ih(t,n){var e=xi(t);return null==n?e:cr(e,n)}var rh=bo((function(t,n){t=en(t);var e=-1,i=n.length,r=i>2?n[2]:o;r&&oa(n[0],n[1],r)&&(i=1);while(++e<i){var s=n[e],a=Ph(s),u=-1,l=a.length;while(++u<l){var c=a[u],h=t[c];(h===o||ec(h,ln[c])&&!fn.call(t,c))&&(t[c]=s[c])}}return t})),oh=bo((function(t){return t.push(o,ks),be(wh,o,t)}));function sh(t,n){return Le(t,zs(n,3),Ar)}function ah(t,n){return Le(t,zs(n,3),Ir)}function uh(t,n){return null==t?t:Sr(t,zs(n,3),Ph)}function lh(t,n){return null==t?t:Dr(t,zs(n,3),Ph)}function ch(t,n){return t&&Ar(t,zs(n,3))}function hh(t,n){return t&&Ir(t,zs(n,3))}function fh(t){return null==t?[]:kr(t,_h(t))}function ph(t){return null==t?[]:kr(t,Ph(t))}function dh(t,n,e){var i=null==t?o:Or(t,n);return i===o?e:i}function gh(t,n){return null!=t&&Ks(t,n,Fr)}function vh(t,n){return null!=t&&Ks(t,n,Rr)}var mh=ys((function(t,n,e){null!=n&&"function"!=typeof n.toString&&(n=gn.call(n)),t[n]=e}),wf(Af)),yh=ys((function(t,n,e){null!=n&&"function"!=typeof n.toString&&(n=gn.call(n)),fn.call(t,n)?t[n].push(e):t[n]=[e]}),zs),bh=bo(Br);function _h(t){return uc(t)?er(t):to(t)}function Ph(t){return uc(t)?er(t,!0):no(t)}function xh(t,n){var e={};return n=zs(n,3),Ar(t,(function(t,i,r){fr(e,n(t,i,r),t)})),e}function Ch(t,n){var e={};return n=zs(n,3),Ar(t,(function(t,i,r){fr(e,i,n(t,i,r))})),e}var jh=as((function(t,n,e){so(t,n,e)})),wh=as((function(t,n,e,i){so(t,n,e,i)})),Eh=Fs((function(t,n){var e={};if(null==t)return e;var i=!1;n=Se(n,(function(n){return n=zo(n,t),i||(i=n.length>1),n})),is(t,Ns(t),e),i&&(e=gr(e,p|d|g,Os));var r=n.length;while(r--)Mo(e,n[r]);return e}));function Sh(t,n){return Ah(t,Ul(zs(n)))}var Dh=Fs((function(t,n){return null==t?{}:co(t,n)}));function Ah(t,n){if(null==t)return{};var e=Se(Ns(t),(function(t){return[t]}));return n=zs(n),ho(t,e,(function(t,e){return n(t,e[0])}))}function Ih(t,n,e){n=zo(n,t);var i=-1,r=n.length;r||(r=1,t=o);while(++i<r){var s=null==t?o:t[Aa(n[i])];s===o&&(i=r,s=e),t=bc(s)?s.call(t):s}return t}function kh(t,n,e){return null==t?t:xo(t,n,e)}function Oh(t,n,e,i){return i="function"==typeof i?i:o,null==t?t:xo(t,n,e,i)}var Th=Ds(_h),Mh=Ds(Ph);function Lh(t,n,e){var i=sc(t),r=i||hc(t)||Nc(t);if(n=zs(n,4),null==e){var o=t&&t.constructor;e=r?i?new o:[]:xc(t)&&bc(o)?xi(Cn(t)):{}}return(r?Pe:Ar)(t,(function(t,i,r){return n(e,t,i,r)})),e}function Fh(t,n){return null==t||Mo(t,n)}function Rh(t,n,e){return null==t?t:Lo(t,n,Bo(e))}function Nh(t,n,e,i){return i="function"==typeof i?i:o,null==t?t:Lo(t,n,Bo(e),i)}function Uh(t){return null==t?[]:$e(t,_h(t))}function Gh(t){return null==t?[]:$e(t,Ph(t))}function Bh(t,n,e){return e===o&&(e=n,n=o),e!==o&&(e=Vc(e),e=e===e?e:0),n!==o&&(n=Vc(n),n=n===n?n:0),dr(Vc(t),n,e)}function zh(t,n,e){return n=Yc(n),e===o?(e=n,n=0):e=Yc(e),t=Vc(t),Nr(t,n,e)}function Wh(t,n,e){if(e&&"boolean"!=typeof e&&oa(t,n,e)&&(n=e=o),e===o&&("boolean"==typeof n?(e=n,n=o):"boolean"==typeof t&&(e=t,t=o)),t===o&&n===o?(t=0,n=1):(t=Yc(t),n===o?(n=t,t=0):n=Yc(n)),t>n){var i=t;t=n,n=i}if(e||t%1||n%1){var r=qn();return zn(t+r*(n-t+ie("1e-"+((r+"").length-1))),n)}return vo(t,n)}var Hh=fs((function(t,n,e){return n=n.toLowerCase(),t+(e?Yh(n):n)}));function Yh(t){return bf(Jc(t).toLowerCase())}function Xh(t){return t=Jc(t),t&&t.replace(Kt,ti).replace(Hn,"")}function qh(t,n,e){t=Jc(t),n=Oo(n);var i=t.length;e=e===o?i:dr(Xc(e),0,i);var r=e;return e-=n.length,e>=0&&t.slice(e,r)==n}function Vh(t){return t=Jc(t),t&&Dt.test(t)?t.replace(Et,ni):t}function $h(t){return t=Jc(t),t&&Ft.test(t)?t.replace(Lt,"\\$&"):t}var Zh=fs((function(t,n,e){return t+(e?"-":"")+n.toLowerCase()})),Jh=fs((function(t,n,e){return t+(e?" ":"")+n.toLowerCase()})),Kh=hs("toLowerCase");function Qh(t,n,e){t=Jc(t),n=Xc(n);var i=n?di(t):0;if(!n||i>=n)return t;var r=(n-i)/2;return Ps(Ln(r),e)+t+Ps(Mn(r),e)}function tf(t,n,e){t=Jc(t),n=Xc(n);var i=n?di(t):0;return n&&i<n?t+Ps(n-i,e):t}function nf(t,n,e){t=Jc(t),n=Xc(n);var i=n?di(t):0;return n&&i<n?Ps(n-i,e)+t:t}function ef(t,n,e){return e||null==n?n=0:n&&(n=+n),Xn(Jc(t).replace(Nt,""),n||0)}function rf(t,n,e){return n=(e?oa(t,n,e):n===o)?1:Xc(n),yo(Jc(t),n)}function of(){var t=arguments,n=Jc(t[0]);return t.length<3?n:n.replace(t[1],t[2])}var sf=fs((function(t,n,e){return t+(e?"_":"")+n.toLowerCase()}));function af(t,n,e){return e&&"number"!=typeof e&&oa(t,n,e)&&(n=e=o),e=e===o?U:e>>>0,e?(t=Jc(t),t&&("string"==typeof n||null!=n&&!Tc(n))&&(n=Oo(n),!n&&ri(t))?Ho(gi(t),0,e):t.split(n,e)):[]}var uf=fs((function(t,n,e){return t+(e?" ":"")+bf(n)}));function lf(t,n,e){return t=Jc(t),e=null==e?0:dr(Xc(e),0,t.length),n=Oo(n),t.slice(e,e+n.length)==n}function cf(t,n,e){var i=_i.templateSettings;e&&oa(t,n,e)&&(n=o),t=Jc(t),n=th({},n,i,Is);var r,s,a=th({},n.imports,i.imports,Is),u=_h(a),l=$e(a,u),c=0,h=n.interpolate||Qt,f="__p += '",p=rn((n.escape||Qt).source+"|"+h.source+"|"+(h===kt?Yt:Qt).source+"|"+(n.evaluate||Qt).source+"|$","g"),d="//# sourceURL="+(fn.call(n,"sourceURL")?(n.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Zn+"]")+"\n";t.replace(p,(function(n,e,i,o,a,u){return i||(i=o),f+=t.slice(c,u).replace(tn,ei),e&&(r=!0,f+="' +\n__e("+e+") +\n'"),a&&(s=!0,f+="';\n"+a+";\n__p += '"),i&&(f+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),c=u+n.length,n})),f+="';\n";var g=fn.call(n,"variable")&&n.variable;g||(f="with (obj) {\n"+f+"\n}\n"),f=(s?f.replace(xt,""):f).replace(Ct,"$1").replace(jt,"$1;"),f="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(r?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var v=Pf((function(){return Wt(u,d+"return "+f).apply(o,l)}));if(v.source=f,mc(v))throw v;return v}function hf(t){return Jc(t).toLowerCase()}function ff(t){return Jc(t).toUpperCase()}function pf(t,n,e){if(t=Jc(t),t&&(e||n===o))return t.replace(Rt,"");if(!t||!(n=Oo(n)))return t;var i=gi(t),r=gi(n),s=Je(i,r),a=Ke(i,r)+1;return Ho(i,s,a).join("")}function df(t,n,e){if(t=Jc(t),t&&(e||n===o))return t.replace(Ut,"");if(!t||!(n=Oo(n)))return t;var i=gi(t),r=Ke(i,gi(n))+1;return Ho(i,0,r).join("")}function gf(t,n,e){if(t=Jc(t),t&&(e||n===o))return t.replace(Nt,"");if(!t||!(n=Oo(n)))return t;var i=gi(t),r=Je(i,gi(n));return Ho(i,r).join("")}function vf(t,n){var e=D,i=A;if(xc(n)){var r="separator"in n?n.separator:r;e="length"in n?Xc(n.length):e,i="omission"in n?Oo(n.omission):i}t=Jc(t);var s=t.length;if(ri(t)){var a=gi(t);s=a.length}if(e>=s)return t;var u=e-di(i);if(u<1)return i;var l=a?Ho(a,0,u).join(""):t.slice(0,u);if(r===o)return l+i;if(a&&(u+=l.length-u),Tc(r)){if(t.slice(u).search(r)){var c,h=l;r.global||(r=rn(r.source,Jc(Xt.exec(r))+"g")),r.lastIndex=0;while(c=r.exec(h))var f=c.index;l=l.slice(0,f===o?u:f)}}else if(t.indexOf(Oo(r),u)!=u){var p=l.lastIndexOf(r);p>-1&&(l=l.slice(0,p))}return l+i}function mf(t){return t=Jc(t),t&&St.test(t)?t.replace(wt,vi):t}var yf=fs((function(t,n,e){return t+(e?" ":"")+n.toUpperCase()})),bf=hs("toUpperCase");function _f(t,n,e){return t=Jc(t),n=e?o:n,n===o?oi(t)?bi(t):Me(t):t.match(n)||[]}var Pf=bo((function(t,n){try{return be(t,o,n)}catch(e){return mc(e)?e:new r(e)}})),xf=Fs((function(t,n){return Pe(n,(function(n){n=Aa(n),fr(t,n,Il(t[n],t))})),t}));function Cf(t){var n=null==t?0:t.length,e=zs();return t=n?Se(t,(function(t){if("function"!=typeof t[1])throw new sn(l);return[e(t[0]),t[1]]})):[],bo((function(e){var i=-1;while(++i<n){var r=t[i];if(be(r[0],this,e))return be(r[1],this,e)}}))}function jf(t){return vr(gr(t,p))}function wf(t){return function(){return t}}function Ef(t,n){return null==t||t!==t?n:t}var Sf=vs(),Df=vs(!0);function Af(t){return t}function If(t){return Qr("function"==typeof t?t:gr(t,p))}function kf(t){return ro(gr(t,p))}function Of(t,n){return oo(t,gr(n,p))}var Tf=bo((function(t,n){return function(e){return Br(e,t,n)}})),Mf=bo((function(t,n){return function(e){return Br(t,e,n)}}));function Lf(t,n,e){var i=_h(n),r=kr(n,i);null!=e||xc(n)&&(r.length||!i.length)||(e=n,n=t,t=this,r=kr(n,_h(n)));var o=!(xc(e)&&"chain"in e)||!!e.chain,s=bc(t);return Pe(r,(function(e){var i=n[e];t[e]=i,s&&(t.prototype[e]=function(){var n=this.__chain__;if(o||n){var e=t(this.__wrapped__),r=e.__actions__=es(this.__actions__);return r.push({func:i,args:arguments,thisArg:t}),e.__chain__=n,e}return i.apply(t,De([this.value()],arguments))})})),t}function Ff(){return ae._===this&&(ae._=mn),this}function Rf(){}function Nf(t){return t=Xc(t),bo((function(n){return uo(n,t)}))}var Uf=_s(Se),Gf=_s(Ce),Bf=_s(ke);function zf(t){return sa(t)?Be(Aa(t)):fo(t)}function Wf(t){return function(n){return null==t?o:Or(t,n)}}var Hf=Cs(),Yf=Cs(!0);function Xf(){return[]}function qf(){return!1}function Vf(){return{}}function $f(){return""}function Zf(){return!0}function Jf(t,n){if(t=Xc(t),t<1||t>F)return[];var e=U,i=zn(t,U);n=zs(n),t-=U;var r=Xe(i,n);while(++e<t)n(e);return r}function Kf(t){return sc(t)?Se(t,Aa):Rc(t)?[t]:es(Da(Jc(t)))}function Qf(t){var n=++pn;return Jc(t)+n}var tp=bs((function(t,n){return t+n}),0),np=Es("ceil"),ep=bs((function(t,n){return t/n}),1),ip=Es("floor");function rp(t){return t&&t.length?Cr(t,Af,Lr):o}function op(t,n){return t&&t.length?Cr(t,zs(n,2),Lr):o}function sp(t){return Ge(t,Af)}function ap(t,n){return Ge(t,zs(n,2))}function up(t){return t&&t.length?Cr(t,Af,eo):o}function lp(t,n){return t&&t.length?Cr(t,zs(n,2),eo):o}var cp=bs((function(t,n){return t*n}),1),hp=Es("round"),fp=bs((function(t,n){return t-n}),0);function pp(t){return t&&t.length?Ye(t,Af):0}function dp(t,n){return t&&t.length?Ye(t,zs(n,2)):0}return _i.after=Sl,_i.ary=Dl,_i.assign=Kc,_i.assignIn=Qc,_i.assignInWith=th,_i.assignWith=nh,_i.at=eh,_i.before=Al,_i.bind=Il,_i.bindAll=xf,_i.bindKey=kl,_i.castArray=Zl,_i.chain=Wu,_i.chunk=Ta,_i.compact=Ma,_i.concat=La,_i.cond=Cf,_i.conforms=jf,_i.constant=wf,_i.countBy=tl,_i.create=ih,_i.curry=Ol,_i.curryRight=Tl,_i.debounce=Ml,_i.defaults=rh,_i.defaultsDeep=oh,_i.defer=Ll,_i.delay=Fl,_i.difference=Fa,_i.differenceBy=Ra,_i.differenceWith=Na,_i.drop=Ua,_i.dropRight=Ga,_i.dropRightWhile=Ba,_i.dropWhile=za,_i.fill=Wa,_i.filter=el,_i.flatMap=ol,_i.flatMapDeep=sl,_i.flatMapDepth=al,_i.flatten=Xa,_i.flattenDeep=qa,_i.flattenDepth=Va,_i.flip=Rl,_i.flow=Sf,_i.flowRight=Df,_i.fromPairs=$a,_i.functions=fh,_i.functionsIn=ph,_i.groupBy=cl,_i.initial=Ka,_i.intersection=Qa,_i.intersectionBy=tu,_i.intersectionWith=nu,_i.invert=mh,_i.invertBy=yh,_i.invokeMap=fl,_i.iteratee=If,_i.keyBy=pl,_i.keys=_h,_i.keysIn=Ph,_i.map=dl,_i.mapKeys=xh,_i.mapValues=Ch,_i.matches=kf,_i.matchesProperty=Of,_i.memoize=Nl,_i.merge=jh,_i.mergeWith=wh,_i.method=Tf,_i.methodOf=Mf,_i.mixin=Lf,_i.negate=Ul,_i.nthArg=Nf,_i.omit=Eh,_i.omitBy=Sh,_i.once=Gl,_i.orderBy=gl,_i.over=Uf,_i.overArgs=Bl,_i.overEvery=Gf,_i.overSome=Bf,_i.partial=zl,_i.partialRight=Wl,_i.partition=vl,_i.pick=Dh,_i.pickBy=Ah,_i.property=zf,_i.propertyOf=Wf,_i.pull=su,_i.pullAll=au,_i.pullAllBy=uu,_i.pullAllWith=lu,_i.pullAt=cu,_i.range=Hf,_i.rangeRight=Yf,_i.rearg=Hl,_i.reject=bl,_i.remove=hu,_i.rest=Yl,_i.reverse=fu,_i.sampleSize=Pl,_i.set=kh,_i.setWith=Oh,_i.shuffle=xl,_i.slice=pu,_i.sortBy=wl,_i.sortedUniq=_u,_i.sortedUniqBy=Pu,_i.split=af,_i.spread=Xl,_i.tail=xu,_i.take=Cu,_i.takeRight=ju,_i.takeRightWhile=wu,_i.takeWhile=Eu,_i.tap=Hu,_i.throttle=ql,_i.thru=Yu,_i.toArray=Hc,_i.toPairs=Th,_i.toPairsIn=Mh,_i.toPath=Kf,_i.toPlainObject=$c,_i.transform=Lh,_i.unary=Vl,_i.union=Su,_i.unionBy=Du,_i.unionWith=Au,_i.uniq=Iu,_i.uniqBy=ku,_i.uniqWith=Ou,_i.unset=Fh,_i.unzip=Tu,_i.unzipWith=Mu,_i.update=Rh,_i.updateWith=Nh,_i.values=Uh,_i.valuesIn=Gh,_i.without=Lu,_i.words=_f,_i.wrap=$l,_i.xor=Fu,_i.xorBy=Ru,_i.xorWith=Nu,_i.zip=Uu,_i.zipObject=Gu,_i.zipObjectDeep=Bu,_i.zipWith=zu,_i.entries=Th,_i.entriesIn=Mh,_i.extend=Qc,_i.extendWith=th,Lf(_i,_i),_i.add=tp,_i.attempt=Pf,_i.camelCase=Hh,_i.capitalize=Yh,_i.ceil=np,_i.clamp=Bh,_i.clone=Jl,_i.cloneDeep=Ql,_i.cloneDeepWith=tc,_i.cloneWith=Kl,_i.conformsTo=nc,_i.deburr=Xh,_i.defaultTo=Ef,_i.divide=ep,_i.endsWith=qh,_i.eq=ec,_i.escape=Vh,_i.escapeRegExp=$h,_i.every=nl,_i.find=il,_i.findIndex=Ha,_i.findKey=sh,_i.findLast=rl,_i.findLastIndex=Ya,_i.findLastKey=ah,_i.floor=ip,_i.forEach=ul,_i.forEachRight=ll,_i.forIn=uh,_i.forInRight=lh,_i.forOwn=ch,_i.forOwnRight=hh,_i.get=dh,_i.gt=ic,_i.gte=rc,_i.has=gh,_i.hasIn=vh,_i.head=Za,_i.identity=Af,_i.includes=hl,_i.indexOf=Ja,_i.inRange=zh,_i.invoke=bh,_i.isArguments=oc,_i.isArray=sc,_i.isArrayBuffer=ac,_i.isArrayLike=uc,_i.isArrayLikeObject=lc,_i.isBoolean=cc,_i.isBuffer=hc,_i.isDate=fc,_i.isElement=pc,_i.isEmpty=dc,_i.isEqual=gc,_i.isEqualWith=vc,_i.isError=mc,_i.isFinite=yc,_i.isFunction=bc,_i.isInteger=_c,_i.isLength=Pc,_i.isMap=jc,_i.isMatch=wc,_i.isMatchWith=Ec,_i.isNaN=Sc,_i.isNative=Dc,_i.isNil=Ic,_i.isNull=Ac,_i.isNumber=kc,_i.isObject=xc,_i.isObjectLike=Cc,_i.isPlainObject=Oc,_i.isRegExp=Tc,_i.isSafeInteger=Mc,_i.isSet=Lc,_i.isString=Fc,_i.isSymbol=Rc,_i.isTypedArray=Nc,_i.isUndefined=Uc,_i.isWeakMap=Gc,_i.isWeakSet=Bc,_i.join=eu,_i.kebabCase=Zh,_i.last=iu,_i.lastIndexOf=ru,_i.lowerCase=Jh,_i.lowerFirst=Kh,_i.lt=zc,_i.lte=Wc,_i.max=rp,_i.maxBy=op,_i.mean=sp,_i.meanBy=ap,_i.min=up,_i.minBy=lp,_i.stubArray=Xf,_i.stubFalse=qf,_i.stubObject=Vf,_i.stubString=$f,_i.stubTrue=Zf,_i.multiply=cp,_i.nth=ou,_i.noConflict=Ff,_i.noop=Rf,_i.now=El,_i.pad=Qh,_i.padEnd=tf,_i.padStart=nf,_i.parseInt=ef,_i.random=Wh,_i.reduce=ml,_i.reduceRight=yl,_i.repeat=rf,_i.replace=of,_i.result=Ih,_i.round=hp,_i.runInContext=t,_i.sample=_l,_i.size=Cl,_i.snakeCase=sf,_i.some=jl,_i.sortedIndex=du,_i.sortedIndexBy=gu,_i.sortedIndexOf=vu,_i.sortedLastIndex=mu,_i.sortedLastIndexBy=yu,_i.sortedLastIndexOf=bu,_i.startCase=uf,_i.startsWith=lf,_i.subtract=fp,_i.sum=pp,_i.sumBy=dp,_i.template=cf,_i.times=Jf,_i.toFinite=Yc,_i.toInteger=Xc,_i.toLength=qc,_i.toLower=hf,_i.toNumber=Vc,_i.toSafeInteger=Zc,_i.toString=Jc,_i.toUpper=ff,_i.trim=pf,_i.trimEnd=df,_i.trimStart=gf,_i.truncate=vf,_i.unescape=mf,_i.uniqueId=Qf,_i.upperCase=yf,_i.upperFirst=bf,_i.each=ul,_i.eachRight=ll,_i.first=Za,Lf(_i,function(){var t={};return Ar(_i,(function(n,e){fn.call(_i.prototype,e)||(t[e]=n)})),t}(),{chain:!1}),_i.VERSION=s,Pe(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(t){_i[t].placeholder=_i})),Pe(["drop","take"],(function(t,n){wi.prototype[t]=function(e){e=e===o?1:Bn(Xc(e),0);var i=this.__filtered__&&!n?new wi(this):this.clone();return i.__filtered__?i.__takeCount__=zn(e,i.__takeCount__):i.__views__.push({size:zn(e,U),type:t+(i.__dir__<0?"Right":"")}),i},wi.prototype[t+"Right"]=function(n){return this.reverse()[t](n).reverse()}})),Pe(["filter","map","takeWhile"],(function(t,n){var e=n+1,i=e==O||e==M;wi.prototype[t]=function(t){var n=this.clone();return n.__iteratees__.push({iteratee:zs(t,3),type:e}),n.__filtered__=n.__filtered__||i,n}})),Pe(["head","last"],(function(t,n){var e="take"+(n?"Right":"");wi.prototype[t]=function(){return this[e](1).value()[0]}})),Pe(["initial","tail"],(function(t,n){var e="drop"+(n?"":"Right");wi.prototype[t]=function(){return this.__filtered__?new wi(this):this[e](1)}})),wi.prototype.compact=function(){return this.filter(Af)},wi.prototype.find=function(t){return this.filter(t).head()},wi.prototype.findLast=function(t){return this.reverse().find(t)},wi.prototype.invokeMap=bo((function(t,n){return"function"==typeof t?new wi(this):this.map((function(e){return Br(e,t,n)}))})),wi.prototype.reject=function(t){return this.filter(Ul(zs(t)))},wi.prototype.slice=function(t,n){t=Xc(t);var e=this;return e.__filtered__&&(t>0||n<0)?new wi(e):(t<0?e=e.takeRight(-t):t&&(e=e.drop(t)),n!==o&&(n=Xc(n),e=n<0?e.dropRight(-n):e.take(n-t)),e)},wi.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},wi.prototype.toArray=function(){return this.take(U)},Ar(wi.prototype,(function(t,n){var e=/^(?:filter|find|map|reject)|While$/.test(n),i=/^(?:head|last)$/.test(n),r=_i[i?"take"+("last"==n?"Right":""):n],s=i||/^find/.test(n);r&&(_i.prototype[n]=function(){var n=this.__wrapped__,a=i?[1]:arguments,u=n instanceof wi,l=a[0],c=u||sc(n),h=function(t){var n=r.apply(_i,De([t],a));return i&&f?n[0]:n};c&&e&&"function"==typeof l&&1!=l.length&&(u=c=!1);var f=this.__chain__,p=!!this.__actions__.length,d=s&&!f,g=u&&!p;if(!s&&c){n=g?n:new wi(this);var v=t.apply(n,a);return v.__actions__.push({func:Yu,args:[h],thisArg:o}),new ji(v,f)}return d&&g?t.apply(this,a):(v=this.thru(h),d?i?v.value()[0]:v.value():v)})})),Pe(["pop","push","shift","sort","splice","unshift"],(function(t){var n=an[t],e=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",i=/^(?:pop|shift)$/.test(t);_i.prototype[t]=function(){var t=arguments;if(i&&!this.__chain__){var r=this.value();return n.apply(sc(r)?r:[],t)}return this[e]((function(e){return n.apply(sc(e)?e:[],t)}))}})),Ar(wi.prototype,(function(t,n){var e=_i[n];if(e){var i=e.name+"";fn.call(le,i)||(le[i]=[]),le[i].push({name:n,func:e})}})),le[ms(o,b).name]=[{name:"wrapper",func:o}],wi.prototype.clone=Ei,wi.prototype.reverse=Si,wi.prototype.value=Di,_i.prototype.at=Xu,_i.prototype.chain=qu,_i.prototype.commit=Vu,_i.prototype.next=$u,_i.prototype.plant=Ju,_i.prototype.reverse=Ku,_i.prototype.toJSON=_i.prototype.valueOf=_i.prototype.value=Qu,_i.prototype.first=_i.prototype.head,Dn&&(_i.prototype[Dn]=Zu),_i},Pi=_i();ae._=Pi,r=function(){return Pi}.call(n,e,n,i),r===o||(i.exports=r)}).call(this)}).call(this,e("c8ba"),e("62e4")(t))},"62e4":function(t,n){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},e193:function(t,n,e){(function(){"undefined"==typeof Math.sgn&&(Math.sgn=function(t){return 0==t?0:t>0?1:-1});var t={subtract:function(t,n){return{x:t.x-n.x,y:t.y-n.y}},dotProduct:function(t,n){return t.x*n.x+t.y*n.y},square:function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},scale:function(t,n){return{x:t.x*n,y:t.y*n}}},e=64,i=Math.pow(2,-e-1),r=function(n,e){for(var i=[],r=s(n,e),o=e.length-1,u=2*o-1,l=a(r,u,i,0),c=t.subtract(n,e[0]),f=t.square(c),p=0,d=0;d<l;d++){c=t.subtract(n,h(e,o,i[d],null,null));var g=t.square(c);g<f&&(f=g,p=i[d])}return c=t.subtract(n,e[o]),g=t.square(c),g<f&&(f=g,p=1),{location:p,distance:f}},o=function(t,n){var e=r(t,n);return{point:h(n,n.length-1,e.location,null,null),location:e.location}},s=function(n,e){for(var i=e.length-1,r=2*i-1,o=[],s=[],a=[],u=[],l=[[1,.6,.3,.1],[.4,.6,.6,.4],[.1,.3,.6,1]],c=0;c<=i;c++)o[c]=t.subtract(e[c],n);for(c=0;c<=i-1;c++)s[c]=t.subtract(e[c+1],e[c]),s[c]=t.scale(s[c],3);for(var h=0;h<=i-1;h++)for(var f=0;f<=i;f++)a[h]||(a[h]=[]),a[h][f]=t.dotProduct(s[h],o[f]);for(c=0;c<=r;c++)u[c]||(u[c]=[]),u[c].y=0,u[c].x=parseFloat(c)/r;for(var p=i,d=i-1,g=0;g<=p+d;g++){var v=Math.max(0,g-d),m=Math.min(g,p);for(c=v;c<=m;c++){var y=g-c;u[c+y].y+=a[y][c]*l[y][c]}}return u},a=function(t,n,i,r){var o,s,f=[],p=[],d=[],g=[];switch(u(t,n)){case 0:return 0;case 1:if(r>=e)return i[0]=(t[0].x+t[n].x)/2,1;if(l(t,n))return i[0]=c(t,n),1;break}h(t,n,.5,f,p),o=a(f,n,d,r+1),s=a(p,n,g,r+1);for(var v=0;v<o;v++)i[v]=d[v];for(v=0;v<s;v++)i[v+o]=g[v];return o+s},u=function(t,n){var e,i,r=0;e=i=Math.sgn(t[0].y);for(var o=1;o<=n;o++)e=Math.sgn(t[o].y),e!=i&&r++,i=e;return r},l=function(t,n){var e,r,o,s,a,u,l,c,h,f,p,d,g,v,m,y,b,_;u=t[0].y-t[n].y,l=t[n].x-t[0].x,c=t[0].x*t[n].y-t[n].x*t[0].y,b=_=0;for(var P=1;P<n;P++){var x=u*t[P].x+l*t[P].y+c;x>b?b=x:x<_&&(_=x)}return p=0,d=1,g=0,v=u,m=l,y=c-b,h=p*m-v*d,f=1/h,r=(d*y-m*g)*f,v=u,m=l,y=c-_,h=p*m-v*d,f=1/h,o=(d*y-m*g)*f,s=Math.min(r,o),a=Math.max(r,o),e=a-s,e<i?1:0},c=function(t,n){var e=1,i=0,r=t[n].x-t[0].x,o=t[n].y-t[0].y,s=t[0].x-0,a=t[0].y-0,u=r*i-o*e,l=1/u,c=(r*a-o*s)*l;return 0+e*c},h=function(t,n,e,i,r){for(var o=[[]],s=0;s<=n;s++)o[0][s]=t[s];for(var a=1;a<=n;a++)for(s=0;s<=n-a;s++)o[a]||(o[a]=[]),o[a][s]||(o[a][s]={}),o[a][s].x=(1-e)*o[a-1][s].x+e*o[a-1][s+1].x,o[a][s].y=(1-e)*o[a-1][s].y+e*o[a-1][s+1].y;if(null!=i)for(s=0;s<=n;s++)i[s]=o[s][0];if(null!=r)for(s=0;s<=n;s++)r[s]=o[n-s][s];return o[n][0]},f={},p=function(t){var n=f[t];if(!n){n=[];var e=function(){return function(n){return Math.pow(n,t)}},i=function(){return function(n){return Math.pow(1-n,t)}},r=function(t){return function(n){return t}},o=function(){return function(t){return t}},s=function(){return function(t){return 1-t}},a=function(t){return function(n){for(var e=1,i=0;i<t.length;i++)e*=t[i](n);return e}};n.push(new e);for(var u=1;u<t;u++){for(var l=[new r(t)],c=0;c<t-u;c++)l.push(new o);for(c=0;c<u;c++)l.push(new s);n.push(new a(l))}n.push(new i),f[t]=n}return n},d=function(t,n){for(var e=p(t.length-1),i=0,r=0,o=0;o<t.length;o++)i+=t[o].x*e[o](n),r+=t[o].y*e[o](n);return{x:i,y:r}},g=function(t,n){return Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2))},v=function(t){return t[0].x===t[1].x&&t[0].y===t[1].y},m=function(t,n,e){if(v(t))return{point:t[0],location:n};var i=d(t,n),r=0,o=n,s=e>0?1:-1,a=null;while(r<Math.abs(e))o+=.005*s,a=d(t,o),r+=g(a,i),i=a;return{point:a,location:o}},y=function(t){var n=(new Date).getTime();if(v(t))return 0;var e=d(t,0),i=0,r=0,o=1,s=null;while(r<1)r+=.005*o,s=d(t,r),i+=g(s,e),e=s;return console.log("length",(new Date).getTime()-n),i},b=function(t,n,e){return m(t,n,e).point},_=function(t,n,e){return m(t,n,e).location},P=function(t,n){var e=d(t,n),i=d(t.slice(0,t.length-1),n),r=i.y-e.y,o=i.x-e.x;return 0===r?1/0:Math.atan(r/o)},x=function(t,n,e){var i=m(t,n,e);return i.location>1&&(i.location=1),i.location<0&&(i.location=0),P(t,i.location)},C=function(t,n,e,i){i=null==i?0:i;var r=m(t,n,i),o=P(t,r.location),s=Math.atan(-1/o),a=e/2*Math.sin(s),u=e/2*Math.cos(s);return[{x:r.point.x+u,y:r.point.y+a},{x:r.point.x-u,y:r.point.y-a}]},j=function(t,n,e,i,r){var o=i-n,s=t-e,a=t*(n-i)+n*(e-t),u=D(r),l=[o*u[0][0]+s*u[1][0],o*u[0][1]+s*u[1][1],o*u[0][2]+s*u[1][2],o*u[0][3]+s*u[1][3]+a],c=I.apply(null,l),h=[];if(null!=c)for(var f=0;f<3;f++){var p,d=c[f],g=Math.pow(d,2),v=Math.pow(d,3),m=[u[0][0]*v+u[0][1]*g+u[0][2]*d+u[0][3],u[1][0]*v+u[1][1]*g+u[1][2]*d+u[1][3]];p=e-t!==0?(m[0]-t)/(e-t):(m[1]-n)/(i-n),d>=0&&d<=1&&p>=0&&p<=1&&h.push(m)}return h},w=function(t,n,e,i,r){var o=[];return o.push.apply(o,j(t,n,t+e,n,r)),o.push.apply(o,j(t+e,n,t+e,n+i,r)),o.push.apply(o,j(t+e,n+i,t,n+i,r)),o.push.apply(o,j(t,n+i,t,n,r)),o},E=function(t,n){var e=[];return e.push.apply(e,j(t.x,t.y,t.x+t.w,t.y,n)),e.push.apply(e,j(t.x+t.w,t.y,t.x+t.w,t.y+t.h,n)),e.push.apply(e,j(t.x+t.w,t.y+t.h,t.x,t.y+t.h,n)),e.push.apply(e,j(t.x,t.y+t.h,t.x,t.y,n)),e};function S(t,n){return[-t[0][n]+3*t[1][n]+-3*t[2][n]+t[3][n],3*t[0][n]-6*t[1][n]+3*t[2][n],-3*t[0][n]+3*t[1][n],t[0][n]]}function D(t){return[S(t,"x"),S(t,"y")]}function A(t){return t<0?-1:t>0?1:0}function I(t,n,e,i){var r,o,s=n/t,a=e/t,u=i/t,l=(3*a-Math.pow(s,2))/9,c=(9*s*a-27*u-2*Math.pow(s,3))/54,h=Math.pow(l,3)+Math.pow(c,2),f=[];if(h>=0)r=A(c+Math.sqrt(h))*Math.pow(Math.abs(c+Math.sqrt(h)),1/3),o=A(c-Math.sqrt(h))*Math.pow(Math.abs(c-Math.sqrt(h)),1/3),f[0]=-s/3+(r+o),f[1]=-s/3-(r+o)/2,f[2]=-s/3-(r+o)/2,0!==Math.abs(Math.sqrt(3)*(r-o)/2)&&(f[1]=-1,f[2]=-1);else{var p=Math.acos(c/Math.sqrt(-Math.pow(l,3)));f[0]=2*Math.sqrt(-l)*Math.cos(p/3)-s/3,f[1]=2*Math.sqrt(-l)*Math.cos((p+2*Math.PI)/3)-s/3,f[2]=2*Math.sqrt(-l)*Math.cos((p+4*Math.PI)/3)-s/3}for(var d=0;d<3;d++)(f[d]<0||f[d]>1)&&(f[d]=-1);return f}var k=this.jsBezier={distanceFromCurve:r,gradientAtPoint:P,gradientAtPointAlongCurveFrom:x,nearestPointOnCurve:o,pointOnCurve:d,pointAlongCurveFrom:b,perpendicularToCurveAt:C,locationAlongCurveFrom:_,getLength:y,lineIntersection:j,boxIntersection:w,boundingBoxIntersection:E,version:"0.9.0"};n.jsBezier=k}).call("undefined"!==typeof window?window:this),function(){"use strict";var t=this,e=t.Biltong={version:"0.4.0"};n.Biltong=e;var i=function(t){return"[object Array]"===Object.prototype.toString.call(t)},r=function(t,n,e){return t=i(t)?t:[t.x,t.y],n=i(n)?n:[n.x,n.y],e(t,n)},o=e.gradient=function(t,n){return r(t,n,(function(t,n){return n[0]==t[0]?n[1]>t[1]?1/0:-1/0:n[1]==t[1]?n[0]>t[0]?0:-0:(n[1]-t[1])/(n[0]-t[0])}))},s=(e.normal=function(t,n){return-1/o(t,n)},e.lineLength=function(t,n){return r(t,n,(function(t,n){return Math.sqrt(Math.pow(n[1]-t[1],2)+Math.pow(n[0]-t[0],2))}))},e.quadrant=function(t,n){return r(t,n,(function(t,n){return n[0]>t[0]||n[0]==t[0]?n[1]>t[1]?2:1:n[1]>t[1]?3:4}))}),a=(e.theta=function(t,n){return r(t,n,(function(t,n){var e=o(t,n),i=Math.atan(e),r=s(t,n);return 4!=r&&3!=r||(i+=Math.PI),i<0&&(i+=2*Math.PI),i}))},e.intersects=function(t,n){var e=t.x,i=t.x+t.w,r=t.y,o=t.y+t.h,s=n.x,a=n.x+n.w,u=n.y,l=n.y+n.h;return e<=s&&s<=i&&r<=u&&u<=o||e<=a&&a<=i&&r<=u&&u<=o||e<=s&&s<=i&&r<=l&&l<=o||e<=a&&s<=i&&r<=l&&l<=o||s<=e&&e<=a&&u<=r&&r<=l||s<=i&&i<=a&&u<=r&&r<=l||s<=e&&e<=a&&u<=o&&o<=l||s<=i&&e<=a&&u<=o&&o<=l},e.encloses=function(t,n,e){var i=t.x,r=t.x+t.w,o=t.y,s=t.y+t.h,a=n.x,u=n.x+n.w,l=n.y,c=n.y+n.h,h=function(t,n,i,r){return e?t<=n&&i>=r:t<n&&i>r};return h(i,a,r,u)&&h(o,l,s,c)},[null,[1,-1],[1,1],[-1,1],[-1,-1]]),u=[null,[-1,-1],[-1,1],[1,1],[1,-1]];e.pointOnLine=function(t,n,e){var i=o(t,n),r=s(t,n),l=e>0?a[r]:u[r],c=Math.atan(i),h=Math.abs(e*Math.sin(c))*l[1],f=Math.abs(e*Math.cos(c))*l[0];return{x:t.x+f,y:t.y+h}},e.perpendicularLineTo=function(t,n,e){var i=o(t,n),r=Math.atan(-1/i),s=e/2*Math.sin(r),a=e/2*Math.cos(r);return[{x:n.x+a,y:n.y+s},{x:n.x-a,y:n.y-s}]}}.call("undefined"!==typeof window?window:this),function(){"use strict";function t(t,n,e,i,r,o,s,a){return new Touch({target:n,identifier:F(),pageX:e,pageY:i,screenX:r,screenY:o,clientX:s||r,clientY:a||o})}function e(){var t=[];return Array.prototype.push.apply(t,arguments),t.item=function(t){return this[t]},t}function i(n,i,r,o,s,a,u,l){return e(t.apply(null,arguments))}var r=this,o=function(t,n,e){e=e||t.parentNode;for(var i=e.querySelectorAll(n),r=0;r<i.length;r++)if(i[r]===t)return!0;return!1},s=function(t){return"string"==typeof t||t.constructor===String?document.getElementById(t):t},a=function(t){return t.srcElement||t.target},u=function(t,n,e,i){if(i){if("undefined"!==typeof t.path&&t.path.indexOf)return{path:t.path,end:t.path.indexOf(e)};var r={path:[],end:-1},o=function(t){r.path.push(t),t===e?r.end=r.path.length-1:null!=t.parentNode&&o(t.parentNode)};return o(n),r}return{path:[n],end:1}},l=function(t,n){for(var e=0,i=t.length;e<i;e++)if(t[e]==n)break;e<t.length&&t.splice(e,1)},c=1,h=function(t,n,e){var i=c++;return t.__ta=t.__ta||{},t.__ta[n]=t.__ta[n]||{},t.__ta[n][i]=e,e.__tauid=i,i},f=function(t,n,e){if(t.__ta&&t.__ta[n]&&delete t.__ta[n][e.__tauid],e.__taExtra){for(var i=0;i<e.__taExtra.length;i++)M(t,e.__taExtra[i][0],e.__taExtra[i][1]);e.__taExtra.length=0}e.__taUnstore&&e.__taUnstore()},p=function(t,n,e,i){if(null==t)return e;var r=t.split(","),s=function(i){s.__tauid=e.__tauid;var l=a(i),c=l,h=u(i,l,n,null!=t);if(-1!=h.end)for(var f=0;f<h.end;f++){c=h.path[f];for(var p=0;p<r.length;p++)o(c,r[p],n)&&e.apply(c,arguments)}};return d(e,i,s),s},d=function(t,n,e){t.__taExtra=t.__taExtra||[],t.__taExtra.push([n,e])},g=function(t,n,e,i){if(P&&C[n]){var r=p(i,t,e,C[n]);T(t,C[n],r,e)}"focus"===n&&null==t.getAttribute("tabindex")&&t.setAttribute("tabindex","1"),T(t,n,p(i,t,e,n),e)},v=function(t,n,e,i){if(null==t.__taSmartClicks){var r=function(n){t.__tad=S(n)},o=function(n){t.__tau=S(n)},s=function(n){if(t.__tad&&t.__tau&&t.__tad[0]===t.__tau[0]&&t.__tad[1]===t.__tau[1])for(var e=0;e<t.__taSmartClicks.length;e++)t.__taSmartClicks[e].apply(a(n),[n])};g(t,"mousedown",r,i),g(t,"mouseup",o,i),g(t,"click",s,i),t.__taSmartClicks=[]}t.__taSmartClicks.push(e),e.__taUnstore=function(){l(t.__taSmartClicks,e)}},m={tap:{touches:1,taps:1},dbltap:{touches:1,taps:2},contextmenu:{touches:2,taps:1}},y=function(t,n){return function(e,i,r,s){if("contextmenu"==i&&x)g(e,i,r,s);else{if(null==e.__taTapHandler){var c=e.__taTapHandler={tap:[],dbltap:[],contextmenu:[],down:!1,taps:0,downSelectors:[]},h=function(i){for(var r=a(i),l=u(i,r,e,null!=s),h=!1,f=0;f<l.end;f++){if(h)return;r=l.path[f];for(var g=0;g<c.downSelectors.length;g++)if(null==c.downSelectors[g]||o(r,c.downSelectors[g],e)){c.down=!0,setTimeout(p,t),setTimeout(d,n),h=!0;break}}},f=function(t){if(c.down){var n,i,r=a(t);c.taps++;var s=O(t);for(var l in m)if(m.hasOwnProperty(l)){var h=m[l];if(h.touches===s&&(1===h.taps||h.taps===c.taps))for(var f=0;f<c[l].length;f++){i=u(t,r,e,null!=c[l][f][1]);for(var p=0;p<i.end;p++)if(n=i.path[p],null==c[l][f][1]||o(n,c[l][f][1],e)){c[l][f][0].apply(n,[t]);break}}}}},p=function(){c.down=!1},d=function(){c.taps=0};g(e,"mousedown",h),g(e,"mouseup",f)}e.__taTapHandler.downSelectors.push(s),e.__taTapHandler[i].push([r,s]),r.__taUnstore=function(){l(e.__taTapHandler[i],r)}}}},b=function(t,n,e,i){for(var r in e.__tamee[t])e.__tamee[t].hasOwnProperty(r)&&e.__tamee[t][r].apply(i,[n])},_=function(){var t=[];return function(n,e,i,r){if(!n.__tamee){n.__tamee={over:!1,mouseenter:[],mouseexit:[]};var s=function(e){var i=a(e);(null==r&&i==n&&!n.__tamee.over||o(i,r,n)&&(null==i.__tamee||!i.__tamee.over))&&(b("mouseenter",e,n,i),i.__tamee=i.__tamee||{},i.__tamee.over=!0,t.push(i))},u=function(e){for(var i=a(e),r=0;r<t.length;r++)i!=t[r]||o(e.relatedTarget||e.toElement,"*",i)||(i.__tamee.over=!1,t.splice(r,1),b("mouseexit",e,n,i))};T(n,"mouseover",p(r,n,s,"mouseover"),s),T(n,"mouseout",p(r,n,u,"mouseout"),u)}i.__taUnstore=function(){delete n.__tamee[e][i.__tauid]},h(n,e,i),n.__tamee[e][i.__tauid]=i}},P="ontouchstart"in document.documentElement||navigator.maxTouchPoints,x="onmousedown"in document.documentElement,C={mousedown:"touchstart",mouseup:"touchend",mousemove:"touchmove"},j=function(){var t=-1;if("Microsoft Internet Explorer"==navigator.appName){var n=navigator.userAgent,e=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");null!=e.exec(n)&&(t=parseFloat(RegExp.$1))}return t}(),w=j>-1&&j<9,E=function(t,n){if(null==t)return[0,0];var e=k(t),i=I(e,0);return[i[n+"X"],i[n+"Y"]]},S=function(t){return null==t?[0,0]:w?[t.clientX+document.documentElement.scrollLeft,t.clientY+document.documentElement.scrollTop]:E(t,"page")},D=function(t){return E(t,"screen")},A=function(t){return E(t,"client")},I=function(t,n){return t.item?t.item(n):t[n]},k=function(t){return t.touches&&t.touches.length>0?t.touches:t.changedTouches&&t.changedTouches.length>0?t.changedTouches:t.targetTouches&&t.targetTouches.length>0?t.targetTouches:[t]},O=function(t){return k(t).length},T=function(t,n,e,i){if(h(t,n,e),i.__tauid=e.__tauid,t.addEventListener)t.addEventListener(n,e,!1);else if(t.attachEvent){var r=n+e.__tauid;t["e"+r]=e,t[r]=function(){t["e"+r]&&t["e"+r](window.event)},t.attachEvent("on"+n,t[r])}},M=function(t,n,e){null!=e&&L(t,(function(){var i=s(this);if(f(i,n,e),null!=e.__tauid)if(i.removeEventListener)i.removeEventListener(n,e,!1),P&&C[n]&&i.removeEventListener(C[n],e,!1);else if(this.detachEvent){var r=n+e.__tauid;i[r]&&i.detachEvent("on"+n,i[r]),i[r]=null,i["e"+r]=null}e.__taTouchProxy&&M(t,e.__taTouchProxy[1],e.__taTouchProxy[0])}))},L=function(t,n){if(null!=t){t="undefined"!==typeof Window&&"unknown"!==typeof t.top&&t==t.top?[t]:"string"!==typeof t&&null==t.tagName&&null!=t.length?t:"string"===typeof t?document.querySelectorAll(t):[t];for(var e=0;e<t.length;e++)n.apply(t[e])}},F=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var n=16*Math.random()|0,e="x"==t?n:3&n|8;return e.toString(16)}))};r.Mottle=function(t){t=t||{};var n=t.clickThreshold||250,e=t.dblClickThreshold||450,r=new _,o=new y(n,e),a=t.smartClicks,u=function(t,n,e,i){null!=e&&L(t,(function(){var t=s(this);a&&"click"===n?v(t,n,e,i):"tap"===n||"dbltap"===n||"contextmenu"===n?o(t,n,e,i):"mouseenter"===n||"mouseexit"==n?r(t,n,e,i):g(t,n,e,i)}))};this.remove=function(t){return L(t,(function(){var t=s(this);if(t.__ta)for(var n in t.__ta)if(t.__ta.hasOwnProperty(n))for(var e in t.__ta[n])t.__ta[n].hasOwnProperty(e)&&M(t,n,t.__ta[n][e]);t.parentNode&&t.parentNode.removeChild(t)})),this},this.on=function(t,n,e,i){var r=arguments[0],o=4==arguments.length?arguments[2]:null,s=arguments[1],a=arguments[arguments.length-1];return u(r,s,a,o),this},this.off=function(t,n,e){return M(t,n,e),this},this.trigger=function(t,n,e,r){var o=x&&("undefined"===typeof MouseEvent||null==e||e.constructor===MouseEvent),a=P&&!x&&C[n]?C[n]:n,u=!(P&&!x&&C[n]),l=S(e),c=D(e),h=A(e);return L(t,(function(){var t,f=s(this);e=e||{screenX:c[0],screenY:c[1],clientX:h[0],clientY:h[1]};var p=function(t){r&&(t.payload=r)},d={TouchEvent:function(t){var n=i(window,f,0,l[0],l[1],c[0],c[1],h[0],h[1]),e=t.initTouchEvent||t.initEvent;e(a,!0,!0,window,null,c[0],c[1],h[0],h[1],!1,!1,!1,!1,n,n,n,1,0)},MouseEvents:function(t){t.initMouseEvent(a,!0,!0,window,0,c[0],c[1],h[0],h[1],!1,!1,!1,!1,1,f)}};if(document.createEvent){var g=!u&&!o&&P&&C[n],v=g?"TouchEvent":"MouseEvents";t=document.createEvent(v),d[v](t),p(t),f.dispatchEvent(t)}else document.createEventObject&&(t=document.createEventObject(),t.eventType=t.eventName=a,t.screenX=c[0],t.screenY=c[1],t.clientX=h[0],t.clientY=h[1],p(t),f.fireEvent("on"+a,t))})),this}},r.Mottle.consume=function(t,n){t.stopPropagation?t.stopPropagation():t.returnValue=!1,!n&&t.preventDefault&&t.preventDefault()},r.Mottle.pageLocation=S,r.Mottle.setForceTouchEvents=function(t){P=t},r.Mottle.setForceMouseEvents=function(t){x=t},r.Mottle.version="0.8.0",n.Mottle=r.Mottle}.call("undefined"===typeof window?this:window),function(){"use strict";var t=this,e=function(t,n,e){return-1===t.indexOf(n)&&(e?t.unshift(n):t.push(n),!0)},i=function(t,n){var e=t.indexOf(n);-1!==e&&t.splice(e,1)},r=function(t,n){for(var e=[],i=0;i<t.length;i++)-1===n.indexOf(t[i])&&e.push(t[i]);return e},o=function(t){return null!=t&&("string"===typeof t||t.constructor===String)},s=function(t){var n=t.getBoundingClientRect(),e=document.body,i=document.documentElement,r=window.pageYOffset||i.scrollTop||e.scrollTop,o=window.pageXOffset||i.scrollLeft||e.scrollLeft,s=i.clientTop||e.clientTop||0,a=i.clientLeft||e.clientLeft||0,u=n.top+r-s,l=n.left+o-a;return{top:Math.round(u),left:Math.round(l)}},a=function(t,n,e){e=e||t.parentNode;for(var i=e.querySelectorAll(n),r=0;r<i.length;r++)if(i[r]===t)return!0;return!1},u=function(t,n,e){if(a(n,e,t))return n;var i=n.parentNode;while(null!=i&&i!==t){if(a(i,e,t))return i;i=i.parentNode}},l=function(t,n,e){for(var i=null,r=n.getAttribute("katavorio-draggable"),o=null!=r?"[katavorio-draggable='"+r+"'] ":"",s=0;s<t.length;s++)if(i=u(n,e,o+t[s].selector),null!=i){if(t[s].filter){var l=a(e,t[s].filter,i),c=!0===t[s].filterExclude;if(c&&!l||l)return null}return[t[s],i]}return null},c=function(){var t=-1;if("Microsoft Internet Explorer"===navigator.appName){var n=navigator.userAgent,e=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");null!=e.exec(n)&&(t=parseFloat(RegExp.$1))}return t}(),h=10,f=10,p=c>-1&&c<9,d=9===c,g=function(t){if(p)return[t.clientX+document.documentElement.scrollLeft,t.clientY+document.documentElement.scrollTop];var n=m(t),e=v(n,0);return d?[e.pageX||e.clientX,e.pageY||e.clientY]:[e.pageX,e.pageY]},v=function(t,n){return t.item?t.item(n):t[n]},m=function(t){return t.touches&&t.touches.length>0?t.touches:t.changedTouches&&t.changedTouches.length>0?t.changedTouches:t.targetTouches&&t.targetTouches.length>0?t.targetTouches:[t]},y={delegatedDraggable:"katavorio-delegated-draggable",draggable:"katavorio-draggable",droppable:"katavorio-droppable",drag:"katavorio-drag",selected:"katavorio-drag-selected",active:"katavorio-drag-active",hover:"katavorio-drag-hover",noSelect:"katavorio-drag-no-select",ghostProxy:"katavorio-ghost-proxy",clonedDrag:"katavorio-clone-drag"},b="katavorio-drag-scope",_=["stop","start","drag","drop","over","out","beforeStart"],P=function(){},x=function(){return!0},C=function(t,n,e){for(var i=0;i<t.length;i++)t[i]!=e&&n(t[i])},j=function(t,n,e,i){C(t,(function(t){t.setActive(n),n&&t.updatePosition(),e&&t.setHover(i,n)}))},w=function(t,n){if(null!=t){t=o(t)||null!=t.tagName||null==t.length?[t]:t;for(var e=0;e<t.length;e++)n.apply(t[e],[t[e]])}},E=function(t){t.stopPropagation?(t.stopPropagation(),t.preventDefault()):t.returnValue=!1},S="input,textarea,select,button,option",D=function(t,n,e){var i=t.srcElement||t.target;return!a(i,e.getInputFilterSelector(),n)},A=function(t,n,e,i){this.params=n||{},this.el=t,this.params.addClass(this.el,this._class),this.uuid=M();var r=!0;return this.setEnabled=function(t){r=t},this.isEnabled=function(){return r},this.toggleEnabled=function(){r=!r},this.setScope=function(t){this.scopes=t?t.split(/\s+/):[i]},this.addScope=function(t){var n={};for(var e in w(this.scopes,(function(t){n[t]=!0})),w(t?t.split(/\s+/):[],(function(t){n[t]=!0})),this.scopes=[],n)this.scopes.push(e)},this.removeScope=function(t){var n={};for(var e in w(this.scopes,(function(t){n[t]=!0})),w(t?t.split(/\s+/):[],(function(t){delete n[t]})),this.scopes=[],n)this.scopes.push(e)},this.toggleScope=function(t){var n={};for(var e in w(this.scopes,(function(t){n[t]=!0})),w(t?t.split(/\s+/):[],(function(t){n[t]?delete n[t]:n[t]=!0})),this.scopes=[],n)this.scopes.push(e)},this.setScope(n.scope),this.k=n.katavorio,n.katavorio},I=function(){return!0},k=function(){return!1},O=function(t,n,e,i){this._class=e.draggable;var r=A.apply(this,arguments);this.rightButtonCanDrag=this.params.rightButtonCanDrag;var u,c,p,d,v,m,b=[0,0],_=null,P=null,C=[0,0],w=!1,S=[0,0],O=!1!==this.params.consumeStartEvent,T=this.el,F=this.params.clone,R=(this.params.scroll,!1!==n.multipleDrop),N=!1,U=null,G=[],B=null,z=n.ghostProxyParent;if(u=!0===n.ghostProxy?I:n.ghostProxy&&"function"===typeof n.ghostProxy?n.ghostProxy:function(t,n){return!(!B||!B.useGhostProxy)&&B.useGhostProxy(t,n)},c=n.makeGhostProxy?n.makeGhostProxy:function(t){return B&&B.makeGhostProxy?B.makeGhostProxy(t):t.cloneNode(!0)},n.selector){var W=t.getAttribute("katavorio-draggable");null==W&&(W=""+(new Date).getTime(),t.setAttribute("katavorio-draggable",W)),G.push(n)}var H,Y=n.snapThreshold,X=function(t,n,e,i,r){var o=Math.floor(t[0]/n),s=n*o,a=s+n,u=Math.abs(t[0]-s)<=i?s:Math.abs(a-t[0])<=i?a:t[0],l=Math.floor(t[1]/e),c=e*l,h=c+e,f=Math.abs(t[1]-c)<=r?c:Math.abs(h-t[1])<=r?h:t[1];return[u,f]};this.posses=[],this.posseRoles={},this.toGrid=function(t){if(null==this.params.grid)return t;var n=this.params.grid?this.params.grid[0]/2:Y||h/2,e=this.params.grid?this.params.grid[1]/2:Y||f/2;return X(t,this.params.grid[0],this.params.grid[1],n,e)},this.snap=function(t,n){if(null!=T){t=t||(this.params.grid?this.params.grid[0]:h),n=n||(this.params.grid?this.params.grid[1]:f);var e=this.params.getPosition(T),i=this.params.grid?this.params.grid[0]/2:Y,r=this.params.grid?this.params.grid[1]/2:Y,o=X(e,t,n,i,r);return this.params.setPosition(T,o),o}},this.setUseGhostProxy=function(t){u=t?I:k};var q=function(t){return!1===n.allowNegative?[Math.max(0,t[0]),Math.max(0,t[1])]:t},V=function(t){H="function"===typeof t?t:t?function(t,n,e,i){return q([Math.max(0,Math.min(e.w-i[0],t[0])),Math.max(0,Math.min(e.h-i[1],t[1]))])}.bind(this):function(t){return q(t)}}.bind(this);V("function"===typeof this.params.constrain?this.params.constrain:this.params.constrain||this.params.containment),this.setConstrain=function(t){V(t)};var $,Z=function(t,n,e,i){return null!=B&&B.constrain&&"function"===typeof B.constrain?B.constrain(t,n,e,i):H(t,n,e,i)};this.setRevert=function(t){$=t},this.params.revert&&($=this.params.revert);var J=function(t){return"function"===typeof t?(t._katavorioId=M(),t._katavorioId):t},K={},Q=function(t){for(var n in K){var e=K[n],i=e[0](t);if(e[1]&&(i=!i),!i)return!1}return!0},tt=this.setFilter=function(n,e){if(n){var i=J(n);K[i]=[function(e){var i,r=e.srcElement||e.target;return o(n)?i=a(r,n,t):"function"===typeof n&&(i=n(e,t)),i},!1!==e]}};this.addFilter=tt,this.removeFilter=function(t){var n="function"===typeof t?t._katavorioId:t;delete K[n]};this.clearAllFilters=function(){K={}},this.canDrag=this.params.canDrag||x;var nt,et=[],it=[];this.addSelector=function(t){t.selector&&G.push(t)},this.downListener=function(t){if(!t.defaultPrevented){var n=this.rightButtonCanDrag||3!==t.which&&2!==t.button;if(n&&this.isEnabled()&&this.canDrag()){var i=Q(t)&&D(t,this.el,this.k);if(i){if(B=null,U=null,G.length>0){var o=l(G,this.el,t.target||t.srcElement);if(null!=o&&(B=o[0],U=o[1]),null==U)return}else U=this.el;if(F)if(T=U.cloneNode(!0),this.params.addClass(T,y.clonedDrag),T.setAttribute("id",null),T.style.position="absolute",null!=this.params.parent){var a=this.params.getPosition(this.el);T.style.left=a[0]+"px",T.style.top=a[1]+"px",this.params.parent.appendChild(T)}else{var u=s(U);T.style.left=u.left+"px",T.style.top=u.top+"px",document.body.appendChild(T)}else T=U;O&&E(t),b=g(t),T&&T.parentNode&&(S=[T.parentNode.scrollLeft,T.parentNode.scrollTop]),this.params.bind(document,"mousemove",this.moveListener),this.params.bind(document,"mouseup",this.upListener),r.markSelection(this),r.markPosses(this),this.params.addClass(document.body,e.noSelect),st("beforeStart",{el:this.el,pos:_,e:t,drag:this})}else this.params.consumeFilteredEvents&&E(t)}}}.bind(this),this.moveListener=function(t){if(b){if(!w){var n=st("start",{el:this.el,pos:_,e:t,drag:this});if(!1!==n){if(!b)return;this.mark(!0),w=!0}else this.abort()}if(b){it.length=0;var e=g(t),i=e[0]-b[0],o=e[1]-b[1],s=this.params.ignoreZoom?1:r.getZoom();T&&T.parentNode&&(i+=T.parentNode.scrollLeft-S[0],o+=T.parentNode.scrollTop-S[1]),i/=s,o/=s,this.moveBy(i,o,t),r.updateSelection(i,o,this),r.updatePosses(i,o,this)}}}.bind(this),this.upListener=function(t){b&&(b=null,this.params.unbind(document,"mousemove",this.moveListener),this.params.unbind(document,"mouseup",this.upListener),this.params.removeClass(document.body,e.noSelect),this.unmark(t),r.unmarkSelection(this,t),r.unmarkPosses(this,t),this.stop(t),r.notifyPosseDragStop(this,t),w=!1,it.length=0,F?(T&&T.parentNode&&T.parentNode.removeChild(T),T=null):$&&!0===$(T,this.params.getPosition(T))&&(this.params.setPosition(T,_),st("revert",T)))}.bind(this),this.getFilters=function(){return K},this.abort=function(){null!=b&&this.upListener()},this.getDragElement=function(t){return t?U||this.el:T||this.el};var rt={start:[],drag:[],stop:[],over:[],out:[],beforeStart:[],revert:[]};n.events.start&&rt.start.push(n.events.start),n.events.beforeStart&&rt.beforeStart.push(n.events.beforeStart),n.events.stop&&rt.stop.push(n.events.stop),n.events.drag&&rt.drag.push(n.events.drag),n.events.revert&&rt.revert.push(n.events.revert),this.on=function(t,n){rt[t]&&rt[t].push(n)},this.off=function(t,n){if(rt[t]){for(var e=[],i=0;i<rt[t].length;i++)rt[t][i]!==n&&e.push(rt[t][i]);rt[t]=e}};var ot,st=function(t,n){var e=null;if(B&&B[t])e=B[t](n);else if(rt[t])for(var i=0;i<rt[t].length;i++)try{var r=rt[t][i](n);null!=r&&(e=r)}catch(o){}return e};this.notifyStart=function(t){st("start",{el:this.el,pos:this.params.getPosition(T),e:t,drag:this})},this.stop=function(t,n){if(n||w){var e=[],i=r.getSelection(),o=this.params.getPosition(T);if(i.length>0)for(var s=0;s<i.length;s++){var a=this.params.getPosition(i[s].el);e.push([i[s].el,{left:a[0],top:a[1]},i[s]])}else e.push([T,{left:o[0],top:o[1]},this]);st("stop",{el:T,pos:ot||o,finalPos:o,e:t,drag:this,selection:e})}},this.mark=function(t){var n;_=this.params.getPosition(T),P=this.params.getPosition(T,!0),C=[P[0]-_[0],P[1]-_[1]],this.size=this.params.getSize(T),et=r.getMatchingDroppables(this),j(et,!0,!1,this),this.params.addClass(T,this.params.dragClass||e.drag),n=this.params.getConstrainingRectangle?this.params.getConstrainingRectangle(T):this.params.getSize(T.parentNode),nt={w:n[0],h:n[1]},v=0,m=0,t&&r.notifySelectionDragStart(this)},this.unmark=function(t,i){if(j(et,!1,!0,this),N&&u(U,T)?(ot=[T.offsetLeft-v,T.offsetTop-m],T.parentNode.removeChild(T),T=U):ot=null,this.params.removeClass(T,this.params.dragClass||e.drag),et.length=0,N=!1,!i){it.length>0&&ot&&n.setPosition(U,ot),it.sort(L);for(var r=0;r<it.length;r++){var o=it[r].drop(this,t);if(!0===o)break}}},this.moveBy=function(t,e,i){it.length=0;var r=this.toGrid([_[0]+t,_[1]+e]),o=Z(r,T,nt,this.size);if(u(this.el,T))if(r[0]!==o[0]||r[1]!==o[1]){if(!N){var s=c(U);n.addClass(s,y.ghostProxy),z?(z.appendChild(s),p=n.getPosition(U.parentNode,!0),d=n.getPosition(n.ghostProxyParent,!0),v=p[0]-d[0],m=p[1]-d[1]):U.parentNode.appendChild(s),T=s,N=!0}o=r}else N&&(T.parentNode.removeChild(T),T=U,N=!1,p=null,d=null,v=0,m=0);var a={x:o[0],y:o[1],w:this.size[0],h:this.size[1]},l={x:a.x+C[0],y:a.y+C[1],w:a.w,h:a.h},h=null;this.params.setPosition(T,[o[0]+v,o[1]+m]);for(var f=0;f<et.length;f++){var g={x:et[f].pagePosition[0],y:et[f].pagePosition[1],w:et[f].size[0],h:et[f].size[1]};this.params.intersects(l,g)&&(R||null==h||h===et[f].el)&&et[f].canDrop(this)?(h||(h=et[f].el),it.push(et[f]),et[f].setHover(this,!0,i)):et[f].isHover()&&et[f].setHover(this,!1,i)}st("drag",{el:this.el,pos:o,e:i,drag:this})},this.destroy=function(){this.params.unbind(this.el,"mousedown",this.downListener),this.params.unbind(document,"mousemove",this.moveListener),this.params.unbind(document,"mouseup",this.upListener),this.downListener=null,this.upListener=null,this.moveListener=null},this.params.bind(this.el,"mousedown",this.downListener),this.params.handle?tt(this.params.handle,!1):tt(this.params.filter,this.params.filterExclude)},T=function(t,n,e,i){this._class=e.droppable,this.params=n||{},this.rank=n.rank||0,this._activeClass=this.params.activeClass||e.active,this._hoverClass=this.params.hoverClass||e.hover,A.apply(this,arguments);var r=!1;this.allowLoopback=!1!==this.params.allowLoopback,this.setActive=function(t){this.params[t?"addClass":"removeClass"](this.el,this._activeClass)},this.updatePosition=function(){this.position=this.params.getPosition(this.el),this.pagePosition=this.params.getPosition(this.el,!0),this.size=this.params.getSize(this.el)},this.canDrop=this.params.canDrop||function(t){return!0},this.isHover=function(){return r},this.setHover=function(t,n,e){(n||null==this.el._katavorioDragHover||this.el._katavorioDragHover===t.el._katavorio)&&(this.params[n?"addClass":"removeClass"](this.el,this._hoverClass),this.el._katavorioDragHover=n?t.el._katavorio:null,r!==n&&this.params.events[n?"over":"out"]({el:this.el,e:e,drag:t,drop:this}),r=n)},this.drop=function(t,n){return this.params.events["drop"]({drag:t,e:n,drop:this})},this.destroy=function(){this._class=null,this._activeClass=null,this._hoverClass=null,r=null}},M=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var n=16*Math.random()|0,e="x"===t?n:3&n|8;return e.toString(16)}))},L=function(t,n){return t.rank<n.rank?1:t.rank>n.rank?-1:0},F=function(t){return null==t?null:(t="string"===typeof t||t.constructor===String?document.getElementById(t):t,null==t?null:(t._katavorio=t._katavorio||M(),t))};t.Katavorio=function(t){var n=[],s={};this._dragsByScope={},this._dropsByScope={};var a=1,u=function(t,n){w(t,(function(t){for(var e=0;e<t.scopes.length;e++)n[t.scopes[e]]=n[t.scopes[e]]||[],n[t.scopes[e]].push(t)}))},l=function(n,e){var i=0;return w(n,(function(n){for(var r=0;r<n.scopes.length;r++)if(e[n.scopes[r]]){var o=t.indexOf(e[n.scopes[r]],n);-1!==o&&(e[n.scopes[r]].splice(o,1),i++)}})),i>0},c=(this.getMatchingDroppables=function(t){for(var n=[],e={},i=0;i<t.scopes.length;i++){var r=this._dropsByScope[t.scopes[i]];if(r)for(var o=0;o<r.length;o++)!r[o].canDrop(t)||e[r[o].uuid]||!r[o].allowLoopback&&r[o].el===t.el||(e[r[o].uuid]=!0,n.push(r[o]))}return n.sort(L),n},function(n){n=n||{};var e,i={events:{}};for(e in t)i[e]=t[e];for(e in n)i[e]=n[e];for(e=0;e<_.length;e++)i.events[_[e]]=n[_[e]]||P;return i.katavorio=this,i}.bind(this)),h=function(t,n){for(var e=0;e<_.length;e++)n[_[e]]&&t.on(_[e],n[_[e]])}.bind(this),f={},p=t.css||{},d=t.scope||b;for(var g in y)f[g]=y[g];for(var g in p)f[g]=p[g];var v=t.inputFilterSelector||S;this.getInputFilterSelector=function(){return v},this.setInputFilterSelector=function(t){return v=t,this},this.draggable=function(n,e){var i=[];return w(n,function(n){if(n=F(n),null!=n)if(null==n._katavorioDrag){var r=c(e);n._katavorioDrag=new O(n,r,f,d),u(n._katavorioDrag,this._dragsByScope),i.push(n._katavorioDrag),t.addClass(n,r.selector?f.delegatedDraggable:f.draggable)}else h(n._katavorioDrag,e)}.bind(this)),i},this.droppable=function(n,e){var i=[];return w(n,function(n){if(n=F(n),null!=n){var r=new T(n,c(e),f,d);n._katavorioDrop=n._katavorioDrop||[],n._katavorioDrop.push(r),u(r,this._dropsByScope),i.push(r),t.addClass(n,f.droppable)}}.bind(this)),i},this.select=function(e){return w(e,(function(){var e=F(this);e&&e._katavorioDrag&&(s[e._katavorio]||(n.push(e._katavorioDrag),s[e._katavorio]=[e,n.length-1],t.addClass(e,f.selected)))})),this},this.deselect=function(e){return w(e,(function(){var e=F(this);if(e&&e._katavorio){var i=s[e._katavorio];if(i){for(var r=[],o=0;o<n.length;o++)n[o].el!==e&&r.push(n[o]);n=r,delete s[e._katavorio],t.removeClass(e,f.selected)}}})),this},this.deselectAll=function(){for(var e in s){var i=s[e];t.removeClass(i[0],f.selected)}n.length=0,s={}},this.markSelection=function(t){C(n,(function(t){t.mark()}),t)},this.markPosses=function(t){t.posses&&w(t.posses,(function(n){t.posseRoles[n]&&D[n]&&C(D[n].members,(function(t){t.mark()}),t)}))},this.unmarkSelection=function(t,e){C(n,(function(t){t.unmark(e)}),t)},this.unmarkPosses=function(t,n){t.posses&&w(t.posses,(function(e){t.posseRoles[e]&&D[e]&&C(D[e].members,(function(t){t.unmark(n,!0)}),t)}))},this.getSelection=function(){return n.slice(0)},this.updateSelection=function(t,e,i){C(n,(function(n){n.moveBy(t,e)}),i)};var m=function(t,n){n.posses&&w(n.posses,(function(e){n.posseRoles[e]&&D[e]&&C(D[e].members,(function(n){t(n)}),n)}))};this.updatePosses=function(t,n,e){m((function(e){e.moveBy(t,n)}),e)},this.notifyPosseDragStop=function(t,n){m((function(t){t.stop(n,!0)}),t)},this.notifySelectionDragStop=function(t,e){C(n,(function(t){t.stop(e,!0)}),t)},this.notifySelectionDragStart=function(t,e){C(n,(function(t){t.notifyStart(e)}),t)},this.setZoom=function(t){a=t},this.getZoom=function(){return a};var x=function(t,n,e,i){w(t,(function(t){l(t,e),t[i](n),u(t,e)}))};w(["set","add","remove","toggle"],function(t){this[t+"Scope"]=function(n,e){x(n._katavorioDrag,e,this._dragsByScope,t+"Scope"),x(n._katavorioDrop,e,this._dropsByScope,t+"Scope")}.bind(this),this[t+"DragScope"]=function(n,e){x(n.constructor===O?n:n._katavorioDrag,e,this._dragsByScope,t+"Scope")}.bind(this),this[t+"DropScope"]=function(n,e){x(n.constructor===T?n:n._katavorioDrop,e,this._dropsByScope,t+"Scope")}.bind(this)}.bind(this)),this.snapToGrid=function(t,n){for(var e in this._dragsByScope)C(this._dragsByScope[e],(function(e){e.snap(t,n)}))},this.getDragsForScope=function(t){return this._dragsByScope[t]},this.getDropsForScope=function(t){return this._dropsByScope[t]};var j=function(t,e,i){if(t=F(t),t[e]){var r=n.indexOf(t[e]);r>=0&&n.splice(r,1),l(t[e],i)&&w(t[e],(function(t){t.destroy()})),delete t[e]}},E=function(t,n,e,i){t=F(t),t[n]&&t[n].off(e,i)};this.elementRemoved=function(t){t["_katavorioDrag"]&&this.destroyDraggable(t),t["_katavorioDrop"]&&this.destroyDroppable(t)},this.destroyDraggable=function(t,n,e){1===arguments.length?j(t,"_katavorioDrag",this._dragsByScope):E(t,"_katavorioDrag",n,e)},this.destroyDroppable=function(t,n,e){1===arguments.length?j(t,"_katavorioDrop",this._dropsByScope):E(t,"_katavorioDrop",n,e)},this.reset=function(){this._dragsByScope={},this._dropsByScope={},n=[],s={},D={}};var D={},A=function(t,n,i){var r=o(n)?n:n.id,s=!!o(n)||!1!==n.active,a=D[r]||function(){var t={name:r,members:[]};return D[r]=t,t}();return w(t,(function(t){if(t._katavorioDrag){if(i&&null!=t._katavorioDrag.posseRoles[a.name])return;e(a.members,t._katavorioDrag),e(t._katavorioDrag.posses,a.name),t._katavorioDrag.posseRoles[a.name]=s}})),a};this.addToPosse=function(t,n){for(var e=[],i=1;i<arguments.length;i++)e.push(A(t,arguments[i]));return 1===e.length?e[0]:e},this.setPosse=function(t,n){for(var e=[],i=1;i<arguments.length;i++)e.push(A(t,arguments[i],!0).name);return w(t,function(t){if(t._katavorioDrag){var n=r(t._katavorioDrag.posses,e),i=[];Array.prototype.push.apply(i,t._katavorioDrag.posses);for(var o=0;o<n.length;o++)this.removeFromPosse(t,n[o])}}.bind(this)),1===e.length?e[0]:e},this.removeFromPosse=function(t,n){if(arguments.length<2)throw new TypeError("No posse id provided for remove operation");for(var e=1;e<arguments.length;e++)n=arguments[e],w(t,(function(t){if(t._katavorioDrag&&t._katavorioDrag.posses){var e=t._katavorioDrag;w(n,(function(t){i(D[t].members,e),i(e.posses,t),delete e.posseRoles[t]}))}}))},this.removeFromAllPosses=function(t){w(t,(function(t){if(t._katavorioDrag&&t._katavorioDrag.posses){var n=t._katavorioDrag;w(n.posses,(function(t){i(D[t].members,n)})),n.posses.length=0,n.posseRoles={}}}))},this.setPosseState=function(t,n,e){var i=D[n];i&&w(t,(function(t){t._katavorioDrag&&t._katavorioDrag.posses&&(t._katavorioDrag.posseRoles[i.name]=e)}))}},t.Katavorio.version="1.0.0",n.Katavorio=t.Katavorio}.call("undefined"!==typeof window?window:this),function(){var t=this;t.jsPlumbUtil=t.jsPlumbUtil||{};var e=t.jsPlumbUtil;function i(t){return"[object Array]"===Object.prototype.toString.call(t)}function r(t){return"[object Number]"===Object.prototype.toString.call(t)}function o(t){return"string"===typeof t}function s(t){return"boolean"===typeof t}function a(t){return null==t}function u(t){return null!=t&&"[object Object]"===Object.prototype.toString.call(t)}function l(t){return"[object Date]"===Object.prototype.toString.call(t)}function c(t){return"[object Function]"===Object.prototype.toString.call(t)}function h(t){return c(t)&&null!=t.name&&t.name.length>0}function f(t){for(var n in t)if(t.hasOwnProperty(n))return!1;return!0}function p(t){if(o(t))return""+t;if(s(t))return!!t;if(l(t))return new Date(t.getTime());if(c(t))return t;if(i(t)){for(var n=[],e=0;e<t.length;e++)n.push(p(t[e]));return n}if(u(t)){var r={};for(var a in t)r[a]=p(t[a]);return r}return t}function d(t,n,e,r){var a,l,c={},h={};for(e=e||[],r=r||[],l=0;l<e.length;l++)c[e[l]]=!0;for(l=0;l<r.length;l++)h[r[l]]=!0;var f=p(t);for(l in n)if(null==f[l]||h[l])f[l]=n[l];else if(o(n[l])||s(n[l]))c[l]?(a=[],a.push.apply(a,i(f[l])?f[l]:[f[l]]),a.push.apply(a,s(n[l])?n[l]:[n[l]]),f[l]=a):f[l]=n[l];else if(i(n[l]))a=[],i(f[l])&&a.push.apply(a,f[l]),a.push.apply(a,n[l]),f[l]=a;else if(u(n[l]))for(var d in u(f[l])||(f[l]={}),n[l])f[l][d]=n[l][d];return f}function g(t,n,e){if(null!=t){var i=t,r=i;return n.replace(/([^\.])+/g,(function(t,n,i,o){var s=t.match(/([^\[0-9]+){1}(\[)([0-9+])/),a=i+t.length>=o.length,u=function(){return r[s[1]]||function(){return r[s[1]]=[],r[s[1]]}()};if(a)s?u()[s[3]]=e:r[t]=e;else if(s){var l=u();r=l[s[3]]||function(){return l[s[3]]={},l[s[3]]}()}else r=r[t]||function(){return r[t]={},r[t]}();return""})),t}}function v(t,n,e){for(var i=0;i<e.length;i++){var r=e[i][0][e[i][1]].apply(e[i][0],e[i][2]);if(r===n)return r}return t}function m(t,n,e,r){var s=function(t){var e=t.match(/(\${.*?})/g);if(null!=e)for(var i=0;i<e.length;i++){var r=n[e[i].substring(2,e[i].length-1)]||"";null!=r&&(t=t.replace(e[i],r))}return t},a=function(t){if(null!=t){if(o(t))return s(t);if(!c(t)||r||null!=e&&0!==(t.name||"").indexOf(e)){if(i(t)){for(var l=[],h=0;h<t.length;h++)l.push(a(t[h]));return l}if(u(t)){var f={};for(var p in t)f[p]=a(t[p]);return f}return t}return t(n)}};return a(t)}function y(t,n){if(t)for(var e=0;e<t.length;e++)if(n(t[e]))return e;return-1}function b(t,n){var e=y(t,n);return e>-1&&t.splice(e,1),-1!==e}function _(t,n){var e=t.indexOf(n);return e>-1&&t.splice(e,1),-1!==e}function P(t,n,e){-1===y(t,e)&&t.push(n)}function x(t,n,e,i){var r=t[n];return null==r&&(r=[],t[n]=r),r[i?"unshift":"push"](e),r}function C(t,n,e){return-1===t.indexOf(n)&&(e?t.unshift(n):t.push(n),!0)}function j(t,n,e){var r;n=i(n)?n:[n];var o=function(n){var e=n.__proto__;while(null!=e)if(null!=e.prototype){for(var i in e.prototype)e.prototype.hasOwnProperty(i)&&!t.prototype.hasOwnProperty(i)&&(t.prototype[i]=e.prototype[i]);e=e.prototype.__proto__}else e=null};for(r=0;r<n.length;r++){for(var s in n[r].prototype)n[r].prototype.hasOwnProperty(s)&&!t.prototype.hasOwnProperty(s)&&(t.prototype[s]=n[r].prototype[s]);o(n[r])}var a=function(t,e){return function(){for(r=0;r<n.length;r++)n[r].prototype[t]&&n[r].prototype[t].apply(this,arguments);return e.apply(this,arguments)}},u=function(n){for(var e in n)t.prototype[e]=a(e,n[e])};if(arguments.length>2)for(r=2;r<arguments.length;r++)u(arguments[r]);return t}n.jsPlumbUtil=e,e.isArray=i,e.isNumber=r,e.isString=o,e.isBoolean=s,e.isNull=a,e.isObject=u,e.isDate=l,e.isFunction=c,e.isNamedFunction=h,e.isEmpty=f,e.clone=p,e.merge=d,e.replace=g,e.functionChain=v,e.populate=m,e.findWithFunction=y,e.removeWithFunction=b,e.remove=_,e.addWithFunction=P,e.addToList=x,e.suggest=C,e.extend=j;for(var w=[],E=0;E<256;E++)w[E]=(E<16?"0":"")+E.toString(16);function S(){var t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,e=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return w[255&t]+w[t>>8&255]+w[t>>16&255]+w[t>>24&255]+"-"+w[255&n]+w[n>>8&255]+"-"+w[n>>16&15|64]+w[n>>24&255]+"-"+w[63&e|128]+w[e>>8&255]+"-"+w[e>>16&255]+w[e>>24&255]+w[255&i]+w[i>>8&255]+w[i>>16&255]+w[i>>24&255]}function D(t){if(null==t)return null;var n=t.replace(/^\s\s*/,""),e=/\s/,i=n.length;while(e.test(n.charAt(--i)));return n.slice(0,i+1)}function A(t,n){t=null==t.length||"string"===typeof t?[t]:t;for(var e=0;e<t.length;e++)n(t[e])}function I(t,n){for(var e=[],i=0;i<t.length;i++)e.push(n(t[i]));return e}function k(t,n,e){e=e||"parent";var i=function(t){return t?n[t]:null},r=function(t){return t?i(t[e]):null},o=function(t,n){if(null==t)return n;var e=["anchor","anchors","cssClass","connector","paintStyle","hoverPaintStyle","endpoint","endpoints"];"override"===n.mergeStrategy&&Array.prototype.push.apply(e,["events","overlays"]);var i=d(t,n,[],e);return o(r(t),i)},s=function(t){if(null==t)return{};if("string"===typeof t)return i(t);if(t.length){var n=!1,e=0,r=void 0;while(!n&&e<t.length)r=s(t[e]),r?n=!0:e++;return r}},a=s(t);return a?o(r(a),a):{}}function O(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(e.logEnabled&&"undefined"!==typeof console)try{var i=arguments[arguments.length-1];console.log(i)}catch(r){}}function T(t,n,e){return function(){var i=null;try{null!=n&&(i=n.apply(this,arguments))}catch(r){O("jsPlumb function failed : "+r)}if(null!=t&&(null==e||i!==e))try{i=t.apply(this,arguments)}catch(r){O("wrapped function failed : "+r)}return i}}e.uuid=S,e.fastTrim=D,e.each=A,e.map=I,e.mergeWithParents=k,e.logEnabled=!0,e.log=O,e.wrap=T;var M=function(){function t(){var t=this;this._listeners={},this.eventsSuspended=!1,this.tick=!1,this.eventsToDieOn={ready:!0},this.queue=[],this.bind=function(n,e,i){var r=function(n){x(t._listeners,n,e,i),e.__jsPlumb=e.__jsPlumb||{},e.__jsPlumb[S()]=n};if("string"===typeof n)r(n);else if(null!=n.length)for(var o=0;o<n.length;o++)r(n[o]);return t},this.fire=function(t,n,e){if(this.tick)this.queue.unshift(arguments);else{if(this.tick=!0,!this.eventsSuspended&&this._listeners[t]){var i=this._listeners[t].length,r=0,o=!1,s=null;if(!this.shouldFireEvent||this.shouldFireEvent(t,n,e))while(!o&&r<i&&!1!==s){if(this.eventsToDieOn[t])this._listeners[t][r].apply(this,[n,e]);else try{s=this._listeners[t][r].apply(this,[n,e])}catch(a){O("jsPlumb: fire failed for event "+t+" : "+a)}r++,null!=this._listeners&&null!=this._listeners[t]||(o=!0)}}this.tick=!1,this._drain()}return this},this._drain=function(){var n=t.queue.pop();n&&t.fire.apply(t,n)},this.unbind=function(t,n){if(0===arguments.length)this._listeners={};else if(1===arguments.length){if("string"===typeof t)delete this._listeners[t];else if(t.__jsPlumb){var e=void 0;for(var i in t.__jsPlumb)e=t.__jsPlumb[i],_(this._listeners[e]||[],t)}}else 2===arguments.length&&_(this._listeners[t]||[],n);return this},this.getListener=function(n){return t._listeners[n]},this.setSuspendEvents=function(n){t.eventsSuspended=n},this.isSuspendEvents=function(){return t.eventsSuspended},this.silently=function(n){t.setSuspendEvents(!0);try{n()}catch(e){O("Cannot execute silent function "+e)}t.setSuspendEvents(!1)},this.cleanupListeners=function(){for(var n in t._listeners)t._listeners[n]=null}}return t}();function L(t,n,e){var i=[t[0]-n[0],t[1]-n[1]],r=Math.cos(e/360*Math.PI*2),o=Math.sin(e/360*Math.PI*2);return[i[0]*r-i[1]*o+n[0],i[1]*r+i[0]*o+n[1],r,o]}function F(t,n){var e=L(t,[0,0],n);return[Math.round(e[0]),Math.round(e[1])]}e.EventGenerator=M,e.rotatePoint=L,e.rotateAnchorOrientation=F}.call("undefined"!==typeof window?window:this),function(){"use strict";var t=this;t.jsPlumbUtil.matchesSelector=function(t,n,e){e=e||t.parentNode;for(var i=e.querySelectorAll(n),r=0;r<i.length;r++)if(i[r]===t)return!0;return!1},t.jsPlumbUtil.consume=function(t,n){t.stopPropagation?t.stopPropagation():t.returnValue=!1,!n&&t.preventDefault&&t.preventDefault()},t.jsPlumbUtil.sizeElement=function(t,n,e,i,r){t&&(t.style.height=r+"px",t.height=r,t.style.width=i+"px",t.width=i,t.style.left=n+"px",t.style.top=e+"px")}}.call("undefined"!==typeof window?window:this),function(){var t={deriveAnchor:function(t,n,e,i){return{top:["TopRight","TopLeft"],bottom:["BottomRight","BottomLeft"]}[t][n]}},n=this,e=function(t,n){this.count=0,this.instance=t,this.lists={},this.options=n||{},this.instance.addList=function(t,n){return this.listManager.addList(t,n)},this.instance.removeList=function(t){this.listManager.removeList(t)},this.instance.bind("manageElement",function(t){for(var n=this.instance.getSelector(t.el,"[jtk-scrollable-list]"),e=0;e<n.length;e++)this.addList(n[e])}.bind(this)),this.instance.bind("unmanageElement",(function(t){this.removeList(t.el)})),this.instance.bind("connection",function(t,n){null==n&&(this._maybeUpdateParentList(t.source),this._maybeUpdateParentList(t.target))}.bind(this))};n.jsPlumbListManager=e,e.prototype={addList:function(n,e){var r=this.instance.extend({},t);this.instance.extend(r,this.options),e=this.instance.extend(r,e||{});var o=[this.instance.getInstanceIndex(),this.count++].join("_");this.lists[o]=new i(this.instance,n,e,o)},removeList:function(t){var n=this.lists[t._jsPlumbList];n&&(n.destroy(),delete this.lists[t._jsPlumbList])},_maybeUpdateParentList:function(t){var n=t.parentNode,e=this.instance.getContainer();while(null!=n&&n!==e){if(null!=n._jsPlumbList&&null!=this.lists[n._jsPlumbList])return void n._jsPlumbScrollHandler();n=n.parentNode}}};var i=function(t,n,e,i){function r(t,n,i,r){return e.anchor?e.anchor:e.deriveAnchor(t,n,i,r)}function o(t,n,i,r){return e.deriveEndpoint?e.deriveEndpoint(t,n,i,r):e.endpoint?e.endpoint:i.type}function s(n){var e=n.parentNode,i=t.getContainer();while(null!=e&&e!==i){if(t.hasClass(e,"jtk-managed"))return void t.recalculateOffsets(e);e=e.parentNode}}n["_jsPlumbList"]=i;var a=function(e){for(var i=t.getSelector(n,".jtk-managed"),a=t.getId(n),u=0;u<i.length;u++){if(i[u].offsetTop<n.scrollTop)i[u]._jsPlumbProxies||(i[u]._jsPlumbProxies=i[u]._jsPlumbProxies||[],t.select({source:i[u]}).each((function(e){t.proxyConnection(e,0,n,a,(function(){return o("top",0,e.endpoints[0],e)}),(function(){return r("top",0,e.endpoints[0],e)})),i[u]._jsPlumbProxies.push([e,0])})),t.select({target:i[u]}).each((function(e){t.proxyConnection(e,1,n,a,(function(){return o("top",1,e.endpoints[1],e)}),(function(){return r("top",1,e.endpoints[1],e)})),i[u]._jsPlumbProxies.push([e,1])})));else if(i[u].offsetTop+i[u].offsetHeight>n.scrollTop+n.offsetHeight)i[u]._jsPlumbProxies||(i[u]._jsPlumbProxies=i[u]._jsPlumbProxies||[],t.select({source:i[u]}).each((function(e){t.proxyConnection(e,0,n,a,(function(){return o("bottom",0,e.endpoints[0],e)}),(function(){return r("bottom",0,e.endpoints[0],e)})),i[u]._jsPlumbProxies.push([e,0])})),t.select({target:i[u]}).each((function(e){t.proxyConnection(e,1,n,a,(function(){return o("bottom",1,e.endpoints[1],e)}),(function(){return r("bottom",1,e.endpoints[1],e)})),i[u]._jsPlumbProxies.push([e,1])})));else if(i[u]._jsPlumbProxies){for(var l=0;l<i[u]._jsPlumbProxies.length;l++)t.unproxyConnection(i[u]._jsPlumbProxies[l][0],i[u]._jsPlumbProxies[l][1],a);delete i[u]._jsPlumbProxies}t.revalidate(i[u])}s(n)};t.setAttribute(n,"jtk-scrollable-list","true"),n._jsPlumbScrollHandler=a,t.on(n,"scroll",a),a(),this.destroy=function(){t.off(n,"scroll",a),delete n._jsPlumbScrollHandler;for(var e=t.getSelector(n,".jtk-managed"),i=t.getId(n),r=0;r<e.length;r++)if(e[r]._jsPlumbProxies){for(var o=0;o<e[r]._jsPlumbProxies.length;o++)t.unproxyConnection(e[r]._jsPlumbProxies[o][0],e[r]._jsPlumbProxies[o][1],i);delete e[r]._jsPlumbProxies}}}}.call("undefined"!==typeof window?window:this),function(){"use strict";var t=this,e=t.jsPlumbUtil,i=function(t){if(t._jsPlumb.paintStyle&&t._jsPlumb.hoverPaintStyle){var n={};d.extend(n,t._jsPlumb.paintStyle),d.extend(n,t._jsPlumb.hoverPaintStyle),delete t._jsPlumb.hoverPaintStyle,n.gradient&&t._jsPlumb.paintStyle.fill&&delete n.gradient,t._jsPlumb.hoverPaintStyle=n}},r=["tap","dbltap","click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","contextmenu"],o=function(t,n,e,i){var r=t.getAttachedElements();if(r)for(var o=0,s=r.length;o<s;o++)i&&i===r[o]||r[o].setHover(n,!0,e)},s=function(t){return null==t?null:t.split(" ")},a=function(t,n,e){for(var i in n)t[i]=e},u=function(t,n,i){if(t.getDefaultType){var r=t.getTypeDescriptor(),o={},s=t.getDefaultType(),u=e.merge({},s);a(o,s,"__default");for(var l=0,c=t._jsPlumb.types.length;l<c;l++){var h=t._jsPlumb.types[l];if("__default"!==h){var f=t._jsPlumb.instance.getType(h,r);if(null!=f){var p=["anchor","anchors","connector","paintStyle","hoverPaintStyle","endpoint","endpoints","connectorOverlays","connectorStyle","connectorHoverStyle","endpointStyle","endpointHoverStyle"],d=[];"override"===f.mergeStrategy?Array.prototype.push.apply(p,["events","overlays","cssClass"]):d.push("cssClass"),u=e.merge(u,f,d,p),a(o,f,h)}}}n&&(u=e.populate(u,n,"_")),t.applyType(u,i,o),i||t.repaint()}},l=t.jsPlumbUIComponent=function(t){e.EventGenerator.apply(this,arguments);var n=this,i=arguments,r=n.idPrefix,o=r+(new Date).getTime();this._jsPlumb={instance:t._jsPlumb,parameters:t.parameters||{},paintStyle:null,hoverPaintStyle:null,paintStyleInUse:null,hover:!1,beforeDetach:t.beforeDetach,beforeDrop:t.beforeDrop,overlayPlacements:[],hoverClass:t.hoverClass||t._jsPlumb.Defaults.HoverClass,types:[],typeCache:{}},this.cacheTypeItem=function(t,n,e){this._jsPlumb.typeCache[e]=this._jsPlumb.typeCache[e]||{},this._jsPlumb.typeCache[e][t]=n},this.getCachedTypeItem=function(t,n){return this._jsPlumb.typeCache[n]?this._jsPlumb.typeCache[n][t]:null},this.getId=function(){return o};var s=t.overlays||[],a={};if(this.defaultOverlayKeys){for(var u=0;u<this.defaultOverlayKeys.length;u++)Array.prototype.push.apply(s,this._jsPlumb.instance.Defaults[this.defaultOverlayKeys[u]]||[]);for(u=0;u<s.length;u++){var l=d.convertToFullOverlaySpec(s[u]);a[l[1].id]=l}}var c={overlays:a,parameters:t.parameters||{},scope:t.scope||this._jsPlumb.instance.getDefaultScope()};if(this.getDefaultType=function(){return c},this.appendToDefaultType=function(t){for(var n in t)c[n]=t[n]},t.events)for(var h in t.events)n.bind(h,t.events[h]);this.clone=function(){var t=Object.create(this.constructor.prototype);return this.constructor.apply(t,i),t}.bind(this),this.isDetachAllowed=function(t){var n=!0;if(this._jsPlumb.beforeDetach)try{n=this._jsPlumb.beforeDetach(t)}catch(i){e.log("jsPlumb: beforeDetach callback failed",i)}return n},this.isDropAllowed=function(t,n,i,r,o,s,a){var u=this._jsPlumb.instance.checkCondition("beforeDrop",{sourceId:t,targetId:n,scope:i,connection:r,dropEndpoint:o,source:s,target:a});if(this._jsPlumb.beforeDrop)try{u=this._jsPlumb.beforeDrop({sourceId:t,targetId:n,scope:i,connection:r,dropEndpoint:o,source:s,target:a})}catch(l){e.log("jsPlumb: beforeDrop callback failed",l)}return u};var f=[];this.setListenerComponent=function(t){for(var n=0;n<f.length;n++)f[n][3]=t}},c=function(t,n){var e=t._jsPlumb.types[n],i=t._jsPlumb.instance.getType(e,t.getTypeDescriptor());null!=i&&i.cssClass&&t.canvas&&t._jsPlumb.instance.removeClass(t.canvas,i.cssClass)};e.extend(t.jsPlumbUIComponent,e.EventGenerator,{getParameter:function(t){return this._jsPlumb.parameters[t]},setParameter:function(t,n){this._jsPlumb.parameters[t]=n},getParameters:function(){return this._jsPlumb.parameters},setParameters:function(t){this._jsPlumb.parameters=t},getClass:function(){return d.getClass(this.canvas)},hasClass:function(t){return d.hasClass(this.canvas,t)},addClass:function(t){d.addClass(this.canvas,t)},removeClass:function(t){d.removeClass(this.canvas,t)},updateClasses:function(t,n){d.updateClasses(this.canvas,t,n)},setType:function(t,n,e){this.clearTypes(),this._jsPlumb.types=s(t)||[],u(this,n,e)},getType:function(){return this._jsPlumb.types},reapplyTypes:function(t,n){u(this,t,n)},hasType:function(t){return-1!==this._jsPlumb.types.indexOf(t)},addType:function(t,n,e){var i=s(t),r=!1;if(null!=i){for(var o=0,a=i.length;o<a;o++)this.hasType(i[o])||(this._jsPlumb.types.push(i[o]),r=!0);r&&u(this,n,e)}},removeType:function(t,n,e){var i=s(t),r=!1,o=function(t){var n=this._jsPlumb.types.indexOf(t);return-1!==n&&(c(this,n),this._jsPlumb.types.splice(n,1),!0)}.bind(this);if(null!=i){for(var a=0,l=i.length;a<l;a++)r=o(i[a])||r;r&&u(this,n,e)}},clearTypes:function(t,n){for(var e=this._jsPlumb.types.length,i=0;i<e;i++)c(this,0),this._jsPlumb.types.splice(0,1);u(this,t,n)},toggleType:function(t,n,e){var i=s(t);if(null!=i){for(var r=0,o=i.length;r<o;r++){var a=this._jsPlumb.types.indexOf(i[r]);-1!==a?(c(this,a),this._jsPlumb.types.splice(a,1)):this._jsPlumb.types.push(i[r])}u(this,n,e)}},applyType:function(t,n){if(this.setPaintStyle(t.paintStyle,n),this.setHoverPaintStyle(t.hoverPaintStyle,n),t.parameters)for(var e in t.parameters)this.setParameter(e,t.parameters[e]);this._jsPlumb.paintStyleInUse=this.getPaintStyle()},setPaintStyle:function(t,n){this._jsPlumb.paintStyle=t,this._jsPlumb.paintStyleInUse=this._jsPlumb.paintStyle,i(this),n||this.repaint()},getPaintStyle:function(){return this._jsPlumb.paintStyle},setHoverPaintStyle:function(t,n){this._jsPlumb.hoverPaintStyle=t,i(this),n||this.repaint()},getHoverPaintStyle:function(){return this._jsPlumb.hoverPaintStyle},destroy:function(t){(t||null==this.typeId)&&(this.cleanupListeners(),this.clone=null,this._jsPlumb=null)},isHover:function(){return this._jsPlumb.hover},setHover:function(t,n,e){if(this._jsPlumb&&!this._jsPlumb.instance.currentlyDragging&&!this._jsPlumb.instance.isHoverSuspended()){this._jsPlumb.hover=t;var i=t?"addClass":"removeClass";null!=this.canvas&&(null!=this._jsPlumb.instance.hoverClass&&this._jsPlumb.instance[i](this.canvas,this._jsPlumb.instance.hoverClass),null!=this._jsPlumb.hoverClass&&this._jsPlumb.instance[i](this.canvas,this._jsPlumb.hoverClass)),null!=this._jsPlumb.hoverPaintStyle&&(this._jsPlumb.paintStyleInUse=t?this._jsPlumb.hoverPaintStyle:this._jsPlumb.paintStyle,this._jsPlumb.instance.isSuspendDrawing()||(e=e||jsPlumbUtil.uuid(),this.repaint({timestamp:e,recalc:!1}))),this.getAttachedElements&&!n&&o(this,t,jsPlumbUtil.uuid(),this)}}});var h=0,f=function(){var t=h+1;return h++,t},p=t.jsPlumbInstance=function(n){this.version="2.15.5",this.Defaults={Anchor:"Bottom",Anchors:[null,null],ConnectionsDetachable:!0,ConnectionOverlays:[],Connector:"Bezier",Container:null,DoNotThrowErrors:!1,DragOptions:{},DropOptions:{},Endpoint:"Dot",EndpointOverlays:[],Endpoints:[null,null],EndpointStyle:{fill:"#456"},EndpointStyles:[null,null],EndpointHoverStyle:null,EndpointHoverStyles:[null,null],HoverPaintStyle:null,LabelStyle:{color:"black"},ListStyle:{},LogEnabled:!1,Overlays:[],MaxConnections:1,PaintStyle:{"stroke-width":4,stroke:"#456"},ReattachConnections:!1,RenderMode:"svg",Scope:"jsPlumb_DefaultScope"},n&&d.extend(this.Defaults,n),this.logEnabled=this.Defaults.LogEnabled,this._connectionTypes={},this._endpointTypes={},e.EventGenerator.apply(this);var i=this,o=f(),s=i.bind,a={},u=1,c=function(t){if(null==t)return null;if(3===t.nodeType||8===t.nodeType)return{el:t,text:!0};var n=i.getElement(t);return{el:n,id:e.isString(t)&&null==n?t:H(n)}};for(var h in this.getInstanceIndex=function(){return o},this.setZoom=function(t,n){return u=t,i.fire("zoom",u),n&&i.repaintEverything(),!0},this.getZoom=function(){return u},this.Defaults)a[h]=this.Defaults[h];var p,g=[];this.unbindContainer=function(){if(null!=p&&g.length>0)for(var t=0;t<g.length;t++)i.off(p,g[t][0],g[t][1])},this.setContainer=function(t){this.unbindContainer(),t=this.getElement(t),this.select().each((function(n){n.moveParent(t)})),this.selectEndpoints().each((function(n){n.moveParent(t)}));var n=p;p=t,g.length=0;for(var e={endpointclick:"endpointClick",endpointdblclick:"endpointDblClick"},o=function(t,n,r){var o=n.srcElement||n.target,s=(o&&o.parentNode?o.parentNode._jsPlumb:null)||(o?o._jsPlumb:null)||(o&&o.parentNode&&o.parentNode.parentNode?o.parentNode.parentNode._jsPlumb:null);if(s){s.fire(t,s,n);var a=r&&e[r+t]||t;i.fire(a,s.component||s,n)}},s=function(t,n,e){g.push([t,e]),i.on(p,t,n,e)},a=function(t){s(t,".jtk-connector",(function(n){o(t,n)})),s(t,".jtk-endpoint",(function(n){o(t,n,"endpoint")})),s(t,".jtk-overlay",(function(n){o(t,n)}))},u=0;u<r.length;u++)a(r[u]);for(var l in P){var c=P[l].el;c.parentNode===n&&(n.removeChild(c),p.appendChild(c))}},this.getContainer=function(){return p},this.bind=function(t,n){"ready"===t&&m?n():s.apply(i,[t,n])},i.importDefaults=function(t){for(var n in t)i.Defaults[n]=t[n];return t.Container&&i.setContainer(t.Container),i},i.restoreDefaults=function(){return i.Defaults=d.extend({},a),i};var v=null,m=!1,y=[],b={},_={},P={},x={},C={},j=!1,w=[],E=!1,S=null,D=this.Defaults.Scope,A=1,I=function(){return""+A++},k=function(t,n){p?p.appendChild(t):n?this.getElement(n).appendChild(t):this.appendToRoot(t)}.bind(this),O=function(t,n,e,r){var o={c:[],e:[]};if(!E&&(t=i.getElement(t),null!=t)){var s=H(t),a=t.querySelectorAll(".jtk-managed");null==e&&(e=jsPlumbUtil.uuid());pt({elId:s,offset:n,recalc:!1,timestamp:e});for(var u=0;u<a.length;u++)pt({elId:a[u].getAttribute("id"),recalc:!0,timestamp:e});var l=i.router.redraw(s,n,e,null,r);if(Array.prototype.push.apply(o.c,l.c),Array.prototype.push.apply(o.e,l.e),a)for(var c=0;c<a.length;c++)l=i.router.redraw(a[c].getAttribute("id"),null,e,null,r,!0),Array.prototype.push.apply(o.c,l.c),Array.prototype.push.apply(o.e,l.e)}return o},T=function(t){return _[t]},M=function(t,n){for(var e=t.scope.split(/\s/),i=n.scope.split(/\s/),r=0;r<e.length;r++)for(var o=0;o<i.length;o++)if(i[o]===e[r])return!0;return!1},L=function(t,n){var e=d.extend({},t);for(var i in n)n[i]&&(e[i]=n[i]);return e},F=function(t,n){var r=d.extend({},t);if(n&&d.extend(r,n),r.source&&(r.source.endpoint?r.sourceEndpoint=r.source:r.source=i.getElement(r.source)),r.target&&(r.target.endpoint?r.targetEndpoint=r.target:r.target=i.getElement(r.target)),t.uuids&&(r.sourceEndpoint=T(t.uuids[0]),r.targetEndpoint=T(t.uuids[1])),r.sourceEndpoint&&r.sourceEndpoint.isFull())e.log(i,"could not add connection; source endpoint is full");else if(r.targetEndpoint&&r.targetEndpoint.isFull())e.log(i,"could not add connection; target endpoint is full");else{if(!r.type&&r.sourceEndpoint&&(r.type=r.sourceEndpoint.connectionType),r.sourceEndpoint&&r.sourceEndpoint.connectorOverlays){r.overlays=r.overlays||[];for(var o=0,s=r.sourceEndpoint.connectorOverlays.length;o<s;o++)r.overlays.push(r.sourceEndpoint.connectorOverlays[o])}r.sourceEndpoint&&r.sourceEndpoint.scope&&(r.scope=r.sourceEndpoint.scope),!r["pointer-events"]&&r.sourceEndpoint&&r.sourceEndpoint.connectorPointerEvents&&(r["pointer-events"]=r.sourceEndpoint.connectorPointerEvents);var a=function(t,n,e){var o=L(n,{anchor:r.anchors?r.anchors[e]:r.anchor,endpoint:r.endpoints?r.endpoints[e]:r.endpoint,paintStyle:r.endpointStyles?r.endpointStyles[e]:r.endpointStyle,hoverPaintStyle:r.endpointHoverStyles?r.endpointHoverStyles[e]:r.endpointHoverStyle});return i.addEndpoint(t,o)},u=function(t,n,e,i){if(r[t]&&!r[t].endpoint&&!r[t+"Endpoint"]&&!r.newConnection){var o=H(r[t]),s=e[o];if(s=s?s[i]:null,s){if(!s.enabled)return!1;var u=d.extend({},s.def);delete u.label;var l=null!=s.endpoint&&s.endpoint._jsPlumb?s.endpoint:a(r[t],u,n);if(l.isFull())return!1;r[t+"Endpoint"]=l,!r.scope&&u.scope&&(r.scope=u.scope),s.uniqueEndpoint?s.endpoint?l.finalEndpoint=s.endpoint:(s.endpoint=l,l.setDeleteOnEmpty(!1)):l.setDeleteOnEmpty(!0),0===n&&s.def.connectorOverlays&&(r.overlays=r.overlays||[],Array.prototype.push.apply(r.overlays,s.def.connectorOverlays))}}};if(!1!==u("source",0,this.sourceEndpointDefinitions,r.type||"default")&&!1!==u("target",1,this.targetEndpointDefinitions,r.type||"default"))return r.sourceEndpoint&&r.targetEndpoint&&(M(r.sourceEndpoint,r.targetEndpoint)||(r=null)),r}}.bind(i),R=function(t){var n=i.Defaults.ConnectionType||i.getDefaultConnectionType();t._jsPlumb=i,t.newConnection=R,t.newEndpoint=U,t.endpointsByUUID=_,t.endpointsByElement=b,t.finaliseConnection=N,t.id="con_"+I();var e=new n(t);return e.isDetachable()&&(e.endpoints[0].initDraggable("_jsPlumbSource"),e.endpoints[1].initDraggable("_jsPlumbTarget")),e},N=i.finaliseConnection=function(t,n,e,r){if(n=n||{},t.suspendedEndpoint||y.push(t),t.pending=null,t.endpoints[0].isTemporarySource=!1,!1!==r&&i.router.newConnection(t),O(t.source),!n.doNotFireConnectionEvent&&!1!==n.fireEvent){var o={connection:t,source:t.source,target:t.target,sourceId:t.sourceId,targetId:t.targetId,sourceEndpoint:t.endpoints[0],targetEndpoint:t.endpoints[1]};i.fire("connection",o,e)}},U=function(t,n){var e=i.Defaults.EndpointType||d.Endpoint,r=d.extend({},t);r._jsPlumb=i,r.newConnection=R,r.newEndpoint=U,r.endpointsByUUID=_,r.endpointsByElement=b,r.fireDetachEvent=q,r.elementId=n||H(r.source);var o=new e(r);return o.id="ep_"+I(),ft(r.elementId,r.source),d.headless||i.getDragManager().endpointAdded(r.source,n),o},G=function(t,n,e){var i=b[t];if(i&&i.length)for(var r=0,o=i.length;r<o;r++){for(var s=0,a=i[r].connections.length;s<a;s++){var u=n(i[r].connections[s]);if(u)return}e&&e(i[r])}},B=function(t,n,e){n="block"===n;var i=null;e&&(i=function(t){t.setVisible(n,!0,!0)});var r=c(t);G(r.id,(function(t){if(n&&e){var i=t.sourceId===r.id?1:0;t.endpoints[i].isVisible()&&t.setVisible(!0)}else t.setVisible(n)}),i)},z=function(t,n){var e=null;n&&(e=function(t){var n=t.isVisible();t.setVisible(!n)}),G(t,(function(t){var n=t.isVisible();t.setVisible(!n)}),e)},W=function(t){var n=x[t];return n?{o:n,s:w[t]}:pt({elId:t})},H=function(t,n,r){if(e.isString(t))return t;if(null==t)return null;var s=i.getAttribute(t,"id");return s&&"undefined"!==s||(2===arguments.length&&void 0!==arguments[1]?s=n:(1===arguments.length||3===arguments.length&&!arguments[2])&&(s="jsPlumb_"+o+"_"+I()),r||i.setAttribute(t,"id",s)),s};this.setConnectionBeingDragged=function(t){j=t},this.isConnectionBeingDragged=function(){return j},this.getManagedElements=function(){return P},this.connectorClass="jtk-connector",this.connectorOutlineClass="jtk-connector-outline",this.connectedClass="jtk-connected",this.hoverClass="jtk-hover",this.endpointClass="jtk-endpoint",this.endpointConnectedClass="jtk-endpoint-connected",this.endpointFullClass="jtk-endpoint-full",this.endpointDropAllowedClass="jtk-endpoint-drop-allowed",this.endpointDropForbiddenClass="jtk-endpoint-drop-forbidden",this.overlayClass="jtk-overlay",this.draggingClass="jtk-dragging",this.elementDraggingClass="jtk-element-dragging",this.sourceElementDraggingClass="jtk-source-element-dragging",this.targetElementDraggingClass="jtk-target-element-dragging",this.endpointAnchorClassPrefix="jtk-endpoint-anchor",this.hoverSourceClass="jtk-source-hover",this.hoverTargetClass="jtk-target-hover",this.dragSelectClass="jtk-drag-select",this.Anchors={},this.Connectors={svg:{}},this.Endpoints={svg:{}},this.Overlays={svg:{}},this.ConnectorRenderers={},this.SVG="svg",this.addEndpoint=function(t,n,r){r=r||{};var o=d.extend({},r);d.extend(o,n),o.endpoint=o.endpoint||i.Defaults.Endpoint,o.paintStyle=o.paintStyle||i.Defaults.EndpointStyle;for(var s=[],a=e.isArray(t)||null!=t.length&&!e.isString(t)?t:[t],u=0,l=a.length;u<l;u++){o.source=i.getElement(a[u]),ct(o.source);var c=H(o.source),h=U(o,c),f=ft(c,o.source,null,!E).info.o;e.addToList(b,c,h),E||h.paint({anchorLoc:h.anchor.compute({xy:[f.left,f.top],wh:w[c],element:h,timestamp:S,rotation:this.getRotation(c)}),timestamp:S}),s.push(h)}return 1===s.length?s[0]:s},this.addEndpoints=function(t,n,r){for(var o=[],s=0,a=n.length;s<a;s++){var u=i.addEndpoint(t,n[s],r);e.isArray(u)?Array.prototype.push.apply(o,u):o.push(u)}return o},this.animate=function(t,n,r){if(!this.animationSupported)return!1;r=r||{};var o=i.getElement(t),s=H(o),a=d.animEvents.step,u=d.animEvents.complete;r[a]=e.wrap(r[a],(function(){i.revalidate(s)})),r[u]=e.wrap(r[u],(function(){i.revalidate(s)})),i.doAnimate(o,n,r)},this.checkCondition=function(t,n){var r=i.getListener(t),o=!0;if(r&&r.length>0){var s=Array.prototype.slice.call(arguments,1);try{for(var a=0,u=r.length;a<u;a++)o=o&&r[a].apply(r[a],s)}catch(l){e.log(i,"cannot check condition ["+t+"]"+l)}}return o},this.connect=function(t,n){var i,r=F(t,n);if(r){if(null==r.source&&null==r.sourceEndpoint)return void e.log("Cannot establish connection - source does not exist");if(null==r.target&&null==r.targetEndpoint)return void e.log("Cannot establish connection - target does not exist");ct(r.source),i=R(r),N(i,r)}return i};var Y=[{el:"source",elId:"sourceId",epDefs:"sourceEndpointDefinitions"},{el:"target",elId:"targetId",epDefs:"targetEndpointDefinitions"}],X=function(t,n,e,i){var r,o,s,a=Y[e],u=t[a.elId],l=(t[a.el],t.endpoints[e]),c={index:e,originalSourceId:0===e?u:t.sourceId,newSourceId:t.sourceId,originalTargetId:1===e?u:t.targetId,newTargetId:t.targetId,connection:t};if(n.constructor===d.Endpoint)r=n,r.addConnection(t),n=r.element;else if(o=H(n),s=this[a.epDefs][o],o===t[a.elId])r=null;else if(s)for(var h in s){if(!s[h].enabled)return;r=null!=s[h].endpoint&&s[h].endpoint._jsPlumb?s[h].endpoint:this.addEndpoint(n,s[h].def),s[h].uniqueEndpoint&&(s[h].endpoint=r),r.addConnection(t)}else r=t.makeEndpoint(0===e,n,o);return null!=r&&(l.detachFromConnection(t),t.endpoints[e]=r,t[a.el]=r.element,t[a.elId]=r.elementId,c[0===e?"newSourceId":"newTargetId"]=r.elementId,V(c),i||t.repaint()),c.element=n,c}.bind(this);this.setSource=function(t,n,e){var i=X(t,n,0,e);this.router.sourceOrTargetChanged(i.originalSourceId,i.newSourceId,t,i.el,0)},this.setTarget=function(t,n,e){var i=X(t,n,1,e);this.router.sourceOrTargetChanged(i.originalTargetId,i.newTargetId,t,i.el,1)},this.deleteEndpoint=function(t,n,e){var r="string"===typeof t?_[t]:t;return r&&i.deleteObject({endpoint:r,dontUpdateHover:n,deleteAttachedObjects:e}),i},this.deleteEveryEndpoint=function(){var t=i.setSuspendDrawing(!0);for(var n in b){var e=b[n];if(e&&e.length)for(var r=0,o=e.length;r<o;r++)i.deleteEndpoint(e[r],!0)}b={},P={},_={},x={},C={},i.router.reset();var s=i.getDragManager();return s&&s.reset(),t||i.setSuspendDrawing(!1),i};var q=function(t,n,e){var r=i.Defaults.ConnectionType||i.getDefaultConnectionType(),o=t.constructor===r,s=o?{connection:t,source:t.source,target:t.target,sourceId:t.sourceId,targetId:t.targetId,sourceEndpoint:t.endpoints[0],targetEndpoint:t.endpoints[1]}:t;n&&i.fire("connectionDetached",s,e),i.fire("internal.connectionDetached",s,e),i.router.connectionDetached(s)},V=i.fireMoveEvent=function(t,n){i.fire("connectionMoved",t,n)};this.unregisterEndpoint=function(t){for(var n in t._jsPlumb.uuid&&(_[t._jsPlumb.uuid]=null),i.router.deleteEndpoint(t),b){var e=b[n];if(e){for(var r=[],o=0,s=e.length;o<s;o++)e[o]!==t&&r.push(e[o]);b[n]=r}b[n].length<1&&delete b[n]}};var $="isDetachAllowed",Z="beforeDetach",J="checkCondition";this.deleteConnection=function(t,n){return!(null==t||(n=n||{},!n.force&&!e.functionChain(!0,!1,[[t.endpoints[0],$,[t]],[t.endpoints[1],$,[t]],[t,$,[t]],[i,J,[Z,t]]])))&&(t.setHover(!1),q(t,!t.pending&&!1!==n.fireEvent,n.originalEvent),t.endpoints[0].detachFromConnection(t),t.endpoints[1].detachFromConnection(t),e.removeWithFunction(y,(function(n){return t.id===n.id})),t.cleanup(),t.destroy(),!0)},this.deleteEveryConnection=function(t){t=t||{};var n=y.length,e=0;return i.batch((function(){for(var r=0;r<n;r++)e+=i.deleteConnection(y[0],t)?1:0})),e},this.deleteConnectionsForElement=function(t,n){n=n||{},t=i.getElement(t);var e=H(t),r=b[e];if(r&&r.length)for(var o=0,s=r.length;o<s;o++)r[o].deleteEveryConnection(n);return i},this.deleteObject=function(t){var n={endpoints:{},connections:{},endpointCount:0,connectionCount:0},r=!1!==t.deleteAttachedObjects,o=function(e){null!=e&&null==n.connections[e.id]&&(t.dontUpdateHover||null==e._jsPlumb||e.setHover(!1),n.connections[e.id]=e,n.connectionCount++)},s=function(e){if(null!=e&&null==n.endpoints[e.id]&&(t.dontUpdateHover||null==e._jsPlumb||e.setHover(!1),n.endpoints[e.id]=e,n.endpointCount++,r))for(var i=0;i<e.connections.length;i++){var s=e.connections[i];o(s)}};for(var a in t.connection?o(t.connection):s(t.endpoint),n.connections){var u=n.connections[a];if(u._jsPlumb){e.removeWithFunction(y,(function(t){return u.id===t.id})),q(u,!1!==t.fireEvent&&!u.pending,t.originalEvent);var l=null==t.deleteAttachedObjects?null:!t.deleteAttachedObjects;u.endpoints[0].detachFromConnection(u,null,l),u.endpoints[1].detachFromConnection(u,null,l),u.cleanup(!0),u.destroy(!0)}}for(var c in n.endpoints){var h=n.endpoints[c];h._jsPlumb&&(i.unregisterEndpoint(h),h.cleanup(!0),h.destroy(!0))}return n};var K=function(t,n,e,i){for(var r=0,o=t.length;r<o;r++)t[r][n].apply(t[r],e);return i(t)},Q=function(t,n,e){for(var i=[],r=0,o=t.length;r<o;r++)i.push([t[r][n].apply(t[r],e),t[r]]);return i},tt=function(t,n,e){return function(){return K(t,n,arguments,e)}},nt=function(t,n){return function(){return Q(t,n,arguments)}},et=function(t,n){var e=[];if(t)if("string"===typeof t){if("*"===t)return t;e.push(t)}else if(n)e=t;else if(t.length)for(var i=0,r=t.length;i<r;i++)e.push(c(t[i]).id);else e.push(c(t).id);return e},it=function(t,n,e){return"*"===t||(t.length>0?-1!==t.indexOf(n):!e)};this.getConnections=function(t,n){t?t.constructor===String&&(t={scope:t}):t={};for(var e=t.scope||i.getDefaultScope(),r=et(e,!0),o=et(t.source),s=et(t.target),a=!n&&r.length>1?{}:[],u=function(t,e){if(!n&&r.length>1){var i=a[t];null==i&&(i=a[t]=[]),i.push(e)}else a.push(e)},l=0,c=y.length;l<c;l++){var h=y[l],f=h.proxies&&h.proxies[0]?h.proxies[0].originalEp.elementId:h.sourceId,p=h.proxies&&h.proxies[1]?h.proxies[1].originalEp.elementId:h.targetId;it(r,h.scope)&&it(o,f)&&it(s,p)&&u(h.scope,h)}return a};var rt=function(t,n){return function(e){for(var i=0,r=t.length;i<r;i++)e(t[i]);return n(t)}},ot=function(t){return function(n){return t[n]}},st=function(t,n){var e,i,r={length:t.length,each:rt(t,n),get:ot(t)},o=["setHover","removeAllOverlays","setLabel","addClass","addOverlay","removeOverlay","removeOverlays","showOverlay","hideOverlay","showOverlays","hideOverlays","setPaintStyle","setHoverPaintStyle","setSuspendEvents","setParameter","setParameters","setVisible","repaint","addType","toggleType","removeType","removeClass","setType","bind","unbind"],s=["getLabel","getOverlay","isHover","getParameter","getParameters","getPaintStyle","getHoverPaintStyle","isVisible","hasType","getType","isSuspendEvents"];for(e=0,i=o.length;e<i;e++)r[o[e]]=tt(t,o[e],n);for(e=0,i=s.length;e<i;e++)r[s[e]]=nt(t,s[e]);return r},at=function(t){var n=st(t,at);return d.extend(n,{setDetachable:tt(t,"setDetachable",at),setReattach:tt(t,"setReattach",at),setConnector:tt(t,"setConnector",at),delete:function(){for(var n=0,e=t.length;n<e;n++)i.deleteConnection(t[n])},isDetachable:nt(t,"isDetachable"),isReattach:nt(t,"isReattach")})},ut=function(t){var n=st(t,ut);return d.extend(n,{setEnabled:tt(t,"setEnabled",ut),setAnchor:tt(t,"setAnchor",ut),isEnabled:nt(t,"isEnabled"),deleteEveryConnection:function(){for(var n=0,e=t.length;n<e;n++)t[n].deleteEveryConnection()},delete:function(){for(var n=0,e=t.length;n<e;n++)i.deleteEndpoint(t[n])}})};this.select=function(t){return t=t||{},t.scope=t.scope||"*",at(t.connections||i.getConnections(t,!0))},this.selectEndpoints=function(t){t=t||{},t.scope=t.scope||"*";var n=!t.element&&!t.source&&!t.target,e=n?"*":et(t.element),i=n?"*":et(t.source),r=n?"*":et(t.target),o=et(t.scope,!0),s=[];for(var a in b){var u=it(e,a,!0),l=it(i,a,!0),c="*"!==i,h=it(r,a,!0),f="*"!==r;if(u||l||h)t:for(var p=0,d=b[a].length;p<d;p++){var g=b[a][p];if(it(o,g.scope,!0)){var v=c&&i.length>0&&!g.isSource,m=f&&r.length>0&&!g.isTarget;if(v||m)continue t;s.push(g)}}}return ut(s)},this.getAllConnections=function(){return y},this.getDefaultScope=function(){return D},this.getEndpoint=T,this.getEndpoints=function(t){return b[c(t).id]||[]},this.getDefaultEndpointType=function(){return d.Endpoint},this.getDefaultConnectionType=function(){return d.Connection},this.getId=H,this.draw=O,this.info=c,this.appendElement=k;var lt=!1;this.isHoverSuspended=function(){return lt},this.setHoverSuspended=function(t){lt=t},this.hide=function(t,n){return B(t,"none",n),i},this.idstamp=I;var ct=function(t){if(!p&&t){var n=i.getElement(t);n.offsetParent&&i.setContainer(n.offsetParent)}},ht=function(){i.Defaults.Container&&i.setContainer(i.Defaults.Container)},ft=i.manage=function(t,n,e,r){return P[t]?r&&(P[t].info=pt({elId:t,timestamp:S,recalc:!0})):(P[t]={el:n,endpoints:[],connections:[],rotation:0},P[t].info=pt({elId:t,timestamp:S}),i.addClass(n,"jtk-managed"),e||i.fire("manageElement",{id:t,info:P[t].info,el:n})),P[t]};this.unmanage=function(t){if(P[t]){var n=P[t].el;i.removeClass(n,"jtk-managed"),delete P[t],i.fire("unmanageElement",{id:t,el:n})}},this.rotate=function(t,n,e){return P[t]&&(P[t].rotation=n,P[t].el.style.transform="rotate("+n+"deg)",P[t].el.style.transformOrigin="center center",!0!==e)?this.revalidate(t):{c:[],e:[]}},this.getRotation=function(t){return P[t]&&P[t].rotation||0};var pt=function(t){var n,e=t.timestamp,r=t.recalc,o=t.offset,s=t.elId;return E&&!e&&(e=S),!r&&e&&e===C[s]?{o:t.offset||x[s],s:w[s]}:(r||!o&&null==x[s]?(n=P[s]?P[s].el:null,null!=n&&(w[s]=i.getSize(n),x[s]=i.getOffset(n),C[s]=e)):(x[s]=o||x[s],null==w[s]&&(n=P[s].el,null!=n&&(w[s]=i.getSize(n))),C[s]=e),x[s]&&!x[s].right&&(x[s].right=x[s].left+w[s][0],x[s].bottom=x[s].top+w[s][1],x[s].width=w[s][0],x[s].height=w[s][1],x[s].centerx=x[s].left+x[s].width/2,x[s].centery=x[s].top+x[s].height/2),{o:x[s],s:w[s]})};this.updateOffset=pt,this.init=function(){m||(ht(),i.router=new t.jsPlumb.DefaultRouter(i),i.anchorManager=i.router.anchorManager,m=!0,i.fire("ready",i))}.bind(this),this.log=v,this.jsPlumbUIComponent=l,this.makeAnchor=function(){var n,r=function(n,e){if(t.jsPlumb.Anchors[n])return new t.jsPlumb.Anchors[n](e);if(!i.Defaults.DoNotThrowErrors)throw{msg:"jsPlumb: unknown anchor type '"+n+"'"}};if(0===arguments.length)return null;var o=arguments[0],s=arguments[1],a=null;if(o.compute&&o.getOrientation)return o;if("string"===typeof o)a=r(arguments[0],{elementId:s,jsPlumbInstance:i});else if(e.isArray(o))if(e.isArray(o[0])||e.isString(o[0]))2===o.length&&e.isObject(o[1])?e.isString(o[0])?(n=t.jsPlumb.extend({elementId:s,jsPlumbInstance:i},o[1]),a=r(o[0],n)):(n=t.jsPlumb.extend({elementId:s,jsPlumbInstance:i,anchors:o[0]},o[1]),a=new t.jsPlumb.DynamicAnchor(n)):a=new d.DynamicAnchor({anchors:o,selector:null,elementId:s,jsPlumbInstance:i});else{var u={x:o[0],y:o[1],orientation:o.length>=4?[o[2],o[3]]:[0,0],offsets:o.length>=6?[o[4],o[5]]:[0,0],elementId:s,jsPlumbInstance:i,cssClass:7===o.length?o[6]:null};a=new t.jsPlumb.Anchor(u),a.clone=function(){return new t.jsPlumb.Anchor(u)}}return a.id||(a.id="anchor_"+I()),a},this.makeAnchors=function(n,r,o){for(var s=[],a=0,u=n.length;a<u;a++)"string"===typeof n[a]?s.push(t.jsPlumb.Anchors[n[a]]({elementId:r,jsPlumbInstance:o})):e.isArray(n[a])&&s.push(i.makeAnchor(n[a],r,o));return s},this.makeDynamicAnchor=function(n,e){return new t.jsPlumb.DynamicAnchor({anchors:n,selector:e,elementId:null,jsPlumbInstance:i})},this.targetEndpointDefinitions={},this.sourceEndpointDefinitions={};var dt=function(t,n,e,i,r){for(var o=t.target||t.srcElement,s=!1,a=i.getSelector(n,e),u=0;u<a.length;u++)if(a[u]===o){s=!0;break}return r?!s:s},gt=function(n,r,o,s,a){var u=new l(r),c=r._jsPlumb.EndpointDropHandler({jsPlumb:i,enabled:function(){return n.def.enabled},isFull:function(){var t=i.select({target:n.id}).length;return n.def.maxConnections>0&&t>=n.def.maxConnections},element:n.el,elementId:n.id,isSource:s,isTarget:a,addClass:function(t){i.addClass(n.el,t)},removeClass:function(t){i.removeClass(n.el,t)},onDrop:function(t){var n=t.endpoints[0];n.anchor.locked=!1},isDropAllowed:function(){return u.isDropAllowed.apply(u,arguments)},isRedrop:function(t){return null!=t.suspendedElement&&null!=t.suspendedEndpoint&&t.suspendedEndpoint.element===n.el},getEndpoint:function(e){var o=n.def.endpoint;if(null==o||null==o._jsPlumb){var s=i.deriveEndpointAndAnchorSpec(e.getType().join(" "),!0),a=s.endpoints?t.jsPlumb.extend(r,{endpoint:n.def.def.endpoint||s.endpoints[1]}):r;s.anchors&&(a=t.jsPlumb.extend(a,{anchor:n.def.def.anchor||s.anchors[1]})),o=i.addEndpoint(n.el,a),o._mtNew=!0}if(r.uniqueEndpoint&&(n.def.endpoint=o),o.setDeleteOnEmpty(!0),e.isDetachable()&&o.initDraggable(),null!=o.anchor.positionFinder){var u=i.getUIPosition(arguments,i.getZoom()),l=i.getOffset(n.el),c=i.getSize(n.el),h=null==u?[0,0]:o.anchor.positionFinder(u,l,c,o.anchor.constructorParams);o.anchor.x=h[0],o.anchor.y=h[1]}return o},maybeCleanup:function(t){t._mtNew&&0===t.connections.length?i.deleteObject({endpoint:t}):delete t._mtNew}}),h=t.jsPlumb.dragEvents.drop;return o.scope=o.scope||r.scope||i.Defaults.Scope,o[h]=e.wrap(o[h],c,!0),o.rank=r.rank||0,a&&(o[t.jsPlumb.dragEvents.over]=function(){return!0}),!1===r.allowLoopback&&(o.canDrop=function(t){var e=t.getDragElement()._jsPlumbRelatedElement;return e!==n.el}),i.initDroppable(n.el,o,"internal"),c};this.makeTarget=function(n,e,r){var o=t.jsPlumb.extend({_jsPlumb:this},r);t.jsPlumb.extend(o,e);for(var s=o.maxConnections||-1,a=function(n){var e=c(n),r=e.id,a=t.jsPlumb.extend({},o.dropOptions||{}),u=o.connectionType||"default";this.targetEndpointDefinitions[r]=this.targetEndpointDefinitions[r]||{},ct(r),e.el._isJsPlumbGroup&&null==a.rank&&(a.rank=-1);var l={def:t.jsPlumb.extend({},o),uniqueEndpoint:o.uniqueEndpoint,maxConnections:s,enabled:!0};o.createEndpoint&&(l.uniqueEndpoint=!0,l.endpoint=i.addEndpoint(n,l.def),l.endpoint.setDeleteOnEmpty(!1)),e.def=l,this.targetEndpointDefinitions[r][u]=l,gt(e,o,a,!0===o.isSource,!0),e.el._katavorioDrop[e.el._katavorioDrop.length-1].targetDef=l}.bind(this),u=n.length&&n.constructor!==String?n:[n],l=0,h=u.length;l<h;l++)a(u[l]);return this},this.unmakeTarget=function(t,n){var e=c(t);return i.destroyDroppable(e.el,"internal"),n||delete this.targetEndpointDefinitions[e.id],this},this.makeSource=function(n,r,o){var s=t.jsPlumb.extend({_jsPlumb:this},o);t.jsPlumb.extend(s,r);var a=s.connectionType||"default",l=i.deriveEndpointAndAnchorSpec(a);s.endpoint=s.endpoint||l.endpoints[0],s.anchor=s.anchor||l.anchors[0];for(var h=s.maxConnections||-1,f=s.onMaxConnections,p=function(r){var o=r.id,l=this.getElement(r.el);this.sourceEndpointDefinitions[o]=this.sourceEndpointDefinitions[o]||{},ct(o);var c={def:t.jsPlumb.extend({},s),uniqueEndpoint:s.uniqueEndpoint,maxConnections:h,enabled:!0};s.createEndpoint&&(c.uniqueEndpoint=!0,c.endpoint=i.addEndpoint(n,c.def),c.endpoint.setDeleteOnEmpty(!1)),this.sourceEndpointDefinitions[o][a]=c,r.def=c;var p=t.jsPlumb.dragEvents.stop,d=t.jsPlumb.dragEvents.drag,g=t.jsPlumb.extend({},s.dragOptions||{}),v=g.drag,m=g.stop,y=null,b=!1;g.scope=g.scope||s.scope,g[d]=e.wrap(g[d],(function(){v&&v.apply(this,arguments),b=!1})),g[p]=e.wrap(g[p],function(){if(m&&m.apply(this,arguments),this.currentlyDragging=!1,null!=y._jsPlumb){var t=s.anchor||this.Defaults.Anchor,n=y.anchor,e=y.connections[0],r=this.makeAnchor(t,o,this),a=y.element;if(null!=r.positionFinder){var u=i.getOffset(a),l=this.getSize(a),c={left:u.left+n.x*l[0],top:u.top+n.y*l[1]},h=r.positionFinder(c,u,l,r.constructorParams);r.x=h[0],r.y=h[1]}y.setAnchor(r,!0),y.repaint(),this.repaint(y.elementId),null!=e&&this.repaint(e.targetId)}}.bind(this));var _=function(n){if(3!==n.which&&2!==n.button){o=this.getId(this.getElement(r.el));var c=this.sourceEndpointDefinitions[o][a];if(c.enabled){if(s.filter){var p=e.isString(s.filter)?dt(n,r.el,s.filter,this,s.filterExclude):s.filter(n,r.el);if(!1===p)return}var d=this.select({source:o}).length;if(c.maxConnections>=0&&d>=c.maxConnections)return f&&f({element:r.el,maxConnections:h},n),!1;var v=t.jsPlumb.getPositionOnElement(n,l,u),m={};t.jsPlumb.extend(m,c.def),m.isTemporarySource=!0,m.anchor=[v[0],v[1],0,0],m.dragOptions=g,c.def.scope&&(m.scope=c.def.scope),y=this.addEndpoint(o,m),b=!0,y.setDeleteOnEmpty(!0),c.uniqueEndpoint&&(c.endpoint?y.finalEndpoint=c.endpoint:(c.endpoint=y,y.setDeleteOnEmpty(!1)));var _=function(){i.off(y.canvas,"mouseup",_),i.off(r.el,"mouseup",_),b&&(b=!1,i.deleteEndpoint(y))};i.on(y.canvas,"mouseup",_),i.on(r.el,"mouseup",_);var P={};if(c.def.extract)for(var x in c.def.extract){var C=(n.srcElement||n.target).getAttribute(x);C&&(P[c.def.extract[x]]=C)}i.trigger(y.canvas,"mousedown",n,P),e.consume(n)}}}.bind(this);this.on(r.el,"mousedown",_),c.trigger=_,s.filter&&(e.isString(s.filter)||e.isFunction(s.filter))&&i.setDragFilter(r.el,s.filter);var P=t.jsPlumb.extend({},s.dropOptions||{});gt(r,s,P,!0,!0===s.isTarget)}.bind(this),d=n.length&&n.constructor!==String?n:[n],g=0,v=d.length;g<v;g++)p(c(d[g]));return this},this.unmakeSource=function(t,n,e){var r=c(t);i.destroyDroppable(r.el,"internal");var o=this.sourceEndpointDefinitions[r.id];if(o)for(var s in o)if(null==n||n===s){var a=o[s].trigger;a&&i.off(r.el,"mousedown",a),e||delete this.sourceEndpointDefinitions[r.id][s]}return this},this.unmakeEverySource=function(){for(var t in this.sourceEndpointDefinitions)i.unmakeSource(t,null,!0);return this.sourceEndpointDefinitions={},this};var vt=function(t,n,i){n=e.isArray(n)?n:[n];var r=H(t);i=i||"default";for(var o=0;o<n.length;o++){var s=this[n[o]][r];if(s&&s[i])return s[i].def.scope||this.Defaults.Scope}}.bind(this),mt=function(t,n,i,r){i=e.isArray(i)?i:[i];var o=H(t);r=r||"default";for(var s=0;s<i.length;s++){var a=this[i[s]][o];a&&a[r]&&(a[r].def.scope=n)}}.bind(this);this.getScope=function(t,n){return vt(t,["sourceEndpointDefinitions","targetEndpointDefinitions"])},this.getSourceScope=function(t){return vt(t,"sourceEndpointDefinitions")},this.getTargetScope=function(t){return vt(t,"targetEndpointDefinitions")},this.setScope=function(t,n,e){this.setSourceScope(t,n,e),this.setTargetScope(t,n,e)},this.setSourceScope=function(t,n,e){mt(t,n,"sourceEndpointDefinitions",e),this.setDragScope(t,n)},this.setTargetScope=function(t,n,e){mt(t,n,"targetEndpointDefinitions",e),this.setDropScope(t,n)},this.unmakeEveryTarget=function(){for(var t in this.targetEndpointDefinitions)i.unmakeTarget(t,!0);return this.targetEndpointDefinitions={},this};var yt=function(t,n,r,o,s){var a,u,l,h="source"===t?this.sourceEndpointDefinitions:this.targetEndpointDefinitions;if(s=s||"default",n.length&&!e.isString(n)){a=[];for(var f=0,p=n.length;f<p;f++)u=c(n[f]),h[u.id]&&h[u.id][s]&&(a[f]=h[u.id][s].enabled,l=o?!a[f]:r,h[u.id][s].enabled=l,i[l?"removeClass":"addClass"](u.el,"jtk-"+t+"-disabled"))}else{u=c(n);var d=u.id;h[d]&&h[d][s]&&(a=h[d][s].enabled,l=o?!a:r,h[d][s].enabled=l,i[l?"removeClass":"addClass"](u.el,"jtk-"+t+"-disabled"))}return a}.bind(this),bt=function(t,n){if(null!=t){if(e.isString(t)||!t.length)return n.apply(this,[t]);if(t.length)return n.apply(this,[t[0]])}}.bind(this);this.toggleSourceEnabled=function(t,n){return yt("source",t,null,!0,n),this.isSourceEnabled(t,n)},this.setSourceEnabled=function(t,n,e){return yt("source",t,n,null,e)},this.isSource=function(t,n){return n=n||"default",bt(t,function(t){var e=this.sourceEndpointDefinitions[c(t).id];return null!=e&&null!=e[n]}.bind(this))},this.isSourceEnabled=function(t,n){return n=n||"default",bt(t,function(t){var e=this.sourceEndpointDefinitions[c(t).id];return e&&e[n]&&!0===e[n].enabled}.bind(this))},this.toggleTargetEnabled=function(t,n){return yt("target",t,null,!0,n),this.isTargetEnabled(t,n)},this.isTarget=function(t,n){return n=n||"default",bt(t,function(t){var e=this.targetEndpointDefinitions[c(t).id];return null!=e&&null!=e[n]}.bind(this))},this.isTargetEnabled=function(t,n){return n=n||"default",bt(t,function(t){var e=this.targetEndpointDefinitions[c(t).id];return e&&e[n]&&!0===e[n].enabled}.bind(this))},this.setTargetEnabled=function(t,n,e){return yt("target",t,n,null,e)},this.ready=function(t){i.bind("ready",t)};var _t=function(t,n){if("object"===typeof t&&t.length)for(var e=0,r=t.length;e<r;e++)n(t[e]);else n(t);return i};this.repaint=function(t,n,e){return _t(t,(function(t){O(t,n,e)}))},this.revalidate=function(t,n,e){var r=e?t:i.getId(t);i.updateOffset({elId:r,recalc:!0,timestamp:n});var o=i.getDragManager();return o&&o.updateOffsets(r),O(t,null,n)},this.repaintEverything=function(){var t,n=jsPlumbUtil.uuid();for(t in b)i.updateOffset({elId:t,recalc:!0,timestamp:n});for(t in b)O(t,null,n);return this},this.removeAllEndpoints=function(t,n,e){e=e||[];var r=function(t){var o,s,a=c(t),u=b[a.id];if(u)for(e.push(a),o=0,s=u.length;o<s;o++)i.deleteEndpoint(u[o],!1);if(delete b[a.id],n&&a.el&&3!==a.el.nodeType&&8!==a.el.nodeType)for(o=0,s=a.el.childNodes.length;o<s;o++)r(a.el.childNodes[o])};return r(t),this};var Pt=function(t,n){i.removeAllEndpoints(t.id,!0,n);for(var e=i.getDragManager(),r=function(t){e&&e.elementRemoved(t.id),i.router.elementRemoved(t.id),i.isSource(t.el)&&i.unmakeSource(t.el),i.isTarget(t.el)&&i.unmakeTarget(t.el),i.destroyDraggable(t.el),i.destroyDroppable(t.el),delete i.floatingConnections[t.id],delete P[t.id],delete x[t.id],t.el&&(i.removeElement(t.el),t.el._jsPlumb=null)},o=1;o<n.length;o++)r(n[o]);r(t)};this.remove=function(t,n){var e=c(t),r=[];return e.text&&e.el.parentNode?e.el.parentNode.removeChild(e.el):e.id&&i.batch((function(){Pt(e,r)}),!0===n),i},this.empty=function(t,n){var e=[],r=function(t,n){var i=c(t);if(i.text)i.el.parentNode.removeChild(i.el);else if(i.el){while(i.el.childNodes.length>0)r(i.el.childNodes[0]);n||Pt(i,e)}};return i.batch((function(){r(t,!0)}),!1===n),i},this.reset=function(t){i.silently(function(){lt=!1,i.removeAllGroups(),i.removeGroupManager(),i.deleteEveryEndpoint(),t||i.unbind(),this.targetEndpointDefinitions={},this.sourceEndpointDefinitions={},y.length=0,this.doReset&&this.doReset()}.bind(this))},this.destroy=function(){this.reset(),p=null,g=null};var xt=function(t){t.canvas&&t.canvas.parentNode&&t.canvas.parentNode.removeChild(t.canvas),t.cleanup(),t.destroy()};this.clear=function(){i.select().each(xt),i.selectEndpoints().each(xt),b={},_={}},this.setDefaultScope=function(t){return D=t,i},this.deriveEndpointAndAnchorSpec=function(t,n){for(var e=((n?"":"default ")+t).split(/[\s]/),r=null,o=null,s=null,a=null,u=0;u<e.length;u++){var l=i.getType(e[u],"connection");l&&(l.endpoints&&(r=l.endpoints),l.endpoint&&(o=l.endpoint),l.anchors&&(a=l.anchors),l.anchor&&(s=l.anchor))}return{endpoints:r||[o,o],anchors:a||[s,s]}},this.setId=function(t,n,i){var r;e.isString(t)?r=t:(t=this.getElement(t),r=this.getId(t));var o=this.getConnections({source:r,scope:"*"},!0),s=this.getConnections({target:r,scope:"*"},!0);n=""+n,i?t=this.getElement(n):(t=this.getElement(r),this.setAttribute(t,"id",n)),b[n]=b[r]||[];for(var a=0,u=b[n].length;a<u;a++)b[n][a].setElementId(n),b[n][a].setReferenceElement(t);delete b[r],this.sourceEndpointDefinitions[n]=this.sourceEndpointDefinitions[r],delete this.sourceEndpointDefinitions[r],this.targetEndpointDefinitions[n]=this.targetEndpointDefinitions[r],delete this.targetEndpointDefinitions[r],this.router.changeId(r,n);var l=this.getDragManager();l&&l.changeId(r,n),P[n]=P[r],delete P[r];var c=function(e,i,r){for(var o=0,s=e.length;o<s;o++)e[o].endpoints[i].setElementId(n),e[o].endpoints[i].setReferenceElement(t),e[o][r+"Id"]=n,e[o][r]=t};c(o,0,"source"),c(s,1,"target"),this.repaint(n)},this.setDebugLog=function(t){v=t},this.setSuspendDrawing=function(t,n){var e=E;return E=t,S=t?(new Date).getTime():null,n&&this.repaintEverything(),e},this.isSuspendDrawing=function(){return E},this.getSuspendedAt=function(){return S},this.batch=function(t,n){var i=this.isSuspendDrawing();i||this.setSuspendDrawing(!0);try{t()}catch(r){e.log("Function run while suspended failed",r)}i||this.setSuspendDrawing(!1,!n)},this.doWhileSuspended=this.batch,this.getCachedData=W,this.show=function(t,n){return B(t,"block",n),i},this.toggleVisible=z,this.addListener=this.bind;var Ct=[];this.registerFloatingConnection=function(t,n,i){Ct[t.id]=n,e.addToList(b,t.id,i)},this.getFloatingConnectionFor=function(t){return Ct[t]},this.listManager=new t.jsPlumbListManager(this,this.Defaults.ListStyle)};e.extend(t.jsPlumbInstance,e.EventGenerator,{setAttribute:function(t,n,e){this.setAttribute(t,n,e)},getAttribute:function(n,e){return this.getAttribute(t.jsPlumb.getElement(n),e)},convertToFullOverlaySpec:function(t){return e.isString(t)&&(t=[t,{}]),t[1].id=t[1].id||e.uuid(),t},registerConnectionType:function(n,e){if(this._connectionTypes[n]=t.jsPlumb.extend({},e),e.overlays){for(var i={},r=0;r<e.overlays.length;r++){var o=this.convertToFullOverlaySpec(e.overlays[r]);i[o[1].id]=o}this._connectionTypes[n].overlays=i}},registerConnectionTypes:function(t){for(var n in t)this.registerConnectionType(n,t[n])},registerEndpointType:function(n,e){if(this._endpointTypes[n]=t.jsPlumb.extend({},e),e.overlays){for(var i={},r=0;r<e.overlays.length;r++){var o=this.convertToFullOverlaySpec(e.overlays[r]);i[o[1].id]=o}this._endpointTypes[n].overlays=i}},registerEndpointTypes:function(t){for(var n in t)this.registerEndpointType(n,t[n])},getType:function(t,n){return"connection"===n?this._connectionTypes[t]:this._endpointTypes[t]},setIdChanged:function(t,n){this.setId(t,n,!0)},setParent:function(t,n){var e=this.getElement(t),i=this.getId(e),r=this.getElement(n),o=this.getId(r),s=this.getDragManager();e.parentNode.removeChild(e),r.appendChild(e),s&&s.setParent(e,i,r,o)},extend:function(t,n,e){var i;if(e)for(i=0;i<e.length;i++)t[e[i]]=n[e[i]];else for(i in n)t[i]=n[i];return t},floatingConnections:{},getFloatingAnchorIndex:function(t){return t.endpoints[0].isFloating()?0:t.endpoints[1].isFloating()?1:-1},proxyConnection:function(t,n,e,i,r,o){var s,a=t.endpoints[n].elementId,u=t.endpoints[n];t.proxies=t.proxies||[],s=t.proxies[n]?t.proxies[n].ep:this.addEndpoint(e,{endpoint:r(t,n),anchor:o(t,n),parameters:{isProxyEndpoint:!0}}),s.setDeleteOnEmpty(!0),t.proxies[n]={ep:s,originalEp:u},0===n?this.router.sourceOrTargetChanged(a,i,t,e,0):this.router.sourceOrTargetChanged(a,i,t,e,1),u.detachFromConnection(t,null,!0),s.connections=[t],t.endpoints[n]=s,u.setVisible(!1),t.setVisible(!0),this.revalidate(e)},unproxyConnection:function(t,n,e){if(null!=t._jsPlumb&&null!=t.proxies&&null!=t.proxies[n]){var i=t.proxies[n].originalEp.element,r=t.proxies[n].originalEp.elementId;t.endpoints[n]=t.proxies[n].originalEp,0===n?this.router.sourceOrTargetChanged(e,r,t,i,0):this.router.sourceOrTargetChanged(e,r,t,i,1),t.proxies[n].ep.detachFromConnection(t,null),t.proxies[n].originalEp.addConnection(t),t.isVisible()&&t.proxies[n].originalEp.setVisible(!0),delete t.proxies[n]}}});var d=new p;t.jsPlumb=d,d.getInstance=function(t,n){var e=new p(t);if(n)for(var i in n)e[i]=n[i];return e.init(),e},d.each=function(t,n){if(null!=t)if("string"===typeof t)n(d.getElement(t));else if(null!=t.length)for(var e=0;e<t.length;e++)n(d.getElement(t[e]));else n(t)},n.jsPlumb=d}.call("undefined"!==typeof window?window:this),function(){"use strict";var t=this,n=t.jsPlumb,e=t.jsPlumbUtil,i="__label",r=function(t,e){var r={cssClass:e.cssClass,labelStyle:t.labelStyle,id:i,component:t,_jsPlumb:t._jsPlumb.instance},o=n.extend(r,e);return new(n.Overlays[t._jsPlumb.instance.getRenderMode()].Label)(o)},o=function(t,i){var r=null;if(e.isArray(i)){var o=i[0],s=n.extend({component:t,_jsPlumb:t._jsPlumb.instance},i[1]);3===i.length&&n.extend(s,i[2]),r=new(n.Overlays[t._jsPlumb.instance.getRenderMode()][o])(s)}else r=i.constructor===String?new(n.Overlays[t._jsPlumb.instance.getRenderMode()][i])({component:t,_jsPlumb:t._jsPlumb.instance}):i;return r.id=r.id||e.uuid(),t.cacheTypeItem("overlay",r,r.id),t._jsPlumb.overlays[r.id]=r,r};n.OverlayCapableJsPlumbUIComponent=function(n){t.jsPlumbUIComponent.apply(this,arguments),this._jsPlumb.overlays={},this._jsPlumb.overlayPositions={},n.label&&(this.getDefaultType().overlays[i]=["Label",{label:n.label,location:n.labelLocation||this.defaultLabelLocation||.5,labelStyle:n.labelStyle||this._jsPlumb.instance.Defaults.LabelStyle,id:i}]),this.setListenerComponent=function(t){if(this._jsPlumb)for(var n in this._jsPlumb.overlays)this._jsPlumb.overlays[n].setListenerComponent(t)}},n.OverlayCapableJsPlumbUIComponent.applyType=function(t,n){if(n.overlays){var e,i={};for(e in n.overlays){var r=t._jsPlumb.overlays[n.overlays[e][1].id];if(r)r.updateFrom(n.overlays[e][1]),i[n.overlays[e][1].id]=!0,r.reattach(t._jsPlumb.instance,t);else{var o=t.getCachedTypeItem("overlay",n.overlays[e][1].id);null!=o?(o.reattach(t._jsPlumb.instance,t),o.setVisible(!0),o.updateFrom(n.overlays[e][1]),t._jsPlumb.overlays[o.id]=o):o=t.addOverlay(n.overlays[e],!0),i[o.id]=!0}}for(e in t._jsPlumb.overlays)null==i[t._jsPlumb.overlays[e].id]&&t.removeOverlay(t._jsPlumb.overlays[e].id,!0)}},e.extend(n.OverlayCapableJsPlumbUIComponent,t.jsPlumbUIComponent,{setHover:function(t,n){if(this._jsPlumb&&!this._jsPlumb.instance.isConnectionBeingDragged())for(var e in this._jsPlumb.overlays)this._jsPlumb.overlays[e][t?"addClass":"removeClass"](this._jsPlumb.instance.hoverClass)},addOverlay:function(t,n){var i=o(this,t);if(this.getData&&"Label"===i.type&&e.isArray(t)){var r=this.getData(),s=t[1];if(r){var a=s.labelLocationAttribute||"labelLocation",u=r?r[a]:null;u&&(i.loc=u)}}return n||this.repaint(),i},getOverlay:function(t){return this._jsPlumb.overlays[t]},getOverlays:function(){return this._jsPlumb.overlays},hideOverlay:function(t){var n=this.getOverlay(t);n&&n.hide()},hideOverlays:function(){for(var t in this._jsPlumb.overlays)this._jsPlumb.overlays[t].hide()},showOverlay:function(t){var n=this.getOverlay(t);n&&n.show()},showOverlays:function(){for(var t in this._jsPlumb.overlays)this._jsPlumb.overlays[t].show()},removeAllOverlays:function(t){for(var n in this._jsPlumb.overlays)this._jsPlumb.overlays[n].cleanup&&this._jsPlumb.overlays[n].cleanup();this._jsPlumb.overlays={},this._jsPlumb.overlayPositions=null,this._jsPlumb.overlayPlacements={},t||this.repaint()},removeOverlay:function(t,n){var e=this._jsPlumb.overlays[t];e&&(e.setVisible(!1),!n&&e.cleanup&&e.cleanup(),delete this._jsPlumb.overlays[t],this._jsPlumb.overlayPositions&&delete this._jsPlumb.overlayPositions[t],this._jsPlumb.overlayPlacements&&delete this._jsPlumb.overlayPlacements[t])},removeOverlays:function(){for(var t=0,n=arguments.length;t<n;t++)this.removeOverlay(arguments[t])},moveParent:function(t){if(this.bgCanvas&&(this.bgCanvas.parentNode.removeChild(this.bgCanvas),t.appendChild(this.bgCanvas)),this.canvas&&this.canvas.parentNode)for(var n in this.canvas.parentNode.removeChild(this.canvas),t.appendChild(this.canvas),this._jsPlumb.overlays)if(this._jsPlumb.overlays[n].isAppendedAtTopLevel){var e=this._jsPlumb.overlays[n].getElement();e.parentNode.removeChild(e),t.appendChild(e)}},getLabel:function(){var t=this.getOverlay(i);return null!=t?t.getLabel():null},getLabelOverlay:function(){return this.getOverlay(i)},setLabel:function(t){var n=this.getOverlay(i);if(n)t.constructor===String||t.constructor===Function?n.setLabel(t):(t.label&&n.setLabel(t.label),t.location&&n.setLocation(t.location));else{var e=t.constructor===String||t.constructor===Function?{label:t}:t;n=r(this,e),this._jsPlumb.overlays[i]=n}this._jsPlumb.instance.isSuspendDrawing()||this.repaint()},cleanup:function(t){for(var n in this._jsPlumb.overlays)this._jsPlumb.overlays[n].cleanup(t),this._jsPlumb.overlays[n].destroy(t);t&&(this._jsPlumb.overlays={},this._jsPlumb.overlayPositions=null)},setVisible:function(t){this[t?"showOverlays":"hideOverlays"]()},setAbsoluteOverlayPosition:function(t,n){this._jsPlumb.overlayPositions[t.id]=n},getAbsoluteOverlayPosition:function(t){return this._jsPlumb.overlayPositions?this._jsPlumb.overlayPositions[t.id]:null},_clazzManip:function(t,n,e){if(!e)for(var i in this._jsPlumb.overlays)this._jsPlumb.overlays[i][t+"Class"](n)},addClass:function(t,n){this._clazzManip("add",t,n)},removeClass:function(t,n){this._clazzManip("remove",t,n)}})}.call("undefined"!==typeof window?window:this),function(){"use strict";var t=this,n=t.jsPlumb,e=t.jsPlumbUtil,i=function(t,n,e){var i=!1;return{drag:function(){if(i)return i=!1,!0;if(n.element){var r=e.getUIPosition(arguments,e.getZoom());null!=r&&e.setPosition(n.element,r),e.repaint(n.element,r),t.paint({anchorPoint:t.anchor.getCurrentLocation({element:t})})}},stopDrag:function(){i=!0}}},r=function(t,n,e,i){var r=n.createElement("div",{position:"absolute"});n.appendElement(r);var o=n.getId(r);n.setPosition(r,e),r.style.width=i[0]+"px",r.style.height=i[1]+"px",n.manage(o,r,!0),t.id=o,t.element=r},o=function(t,e,i,r,o,s,a,u){var l=new n.FloatingAnchor({reference:e,referenceCanvas:r,jsPlumbInstance:s});return a({paintStyle:t,endpoint:i,anchor:l,source:o,scope:u})},s=["connectorStyle","connectorHoverStyle","connectorOverlays","connector","connectionType","connectorClass","connectorHoverClass"],a=function(t,n){var e=0;if(null!=n)for(var i=0;i<t.connections.length;i++)if(t.connections[i].sourceId===n||t.connections[i].targetId===n){e=i;break}return t.connections[e]};n.Endpoint=function(t){var u=t._jsPlumb,l=t.newConnection,c=t.newEndpoint;this.idPrefix="_jsplumb_e_",this.defaultLabelLocation=[.5,.5],this.defaultOverlayKeys=["Overlays","EndpointOverlays"],n.OverlayCapableJsPlumbUIComponent.apply(this,arguments),this.appendToDefaultType({connectionType:t.connectionType,maxConnections:null==t.maxConnections?this._jsPlumb.instance.Defaults.MaxConnections:t.maxConnections,paintStyle:t.endpointStyle||t.paintStyle||t.style||this._jsPlumb.instance.Defaults.EndpointStyle||n.Defaults.EndpointStyle,hoverPaintStyle:t.endpointHoverStyle||t.hoverPaintStyle||this._jsPlumb.instance.Defaults.EndpointHoverStyle||n.Defaults.EndpointHoverStyle,connectorStyle:t.connectorStyle,connectorHoverStyle:t.connectorHoverStyle,connectorClass:t.connectorClass,connectorHoverClass:t.connectorHoverClass,connectorOverlays:t.connectorOverlays,connector:t.connector,connectorTooltip:t.connectorTooltip}),this._jsPlumb.enabled=!(!1===t.enabled),this._jsPlumb.visible=!0,this.element=n.getElement(t.source),this._jsPlumb.uuid=t.uuid,this._jsPlumb.floatingEndpoint=null;var h=null;this._jsPlumb.uuid&&(t.endpointsByUUID[this._jsPlumb.uuid]=this),this.elementId=t.elementId,this.dragProxy=t.dragProxy,this._jsPlumb.connectionCost=t.connectionCost,this._jsPlumb.connectionsDirected=t.connectionsDirected,this._jsPlumb.currentAnchorClass="",this._jsPlumb.events={};var f=!0===t.deleteOnEmpty;this.setDeleteOnEmpty=function(t){f=t};var p=function(){var t=u.endpointAnchorClassPrefix+"-"+this._jsPlumb.currentAnchorClass;this._jsPlumb.currentAnchorClass=this.anchor.getCssClass();var e=u.endpointAnchorClassPrefix+(this._jsPlumb.currentAnchorClass?"-"+this._jsPlumb.currentAnchorClass:"");this.removeClass(t),this.addClass(e),n.updateClasses(this.element,e,t)}.bind(this);this.prepareAnchor=function(t){var n=this._jsPlumb.instance.makeAnchor(t,this.elementId,u);return n.bind("anchorChanged",function(t){this.fire("anchorChanged",{endpoint:this,anchor:t}),p()}.bind(this)),n},this.setPreparedAnchor=function(t,n){return this._jsPlumb.instance.continuousAnchorFactory.clear(this.elementId),this.anchor=t,p(),n||this._jsPlumb.instance.repaint(this.elementId),this},this.setAnchor=function(t,n){var e=this.prepareAnchor(t);return this.setPreparedAnchor(e,n),this};var d=function(t){if(this.connections.length>0)for(var n=0;n<this.connections.length;n++)this.connections[n].setHover(t,!1);else this.setHover(t)}.bind(this);this.bind("mouseover",(function(){d(!0)})),this.bind("mouseout",(function(){d(!1)})),t._transient||this._jsPlumb.instance.router.addEndpoint(this,this.elementId),this.prepareEndpoint=function(i,r){var o,s=function(t,e){var i=u.getRenderMode();if(n.Endpoints[i][t])return new n.Endpoints[i][t](e);if(!u.Defaults.DoNotThrowErrors)throw{msg:"jsPlumb: unknown endpoint type '"+t+"'"}},a={_jsPlumb:this._jsPlumb.instance,cssClass:t.cssClass,container:t.container,tooltip:t.tooltip,connectorTooltip:t.connectorTooltip,endpoint:this};return e.isString(i)?o=s(i,a):e.isArray(i)?(a=e.merge(i[1],a),o=s(i[0],a)):o=i.clone(),o.clone=function(){return e.isString(i)?s(i,a):e.isArray(i)?(a=e.merge(i[1],a),s(i[0],a)):void 0}.bind(this),o.typeId=r,o},this.setEndpoint=function(t,n){var e=this.prepareEndpoint(t);this.setPreparedEndpoint(e,!0)},this.setPreparedEndpoint=function(t,n){null!=this.endpoint&&(this.endpoint.cleanup(),this.endpoint.destroy()),this.endpoint=t,this.type=this.endpoint.type,this.canvas=this.endpoint.canvas},n.extend(this,t,s),this.isSource=t.isSource||!1,this.isTemporarySource=t.isTemporarySource||!1,this.isTarget=t.isTarget||!1,this.connections=t.connections||[],this.connectorPointerEvents=t["connector-pointer-events"],this.scope=t.scope||u.getDefaultScope(),this.timestamp=null,this.reattachConnections=t.reattach||u.Defaults.ReattachConnections,this.connectionsDetachable=u.Defaults.ConnectionsDetachable,!1!==t.connectionsDetachable&&!1!==t.detachable||(this.connectionsDetachable=!1),this.dragAllowedWhenFull=!1!==t.dragAllowedWhenFull,t.onMaxConnections&&this.bind("maxConnections",t.onMaxConnections),this.addConnection=function(t){this.connections.push(t),this[(this.connections.length>0?"add":"remove")+"Class"](u.endpointConnectedClass),this[(this.isFull()?"add":"remove")+"Class"](u.endpointFullClass)},this.detachFromConnection=function(t,n,e){n=null==n?this.connections.indexOf(t):n,n>=0&&(this.connections.splice(n,1),this[(this.connections.length>0?"add":"remove")+"Class"](u.endpointConnectedClass),this[(this.isFull()?"add":"remove")+"Class"](u.endpointFullClass)),!e&&f&&0===this.connections.length&&u.deleteObject({endpoint:this,fireEvent:!1,deleteAttachedObjects:!0!==e})},this.deleteEveryConnection=function(t){for(var n=this.connections.length,e=0;e<n;e++)u.deleteConnection(this.connections[0],t)},this.detachFrom=function(t,n,e){for(var i=[],r=0;r<this.connections.length;r++)this.connections[r].endpoints[1]!==t&&this.connections[r].endpoints[0]!==t||i.push(this.connections[r]);for(var o=0,s=i.length;o<s;o++)u.deleteConnection(i[0]);return this},this.getElement=function(){return this.element},this.setElement=function(i){var r=this._jsPlumb.instance.getId(i),o=this.elementId;return e.removeWithFunction(t.endpointsByElement[this.elementId],function(t){return t.id===this.id}.bind(this)),this.element=n.getElement(i),this.elementId=u.getId(this.element),u.router.rehomeEndpoint(this,o,this.element),u.dragManager.endpointAdded(this.element),e.addToList(t.endpointsByElement,r,this),this},this.makeInPlaceCopy=function(){var n=this.anchor.getCurrentLocation({element:this}),e=this.anchor.getOrientation(this),i=this.anchor.getCssClass(),r={bind:function(){},compute:function(){return[n[0],n[1]]},getCurrentLocation:function(){return[n[0],n[1]]},getOrientation:function(){return e},getCssClass:function(){return i}};return c({dropOptions:t.dropOptions,anchor:r,source:this.element,paintStyle:this.getPaintStyle(),endpoint:t.hideOnDrag?"Blank":this.endpoint,_transient:!0,scope:this.scope,reference:this})},this.connectorSelector=function(){return this.connections[0]},this.setStyle=this.setPaintStyle,this.paint=function(t){t=t||{};var n=t.timestamp,e=!(!1===t.recalc);if(!n||this.timestamp!==n){var i=u.updateOffset({elId:this.elementId,timestamp:n}),r=t.offset?t.offset.o:i.o;if(null!=r){var o=t.anchorPoint,s=t.connectorPaintStyle;if(null==o){var l=t.dimensions||i.s,c={xy:[r.left,r.top],wh:l,element:this,timestamp:n};if(e&&this.anchor.isDynamic&&this.connections.length>0){var h=a(this,t.elementWithPrecedence),f=h.endpoints[0]===this?1:0,p=0===f?h.sourceId:h.targetId,d=u.getCachedData(p),g=d.o,v=d.s;c.index=0===f?1:0,c.connection=h,c.txy=[g.left,g.top],c.twh=v,c.tElement=h.endpoints[f],c.tRotation=u.getRotation(p)}else this.connections.length>0&&(c.connection=this.connections[0]);c.rotation=u.getRotation(this.elementId),o=this.anchor.compute(c)}for(var m in this.endpoint.compute(o,this.anchor.getOrientation(this),this._jsPlumb.paintStyleInUse,s||this.paintStyleInUse),this.endpoint.paint(this._jsPlumb.paintStyleInUse,this.anchor),this.timestamp=n,this._jsPlumb.overlays)if(this._jsPlumb.overlays.hasOwnProperty(m)){var y=this._jsPlumb.overlays[m];y.isVisible()&&(this._jsPlumb.overlayPlacements[m]=y.draw(this.endpoint,this._jsPlumb.paintStyleInUse),y.paint(this._jsPlumb.overlayPlacements[m]))}}}},this.getTypeDescriptor=function(){return"endpoint"},this.isVisible=function(){return this._jsPlumb.visible},this.repaint=this.paint;var g=!1;this.initDraggable=function(){if(!g&&n.isDragSupported(this.element)){var s,a={id:null,element:null},f=null,p=!1,d=null,v=i(this,a,u),m=t.dragOptions||{},y={},b=n.dragEvents.start,_=n.dragEvents.stop,P=n.dragEvents.drag,x=n.dragEvents.beforeStart,C=function(t){s=t.e.payload||{}},j=function(e){f=this.connectorSelector();var i=!0;this.isEnabled()||(i=!1),null!=f||this.isSource||this.isTemporarySource||(i=!1),!this.isSource||!this.isFull()||null!=f&&this.dragAllowedWhenFull||(i=!1),null==f||f.isDetachable(this)||(this.isFull()?i=!1:f=null);var h=u.checkCondition(null==f?"beforeDrag":"beforeStartDetach",{endpoint:this,source:this.element,sourceId:this.elementId,connection:f});if(!1===h?i=!1:"object"===typeof h?n.extend(h,s||{}):h=s||{},!1===i)return u.stopDrag&&u.stopDrag(this.canvas),v.stopDrag(),!1;for(var g=0;g<this.connections.length;g++)this.connections[g].setHover(!1);this.addClass("endpointDrag"),u.setConnectionBeingDragged(!0),f&&!this.isFull()&&this.isSource&&(f=null),u.updateOffset({elId:this.elementId});var m=this._jsPlumb.instance.getOffset(this.canvas),y=this.canvas,b=this._jsPlumb.instance.getSize(this.canvas);r(a,u,m,b),u.setAttributes(this.canvas,{dragId:a.id,elId:this.elementId});var _=this.dragProxy||this.endpoint;if(null==this.dragProxy&&null!=this.connectionType){var P=this._jsPlumb.instance.deriveEndpointAndAnchorSpec(this.connectionType);P.endpoints[1]&&(_=P.endpoints[1])}var x=this._jsPlumb.instance.makeAnchor("Center");x.isFloating=!0,this._jsPlumb.floatingEndpoint=o(this.getPaintStyle(),x,_,this.canvas,a.element,u,c,this.scope);var C=this._jsPlumb.floatingEndpoint.anchor;if(null==f)this.setHover(!1,!1),f=l({sourceEndpoint:this,targetEndpoint:this._jsPlumb.floatingEndpoint,source:this.element,target:a.element,anchors:[this.anchor,this._jsPlumb.floatingEndpoint.anchor],paintStyle:t.connectorStyle,hoverPaintStyle:t.connectorHoverStyle,connector:t.connector,overlays:t.connectorOverlays,type:this.connectionType,cssClass:this.connectorClass,hoverClass:this.connectorHoverClass,scope:t.scope,data:h}),f.pending=!0,f.addClass(u.draggingClass),this._jsPlumb.floatingEndpoint.addClass(u.draggingClass),this._jsPlumb.floatingEndpoint.anchor=C,u.fire("connectionDrag",f),u.router.newConnection(f);else{p=!0,f.setHover(!1);var j=f.endpoints[0].id===this.id?0:1;this.detachFromConnection(f,null,!0);var w=u.getDragScope(y);u.setAttribute(this.canvas,"originalScope",w),u.fire("connectionDrag",f),0===j?(d=[f.source,f.sourceId,y,w],u.router.sourceOrTargetChanged(f.endpoints[j].elementId,a.id,f,a.element,0)):(d=[f.target,f.targetId,y,w],u.router.sourceOrTargetChanged(f.endpoints[j].elementId,a.id,f,a.element,1)),f.suspendedEndpoint=f.endpoints[j],f.suspendedElement=f.endpoints[j].getElement(),f.suspendedElementId=f.endpoints[j].elementId,f.suspendedElementType=0===j?"source":"target",f.suspendedEndpoint.setHover(!1),this._jsPlumb.floatingEndpoint.referenceEndpoint=f.suspendedEndpoint,f.endpoints[j]=this._jsPlumb.floatingEndpoint,f.addClass(u.draggingClass),this._jsPlumb.floatingEndpoint.addClass(u.draggingClass)}u.registerFloatingConnection(a,f,this._jsPlumb.floatingEndpoint),u.currentlyDragging=!0}.bind(this),w=function(){if(u.setConnectionBeingDragged(!1),f&&null!=f.endpoints){var t=u.getDropEvent(arguments),n=u.getFloatingAnchorIndex(f);if(f.endpoints[0===n?1:0].anchor.locked=!1,f.removeClass(u.draggingClass),this._jsPlumb&&(f.deleteConnectionNow||f.endpoints[n]===this._jsPlumb.floatingEndpoint)&&p&&f.suspendedEndpoint){0===n?(f.floatingElement=f.source,f.floatingId=f.sourceId,f.floatingEndpoint=f.endpoints[0],f.floatingIndex=0,f.source=d[0],f.sourceId=d[1]):(f.floatingElement=f.target,f.floatingId=f.targetId,f.floatingEndpoint=f.endpoints[1],f.floatingIndex=1,f.target=d[0],f.targetId=d[1]);var e=this._jsPlumb.floatingEndpoint;u.setDragScope(d[2],d[3]),f.endpoints[n]=f.suspendedEndpoint,f.isReattach()||f._forceReattach||f._forceDetach||!u.deleteConnection(f,{originalEvent:t})?(f.setHover(!1),f._forceDetach=null,f._forceReattach=null,this._jsPlumb.floatingEndpoint.detachFromConnection(f),f.suspendedEndpoint.addConnection(f),1===n?u.router.sourceOrTargetChanged(f.floatingId,f.targetId,f,f.target,n):u.router.sourceOrTargetChanged(f.floatingId,f.sourceId,f,f.source,n),u.repaint(d[1])):u.deleteObject({endpoint:e})}this.deleteAfterDragStop?u.deleteObject({endpoint:this}):this._jsPlumb&&this.paint({recalc:!1}),u.fire("connectionDragStop",f,t),f.pending&&u.fire("connectionAborted",f,t),u.currentlyDragging=!1,f.suspendedElement=null,f.suspendedEndpoint=null,f=null}a&&a.element&&u.remove(a.element,!1,!1),h&&u.deleteObject({endpoint:h}),this._jsPlumb&&(this.canvas.style.visibility="visible",this.anchor.locked=!1,this._jsPlumb.floatingEndpoint=null)}.bind(this);m=n.extend(y,m),m.scope=this.scope||m.scope,m[x]=e.wrap(m[x],C,!1),m[b]=e.wrap(m[b],j,!1),m[P]=e.wrap(m[P],v.drag),m[_]=e.wrap(m[_],w),m.multipleDrop=!1,m.canDrag=function(){return this.isSource||this.isTemporarySource||this.connections.length>0&&!1!==this.connectionsDetachable}.bind(this),u.initDraggable(this.canvas,m,"internal"),this.canvas._jsPlumbRelatedElement=this.element,g=!0}};var v=t.endpoint||this._jsPlumb.instance.Defaults.Endpoint||n.Defaults.Endpoint;this.setEndpoint(v,!0);var m=t.anchor?t.anchor:t.anchors?t.anchors:u.Defaults.Anchor||"Top";this.setAnchor(m,!0);var y=["default",t.type||""].join(" ");this.addType(y,t.data,!0),this.canvas=this.endpoint.canvas,this.canvas._jsPlumb=this,this.initDraggable();var b=function(i,r,o,s){if(n.isDropSupported(this.element)){var a=t.dropOptions||u.Defaults.DropOptions||n.Defaults.DropOptions;a=n.extend({},a),a.scope=a.scope||this.scope;var l=n.dragEvents.drop,c=n.dragEvents.over,h=n.dragEvents.out,f=this,p=u.EndpointDropHandler({getEndpoint:function(){return f},jsPlumb:u,enabled:function(){return null==o||o.isEnabled()},isFull:function(){return o.isFull()},element:this.element,elementId:this.elementId,isSource:this.isSource,isTarget:this.isTarget,addClass:function(t){f.addClass(t)},removeClass:function(t){f.removeClass(t)},isDropAllowed:function(){return f.isDropAllowed.apply(f,arguments)},reference:s,isRedrop:function(t,n){return t.suspendedEndpoint&&n.reference&&t.suspendedEndpoint.id===n.reference.id}});a[l]=e.wrap(a[l],p,!0),a[c]=e.wrap(a[c],function(){var t=n.getDragObject(arguments),e=u.getAttribute(n.getElement(t),"dragId"),i=u.getFloatingConnectionFor(e);if(null!=i){var r=u.getFloatingAnchorIndex(i),o=this.isTarget&&0!==r||i.suspendedEndpoint&&this.referenceEndpoint&&this.referenceEndpoint.id===i.suspendedEndpoint.id;if(o){var s=u.checkCondition("checkDropAllowed",{sourceEndpoint:i.endpoints[r],targetEndpoint:this,connection:i});this[(s?"add":"remove")+"Class"](u.endpointDropAllowedClass),this[(s?"remove":"add")+"Class"](u.endpointDropForbiddenClass),i.endpoints[r].anchor.over(this.anchor,this)}}}.bind(this)),a[h]=e.wrap(a[h],function(){var t=n.getDragObject(arguments),e=null==t?null:u.getAttribute(n.getElement(t),"dragId"),i=e?u.getFloatingConnectionFor(e):null;if(null!=i){var r=u.getFloatingAnchorIndex(i),o=this.isTarget&&0!==r||i.suspendedEndpoint&&this.referenceEndpoint&&this.referenceEndpoint.id===i.suspendedEndpoint.id;o&&(this.removeClass(u.endpointDropAllowedClass),this.removeClass(u.endpointDropForbiddenClass),i.endpoints[r].anchor.out())}}.bind(this)),u.initDroppable(i,a,"internal",r)}}.bind(this);return this.anchor.isFloating||b(this.canvas,!(t._transient||this.anchor.isFloating),this,t.reference),this},e.extend(n.Endpoint,n.OverlayCapableJsPlumbUIComponent,{setVisible:function(t,n,e){if(this._jsPlumb.visible=t,this.canvas&&(this.canvas.style.display=t?"block":"none"),this[t?"showOverlays":"hideOverlays"](),!n)for(var i=0;i<this.connections.length;i++)if(this.connections[i].setVisible(t),!e){var r=this===this.connections[i].endpoints[0]?1:0;1===this.connections[i].endpoints[r].connections.length&&this.connections[i].endpoints[r].setVisible(t,!0,!0)}},getAttachedElements:function(){return this.connections},applyType:function(t,e){this.setPaintStyle(t.endpointStyle||t.paintStyle,e),this.setHoverPaintStyle(t.endpointHoverStyle||t.hoverPaintStyle,e),null!=t.maxConnections&&(this._jsPlumb.maxConnections=t.maxConnections),t.scope&&(this.scope=t.scope),n.extend(this,t,s),null!=t.cssClass&&this.canvas&&this._jsPlumb.instance.addClass(this.canvas,t.cssClass),n.OverlayCapableJsPlumbUIComponent.applyType(this,t)},isEnabled:function(){return this._jsPlumb.enabled},setEnabled:function(t){this._jsPlumb.enabled=t},cleanup:function(){var t=this._jsPlumb.instance.endpointAnchorClassPrefix+(this._jsPlumb.currentAnchorClass?"-"+this._jsPlumb.currentAnchorClass:"");n.removeClass(this.element,t),this.anchor=null,this.endpoint.cleanup(!0),this.endpoint.destroy(),this.endpoint=null,this._jsPlumb.instance.destroyDraggable(this.canvas,"internal"),this._jsPlumb.instance.destroyDroppable(this.canvas,"internal")},setHover:function(t){this.endpoint&&this._jsPlumb&&!this._jsPlumb.instance.isConnectionBeingDragged()&&this.endpoint.setHover(t)},isFull:function(){return 0===this._jsPlumb.maxConnections||!(this.isFloating()||this._jsPlumb.maxConnections<0||this.connections.length<this._jsPlumb.maxConnections)},isFloating:function(){return null!=this.anchor&&this.anchor.isFloating},isConnectedTo:function(t){var n=!1;if(t)for(var e=0;e<this.connections.length;e++)if(this.connections[e].endpoints[1]===t||this.connections[e].endpoints[0]===t){n=!0;break}return n},getConnectionCost:function(){return this._jsPlumb.connectionCost},setConnectionCost:function(t){this._jsPlumb.connectionCost=t},areConnectionsDirected:function(){return this._jsPlumb.connectionsDirected},setConnectionsDirected:function(t){this._jsPlumb.connectionsDirected=t},setElementId:function(t){this.elementId=t,this.anchor.elementId=t},setReferenceElement:function(t){this.element=n.getElement(t)},setDragAllowedWhenFull:function(t){this.dragAllowedWhenFull=t},equals:function(t){return this.anchor.equals(t.anchor)},getUuid:function(){return this._jsPlumb.uuid},computeAnchor:function(t){return this.anchor.compute(t)}}),t.jsPlumbInstance.prototype.EndpointDropHandler=function(t){return function(n){var i=t.jsPlumb;t.removeClass(i.endpointDropAllowedClass),t.removeClass(i.endpointDropForbiddenClass);var r=i.getDropEvent(arguments),o=i.getDragObject(arguments),s=i.getAttribute(o,"dragId"),a=(i.getAttribute(o,"elId"),i.getAttribute(o,"originalScope")),u=i.getFloatingConnectionFor(s);if(null!=u){var l=null!=u.suspendedEndpoint;if(!l||null!=u.suspendedEndpoint._jsPlumb){var c=t.getEndpoint(u);if(null!=c){if(t.isRedrop(u,t))return u._forceReattach=!0,u.setHover(!1),void(t.maybeCleanup&&t.maybeCleanup(c));var h=i.getFloatingAnchorIndex(u);if(0===h&&!t.isSource||1===h&&!t.isTarget)t.maybeCleanup&&t.maybeCleanup(c);else{t.onDrop&&t.onDrop(u),a&&i.setDragScope(o,a);var f=t.isFull(n);if(f&&c.fire("maxConnections",{endpoint:this,connection:u,maxConnections:c._jsPlumb.maxConnections},r),!f&&t.enabled()){var p=!0;0===h?(u.floatingElement=u.source,u.floatingId=u.sourceId,u.floatingEndpoint=u.endpoints[0],u.floatingIndex=0,u.source=t.element,u.sourceId=i.getId(t.element)):(u.floatingElement=u.target,u.floatingId=u.targetId,u.floatingEndpoint=u.endpoints[1],u.floatingIndex=1,u.target=t.element,u.targetId=i.getId(t.element)),l&&u.suspendedEndpoint.id!==c.id&&(u.isDetachAllowed(u)&&u.endpoints[h].isDetachAllowed(u)&&u.suspendedEndpoint.isDetachAllowed(u)&&i.checkCondition("beforeDetach",u)||(p=!1));var d=function(n){u.endpoints[h].detachFromConnection(u),u.suspendedEndpoint&&u.suspendedEndpoint.detachFromConnection(u),u.endpoints[h]=c,c.addConnection(u);var o=c.getParameters();for(var s in o)u.setParameter(s,o[s]);if(l){var a=u.suspendedEndpoint.elementId;i.fireMoveEvent({index:h,originalSourceId:0===h?a:u.sourceId,newSourceId:0===h?c.elementId:u.sourceId,originalTargetId:1===h?a:u.targetId,newTargetId:1===h?c.elementId:u.targetId,originalSourceEndpoint:0===h?u.suspendedEndpoint:u.endpoints[0],newSourceEndpoint:0===h?c:u.endpoints[0],originalTargetEndpoint:1===h?u.suspendedEndpoint:u.endpoints[1],newTargetEndpoint:1===h?c:u.endpoints[1],connection:u},r)}else o.draggable&&i.initDraggable(this.element,t.dragOptions,"internal",i);if(1===h?i.router.sourceOrTargetChanged(u.floatingId,u.targetId,u,u.target,1):i.router.sourceOrTargetChanged(u.floatingId,u.sourceId,u,u.source,0),u.endpoints[0].finalEndpoint){var f=u.endpoints[0];f.detachFromConnection(u),u.endpoints[0]=u.endpoints[0].finalEndpoint,u.endpoints[0].addConnection(u)}e.isObject(n)&&u.mergeData(n),i.finaliseConnection(u,null,r,!1),u.setHover(!1),i.revalidate(u.endpoints[0].element)}.bind(this),g=function(){u.suspendedEndpoint&&(u.endpoints[h]=u.suspendedEndpoint,u.setHover(!1),u._forceDetach=!0,0===h?(u.source=u.suspendedEndpoint.element,u.sourceId=u.suspendedEndpoint.elementId):(u.target=u.suspendedEndpoint.element,u.targetId=u.suspendedEndpoint.elementId),u.suspendedEndpoint.addConnection(u),1===h?i.router.sourceOrTargetChanged(u.floatingId,u.targetId,u,u.target,1):i.router.sourceOrTargetChanged(u.floatingId,u.sourceId,u,u.source,0),i.repaint(u.sourceId),u._forceDetach=!1)};if(p=p&&t.isDropAllowed(u.sourceId,u.targetId,u.scope,u,c),p)return d(p),!0;g()}t.maybeCleanup&&t.maybeCleanup(c),i.currentlyDragging=!1}}}}}}}.call("undefined"!==typeof window?window:this),function(){"use strict";var t=this,n=t.jsPlumb,e=t.jsPlumbUtil,i=function(t,i,r,o,s){if(n.Connectors[i]=n.Connectors[i]||{},null==n.Connectors[i][r]){if(null==n.Connectors[r]){if(t.Defaults.DoNotThrowErrors)return null;throw new TypeError("jsPlumb: unknown connector type '"+r+"'")}n.Connectors[i][r]=function(){n.Connectors[r].apply(this,arguments),n.ConnectorRenderers[i].apply(this,arguments)},e.extend(n.Connectors[i][r],[n.Connectors[r],n.ConnectorRenderers[i]])}return new n.Connectors[i][r](o,s)},r=function(t,n,e){return t?e.makeAnchor(t,n,e):null},o=function(t,n,i,r){null!=n&&(n._jsPlumbConnections=n._jsPlumbConnections||{},r?delete n._jsPlumbConnections[t.id]:n._jsPlumbConnections[t.id]=!0,e.isEmpty(n._jsPlumbConnections)?i.removeClass(n,i.connectedClass):i.addClass(n,i.connectedClass))};n.Connection=function(t){var i=t.newEndpoint;this.id=t.id,this.connector=null,this.idPrefix="_jsplumb_c_",this.defaultLabelLocation=.5,this.defaultOverlayKeys=["Overlays","ConnectionOverlays"],this.previousConnection=t.previousConnection,this.source=n.getElement(t.source),this.target=n.getElement(t.target),n.OverlayCapableJsPlumbUIComponent.apply(this,arguments),t.sourceEndpoint?(this.source=t.sourceEndpoint.getElement(),this.sourceId=t.sourceEndpoint.elementId):this.sourceId=this._jsPlumb.instance.getId(this.source),t.targetEndpoint?(this.target=t.targetEndpoint.getElement(),this.targetId=t.targetEndpoint.elementId):this.targetId=this._jsPlumb.instance.getId(this.target),this.scope=t.scope,this.endpoints=[],this.endpointStyles=[];var r=this._jsPlumb.instance;r.manage(this.sourceId,this.source),r.manage(this.targetId,this.target),this._jsPlumb.visible=!0,this._jsPlumb.params={cssClass:t.cssClass,container:t.container,"pointer-events":t["pointer-events"],editorParams:t.editorParams,overlays:t.overlays},this._jsPlumb.lastPaintedAt=null,this.bind("mouseover",function(){this.setHover(!0)}.bind(this)),this.bind("mouseout",function(){this.setHover(!1)}.bind(this)),this.makeEndpoint=function(n,e,o,s,a){return o=o||this._jsPlumb.instance.getId(e),this.prepareEndpoint(r,i,this,s,n?0:1,t,e,o,a)},t.type&&(t.endpoints=t.endpoints||this._jsPlumb.instance.deriveEndpointAndAnchorSpec(t.type).endpoints);var o=this.makeEndpoint(!0,this.source,this.sourceId,t.sourceEndpoint),s=this.makeEndpoint(!1,this.target,this.targetId,t.targetEndpoint);o&&e.addToList(t.endpointsByElement,this.sourceId,o),s&&e.addToList(t.endpointsByElement,this.targetId,s),this.scope||(this.scope=this.endpoints[0].scope),null!=t.deleteEndpointsOnEmpty&&(this.endpoints[0].setDeleteOnEmpty(t.deleteEndpointsOnEmpty),this.endpoints[1].setDeleteOnEmpty(t.deleteEndpointsOnEmpty));var a=r.Defaults.ConnectionsDetachable;!1===t.detachable&&(a=!1),!1===this.endpoints[0].connectionsDetachable&&(a=!1),!1===this.endpoints[1].connectionsDetachable&&(a=!1);var u=t.reattach||this.endpoints[0].reattachConnections||this.endpoints[1].reattachConnections||r.Defaults.ReattachConnections;this.appendToDefaultType({detachable:a,reattach:u,paintStyle:this.endpoints[0].connectorStyle||this.endpoints[1].connectorStyle||t.paintStyle||r.Defaults.PaintStyle||n.Defaults.PaintStyle,hoverPaintStyle:this.endpoints[0].connectorHoverStyle||this.endpoints[1].connectorHoverStyle||t.hoverPaintStyle||r.Defaults.HoverPaintStyle||n.Defaults.HoverPaintStyle});var l=r.getSuspendedAt();if(!r.isSuspendDrawing()){var c=r.getCachedData(this.sourceId),h=c.o,f=c.s,p=r.getCachedData(this.targetId),d=p.o,g=p.s,v=l||jsPlumbUtil.uuid(),m=this.endpoints[0].anchor.compute({xy:[h.left,h.top],wh:f,element:this.endpoints[0],elementId:this.endpoints[0].elementId,txy:[d.left,d.top],twh:g,tElement:this.endpoints[1],timestamp:v,rotation:r.getRotation(this.endpoints[0].elementId)});this.endpoints[0].paint({anchorLoc:m,timestamp:v}),m=this.endpoints[1].anchor.compute({xy:[d.left,d.top],wh:g,element:this.endpoints[1],elementId:this.endpoints[1].elementId,txy:[h.left,h.top],twh:f,tElement:this.endpoints[0],timestamp:v,rotation:r.getRotation(this.endpoints[1].elementId)}),this.endpoints[1].paint({anchorLoc:m,timestamp:v})}this.getTypeDescriptor=function(){return"connection"},this.getAttachedElements=function(){return this.endpoints},this.isDetachable=function(t){return!1!==this._jsPlumb.detachable&&(null!=t?!0===t.connectionsDetachable:!0===this._jsPlumb.detachable)},this.setDetachable=function(t){this._jsPlumb.detachable=!0===t},this.isReattach=function(){return!0===this._jsPlumb.reattach||!0===this.endpoints[0].reattachConnections||!0===this.endpoints[1].reattachConnections},this.setReattach=function(t){this._jsPlumb.reattach=!0===t},this._jsPlumb.cost=t.cost||this.endpoints[0].getConnectionCost(),this._jsPlumb.directed=t.directed,null==t.directed&&(this._jsPlumb.directed=this.endpoints[0].areConnectionsDirected());var y=n.extend({},this.endpoints[1].getParameters());n.extend(y,this.endpoints[0].getParameters()),n.extend(y,this.getParameters()),this.setParameters(y),this.setConnector(this.endpoints[0].connector||this.endpoints[1].connector||t.connector||r.Defaults.Connector||n.Defaults.Connector,!0);var b=null!=t.data&&e.isObject(t.data)?t.data:{};this.getData=function(){return b},this.setData=function(t){b=t||{}},this.mergeData=function(t){b=n.extend(b,t)};var _=["default",this.endpoints[0].connectionType,this.endpoints[1].connectionType,t.type].join(" ");/[^\s]/.test(_)&&this.addType(_,t.data,!0),this.updateConnectedClass()},e.extend(n.Connection,n.OverlayCapableJsPlumbUIComponent,{applyType:function(t,e,i){var r=null;null!=t.connector&&(r=this.getCachedTypeItem("connector",i.connector),null==r&&(r=this.prepareConnector(t.connector,i.connector),this.cacheTypeItem("connector",r,i.connector)),this.setPreparedConnector(r)),null!=t.detachable&&this.setDetachable(t.detachable),null!=t.reattach&&this.setReattach(t.reattach),t.scope&&(this.scope=t.scope),null!=t.cssClass&&this.canvas&&this._jsPlumb.instance.addClass(this.canvas,t.cssClass);var o=null;t.anchor?(o=this.getCachedTypeItem("anchors",i.anchor),null==o&&(o=[this._jsPlumb.instance.makeAnchor(t.anchor),this._jsPlumb.instance.makeAnchor(t.anchor)],this.cacheTypeItem("anchors",o,i.anchor))):t.anchors&&(o=this.getCachedTypeItem("anchors",i.anchors),null==o&&(o=[this._jsPlumb.instance.makeAnchor(t.anchors[0]),this._jsPlumb.instance.makeAnchor(t.anchors[1])],this.cacheTypeItem("anchors",o,i.anchors))),null!=o&&(this.endpoints[0].anchor=o[0],this.endpoints[1].anchor=o[1],this.endpoints[1].anchor.isDynamic&&this._jsPlumb.instance.repaint(this.endpoints[1].elementId)),n.OverlayCapableJsPlumbUIComponent.applyType(this,t)},addClass:function(t,n){n&&(this.endpoints[0].addClass(t),this.endpoints[1].addClass(t),this.suspendedEndpoint&&this.suspendedEndpoint.addClass(t)),this.connector&&this.connector.addClass(t)},removeClass:function(t,n){n&&(this.endpoints[0].removeClass(t),this.endpoints[1].removeClass(t),this.suspendedEndpoint&&this.suspendedEndpoint.removeClass(t)),this.connector&&this.connector.removeClass(t)},isVisible:function(){return this._jsPlumb.visible},setVisible:function(t){this._jsPlumb.visible=t,this.connector&&this.connector.setVisible(t),this.repaint()},cleanup:function(){this.updateConnectedClass(!0),this.endpoints=null,this.source=null,this.target=null,null!=this.connector&&(this.connector.cleanup(!0),this.connector.destroy(!0)),this.connector=null},updateConnectedClass:function(t){this._jsPlumb&&(o(this,this.source,this._jsPlumb.instance,t),o(this,this.target,this._jsPlumb.instance,t))},setHover:function(n){this.connector&&this._jsPlumb&&!this._jsPlumb.instance.isConnectionBeingDragged()&&(this.connector.setHover(n),t.jsPlumb[n?"addClass":"removeClass"](this.source,this._jsPlumb.instance.hoverSourceClass),t.jsPlumb[n?"addClass":"removeClass"](this.target,this._jsPlumb.instance.hoverTargetClass))},getUuids:function(){return[this.endpoints[0].getUuid(),this.endpoints[1].getUuid()]},getCost:function(){return this._jsPlumb?this._jsPlumb.cost:-1/0},setCost:function(t){this._jsPlumb.cost=t},isDirected:function(){return this._jsPlumb.directed},getConnector:function(){return this.connector},prepareConnector:function(t,n){var r,o={_jsPlumb:this._jsPlumb.instance,cssClass:this._jsPlumb.params.cssClass,container:this._jsPlumb.params.container,"pointer-events":this._jsPlumb.params["pointer-events"]},s=this._jsPlumb.instance.getRenderMode();return e.isString(t)?r=i(this._jsPlumb.instance,s,t,o,this):e.isArray(t)&&(r=1===t.length?i(this._jsPlumb.instance,s,t[0],o,this):i(this._jsPlumb.instance,s,t[0],e.merge(t[1],o),this)),null!=n&&(r.typeId=n),r},setPreparedConnector:function(t,n,e,i){if(this.connector!==t){var r,o="";if(null!=this.connector&&(r=this.connector,o=r.getClass(),this.connector.cleanup(),this.connector.destroy()),this.connector=t,i&&this.cacheTypeItem("connector",t,i),this.canvas=this.connector.canvas,this.bgCanvas=this.connector.bgCanvas,this.connector.reattach(this._jsPlumb.instance),this.addClass(o),this.canvas&&(this.canvas._jsPlumb=this),this.bgCanvas&&(this.bgCanvas._jsPlumb=this),null!=r)for(var s=this.getOverlays(),a=0;a<s.length;a++)s[a].transfer&&s[a].transfer(this.connector);e||this.setListenerComponent(this.connector),n||this.repaint()}},setConnector:function(t,n,e,i){var r=this.prepareConnector(t,i);this.setPreparedConnector(r,n,e,i)},paint:function(t){if(!this._jsPlumb.instance.isSuspendDrawing()&&this._jsPlumb.visible){t=t||{};var n=t.timestamp,e=!1,i=e?this.sourceId:this.targetId,r=e?this.targetId:this.sourceId,o=e?0:1,s=e?1:0;if(null==n||n!==this._jsPlumb.lastPaintedAt){var a=this._jsPlumb.instance.updateOffset({elId:r}).o,u=this._jsPlumb.instance.updateOffset({elId:i}).o,l=this.endpoints[s],c=this.endpoints[o],h=l.anchor.getCurrentLocation({xy:[a.left,a.top],wh:[a.width,a.height],element:l,timestamp:n,rotation:this._jsPlumb.instance.getRotation(this.sourceId)}),f=c.anchor.getCurrentLocation({xy:[u.left,u.top],wh:[u.width,u.height],element:c,timestamp:n,rotation:this._jsPlumb.instance.getRotation(this.targetId)});this.connector.resetBounds(),this.connector.compute({sourcePos:h,targetPos:f,sourceOrientation:l.anchor.getOrientation(l),targetOrientation:c.anchor.getOrientation(c),sourceEndpoint:this.endpoints[s],targetEndpoint:this.endpoints[o],"stroke-width":this._jsPlumb.paintStyleInUse.strokeWidth,sourceInfo:a,targetInfo:u});var p={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};for(var d in this._jsPlumb.overlays)if(this._jsPlumb.overlays.hasOwnProperty(d)){var g=this._jsPlumb.overlays[d];g.isVisible()&&(this._jsPlumb.overlayPlacements[d]=g.draw(this.connector,this._jsPlumb.paintStyleInUse,this.getAbsoluteOverlayPosition(g)),p.minX=Math.min(p.minX,this._jsPlumb.overlayPlacements[d].minX),p.maxX=Math.max(p.maxX,this._jsPlumb.overlayPlacements[d].maxX),p.minY=Math.min(p.minY,this._jsPlumb.overlayPlacements[d].minY),p.maxY=Math.max(p.maxY,this._jsPlumb.overlayPlacements[d].maxY))}var v=parseFloat(this._jsPlumb.paintStyleInUse.strokeWidth||1)/2,m=parseFloat(this._jsPlumb.paintStyleInUse.strokeWidth||0),y={xmin:Math.min(this.connector.bounds.minX-(v+m),p.minX),ymin:Math.min(this.connector.bounds.minY-(v+m),p.minY),xmax:Math.max(this.connector.bounds.maxX+(v+m),p.maxX),ymax:Math.max(this.connector.bounds.maxY+(v+m),p.maxY)};for(var b in this.connector.paintExtents=y,this.connector.paint(this._jsPlumb.paintStyleInUse,null,y),this._jsPlumb.overlays)if(this._jsPlumb.overlays.hasOwnProperty(b)){var _=this._jsPlumb.overlays[b];_.isVisible()&&_.paint(this._jsPlumb.overlayPlacements[b],y)}}this._jsPlumb.lastPaintedAt=n}},repaint:function(t){var n=jsPlumb.extend(t||{},{});n.elId=this.sourceId,this.paint(n)},prepareEndpoint:function(t,e,i,o,s,a,u,l,c){var h;if(o)i.endpoints[s]=o,o.addConnection(i);else{a.endpoints||(a.endpoints=[null,null]);var f=c||a.endpoints[s]||a.endpoint||t.Defaults.Endpoints[s]||n.Defaults.Endpoints[s]||t.Defaults.Endpoint||n.Defaults.Endpoint;a.endpointStyles||(a.endpointStyles=[null,null]),a.endpointHoverStyles||(a.endpointHoverStyles=[null,null]);var p=a.endpointStyles[s]||a.endpointStyle||t.Defaults.EndpointStyles[s]||n.Defaults.EndpointStyles[s]||t.Defaults.EndpointStyle||n.Defaults.EndpointStyle;null==p.fill&&null!=a.paintStyle&&(p.fill=a.paintStyle.stroke),null==p.outlineStroke&&null!=a.paintStyle&&(p.outlineStroke=a.paintStyle.outlineStroke),null==p.outlineWidth&&null!=a.paintStyle&&(p.outlineWidth=a.paintStyle.outlineWidth);var d=a.endpointHoverStyles[s]||a.endpointHoverStyle||t.Defaults.EndpointHoverStyles[s]||n.Defaults.EndpointHoverStyles[s]||t.Defaults.EndpointHoverStyle||n.Defaults.EndpointHoverStyle;null!=a.hoverPaintStyle&&(null==d&&(d={}),null==d.fill&&(d.fill=a.hoverPaintStyle.stroke));var g=a.anchors?a.anchors[s]:a.anchor?a.anchor:r(t.Defaults.Anchors[s],l,t)||r(n.Defaults.Anchors[s],l,t)||r(t.Defaults.Anchor,l,t)||r(n.Defaults.Anchor,l,t),v=a.uuids?a.uuids[s]:null;h=e({paintStyle:p,hoverPaintStyle:d,endpoint:f,connections:[i],uuid:v,anchor:g,source:u,scope:a.scope,reattach:a.reattach||t.Defaults.ReattachConnections,detachable:a.detachable||t.Defaults.ConnectionsDetachable}),null==o&&h.setDeleteOnEmpty(!0),i.endpoints[s]=h,!1===a.drawEndpoints&&h.setVisible(!1,!0,!0)}return h},replaceEndpoint:function(t,n){var e=this.endpoints[t],i=e.elementId,r=this._jsPlumb.instance.getEndpoints(i),o=r.indexOf(e),s=this.makeEndpoint(0===t,e.element,i,null,n);this.endpoints[t]=s,r.splice(o,1,s),this._jsPlumb.instance.deleteObject({endpoint:e,deleteAttachedObjects:!1}),this._jsPlumb.instance.fire("endpointReplaced",{previous:e,current:s}),this._jsPlumb.instance.router.sourceOrTargetChanged(this.endpoints[1].elementId,this.endpoints[1].elementId,this,this.endpoints[1].element,1)}})}.call("undefined"!==typeof window?window:this),function(){"use strict";var t=this,n=t.jsPlumbUtil,e=t.jsPlumb;e.AnchorManager=function(t){var i={},r={},o={},s={},a=this,u={},l=t.jsPlumbInstance,c={},h=function(t,n,e,i,r,o,s,a){for(var u=[],l=n[r?0:1]/(i.length+1),c=0;c<i.length;c++){var h=(c+1)*l,f=o*n[r?1:0];s&&(h=n[r?0:1]-h);var p=r?h:f,d=e.left+p,g=p/n[0],v=r?f:h,m=e.top+v,y=v/n[1];if(0!==a){var b=jsPlumbUtil.rotatePoint([d,m],[e.centerx,e.centery],a);d=b[0],m=b[1]}u.push([d,m,g,y,i[c][1],i[c][2]])}return u},f=function(t,n){return n[0][0]-t[0][0]},p=function(t,n){var e=t[0][0]<0?-Math.PI-t[0][0]:Math.PI-t[0][0],i=n[0][0]<0?-Math.PI-n[0][0]:Math.PI-n[0][0];return e-i},d={top:p,right:f,bottom:f,left:p},g=function(t,n){return t.sort(n)},v=function(t,n){var e=l.getCachedData(t),i=e.s,s=e.o,a=function(n,e,i,s,a,u,c){if(s.length>0)for(var f=g(s,d[n]),p="right"===n||"top"===n,v=l.getRotation(t),m=h(n,e,i,f,a,u,p,v),y=function(t,n){r[t.id]=[n[0],n[1],n[2],n[3]],o[t.id]=c},b=0;b<m.length;b++){var _=m[b][4],P=_.endpoints[0].elementId===t,x=_.endpoints[1].elementId===t;P&&y(_.endpoints[0],m[b]),x&&y(_.endpoints[1],m[b])}};a("bottom",i,s,n.bottom,!0,1,[0,1]),a("top",i,s,n.top,!0,0,[0,-1]),a("left",i,s,n.left,!1,0,[-1,0]),a("right",i,s,n.right,!1,1,[1,0])};this.reset=function(){i={},s={},u={}},this.addFloatingConnection=function(t,n){c[t]=n},this.newConnection=function(t){var i=t.sourceId,r=t.targetId,o=t.endpoints,a=!0,u=function(u,l,c,h,f){i===r&&c.isContinuous&&(t._jsPlumb.instance.removeElement(o[1].canvas),a=!1),n.addToList(s,h,[f,l,c.constructor===e.DynamicAnchor])};u(0,o[0],o[0].anchor,r,t),a&&u(1,o[1],o[1].anchor,i,t)};var m=function(t){(function(t,e){if(t){var i=function(t){return t[4]===e};n.removeWithFunction(t.top,i),n.removeWithFunction(t.left,i),n.removeWithFunction(t.bottom,i),n.removeWithFunction(t.right,i)}})(u[t.elementId],t.id)};this.connectionDetached=function(t,e){var i=t.connection||t,r=t.sourceId,o=t.targetId,u=i.endpoints,l=function(t,e,i,r,o){n.removeWithFunction(s[r],(function(t){return t[0].id===o.id}))};l(1,u[1],u[1].anchor,r,i),l(0,u[0],u[0].anchor,o,i),i.floatingId&&(l(i.floatingIndex,i.floatingEndpoint,i.floatingEndpoint.anchor,i.floatingId,i),m(i.floatingEndpoint)),m(i.endpoints[0]),m(i.endpoints[1]),e||(a.redraw(i.sourceId),i.targetId!==i.sourceId&&a.redraw(i.targetId))},this.addEndpoint=function(t,e){n.addToList(i,e,t)},this.changeId=function(t,n){s[n]=s[t],i[n]=i[t],delete s[t],delete i[t]},this.getConnectionsFor=function(t){return s[t]||[]},this.getEndpointsFor=function(t){return i[t]||[]},this.deleteEndpoint=function(t){n.removeWithFunction(i[t.elementId],(function(n){return n.id===t.id})),m(t)},this.elementRemoved=function(t){delete c[t],delete i[t],i[t]=[]};var y=function(e,i,r,o,s,a,u,l,c,h,f,p){var d,g,v=-1,m=-1,y=o.endpoints[u],b=y.id,_=[1,0][u],P=[[i,r],o,s,a,b],x=e[c],C=y._continuousAnchorEdge?e[y._continuousAnchorEdge]:null;if(C){var j=n.findWithFunction(C,(function(t){return t[4]===b}));if(-1!==j)for(C.splice(j,1),d=0;d<C.length;d++)g=C[d][1],n.addWithFunction(f,g,(function(t){return t.id===g.id})),n.addWithFunction(p,C[d][1].endpoints[u],(function(t){return t.id===g.endpoints[u].id})),n.addWithFunction(p,C[d][1].endpoints[_],(function(t){return t.id===g.endpoints[_].id}))}for(d=0;d<x.length;d++)g=x[d][1],1===t.idx&&x[d][3]===a&&-1===m&&(m=d),n.addWithFunction(f,g,(function(t){return t.id===g.id})),n.addWithFunction(p,x[d][1].endpoints[u],(function(t){return t.id===g.endpoints[u].id})),n.addWithFunction(p,x[d][1].endpoints[_],(function(t){return t.id===g.endpoints[_].id}));if(-1!==v)x[v]=P;else{var w=l?-1!==m?m:0:x.length;x.splice(w,0,P)}y._continuousAnchorEdge=c};this.sourceOrTargetChanged=function(t,i,r,o,a){if(0===a){if(t!==i){r.sourceId=i,r.source=o,n.removeWithFunction(s[t],(function(t){return t[0].id===r.id}));var u=n.findWithFunction(s[r.targetId],(function(t){return t[0].id===r.id}));u>-1&&(s[r.targetId][u][0]=r,s[r.targetId][u][1]=r.endpoints[0],s[r.targetId][u][2]=r.endpoints[0].anchor.constructor===e.DynamicAnchor),n.addToList(s,i,[r,r.endpoints[1],r.endpoints[1].anchor.constructor===e.DynamicAnchor]),r.endpoints[1].anchor.isContinuous&&(r.source===r.target?r._jsPlumb.instance.removeElement(r.endpoints[1].canvas):null==r.endpoints[1].canvas.parentNode&&r._jsPlumb.instance.appendElement(r.endpoints[1].canvas)),r.updateConnectedClass()}}else if(1===a){var l=r.endpoints[0].elementId;r.target=o,r.targetId=i;var c=n.findWithFunction(s[l],(function(t){return t[0].id===r.id})),h=n.findWithFunction(s[t],(function(t){return t[0].id===r.id}));-1!==c&&(s[l][c][0]=r,s[l][c][1]=r.endpoints[1],s[l][c][2]=r.endpoints[1].anchor.constructor===e.DynamicAnchor),h>-1&&(s[t].splice(h,1),n.addToList(s,i,[r,r.endpoints[0],r.endpoints[0].anchor.constructor===e.DynamicAnchor])),r.updateConnectedClass()}},this.rehomeEndpoint=function(t,n,e){var r=i[n]||[],o=l.getId(e);if(o!==n){var s=r.indexOf(t);if(s>-1){var u=r.splice(s,1)[0];a.add(u,o)}}for(var c=0;c<t.connections.length;c++)t.connections[c].sourceId===n?a.sourceOrTargetChanged(n,t.elementId,t.connections[c],t.element,0):t.connections[c].targetId===n&&a.sourceOrTargetChanged(n,t.elementId,t.connections[c],t.element,1)},this.redraw=function(t,r,o,a,h,f){var p=[],d=[],g=[];if(!l.isSuspendDrawing()){var m=i[t]||[],b=s[t]||[];o=o||jsPlumbUtil.uuid(),a=a||{left:0,top:0},r&&(r={left:r.left+a.left,top:r.top+a.top});for(var _=l.updateOffset({elId:t,offset:r,recalc:!1,timestamp:o}),P={},x=0;x<b.length;x++){var C=b[x][0],j=C.sourceId,w=C.targetId,E=C.endpoints[0].anchor.isContinuous,S=C.endpoints[1].anchor.isContinuous;if(E||S){var D=j+"_"+w,A=P[D],I=C.sourceId===t?1:0,k=l.getRotation(w),O=l.getRotation(j);E&&!u[j]&&(u[j]={top:[],right:[],bottom:[],left:[]}),S&&!u[w]&&(u[w]={top:[],right:[],bottom:[],left:[]}),t!==w&&l.updateOffset({elId:w,timestamp:o}),t!==j&&l.updateOffset({elId:j,timestamp:o});var T=l.getCachedData(w),M=l.getCachedData(j);w===j&&(E||S)?(y(u[j],-Math.PI/2,0,C,!1,w,0,!1,"top",j,p,d),y(u[w],-Math.PI/2,0,C,!1,j,1,!1,"top",w,p,d)):(A||(A=this.calculateOrientation(j,w,M.o,T.o,C.endpoints[0].anchor,C.endpoints[1].anchor,C,O,k),P[D]=A),E&&y(u[j],A.theta,0,C,!1,w,0,!1,A.a[0],j,p,d),S&&y(u[w],A.theta2,-1,C,!0,j,1,!0,A.a[1],w,p,d)),E&&n.addWithFunction(g,j,(function(t){return t===j})),S&&n.addWithFunction(g,w,(function(t){return t===w})),n.addWithFunction(p,C,(function(t){return t.id===C.id})),(E&&0===I||S&&1===I)&&n.addWithFunction(d,C.endpoints[I],(function(t){return t.id===C.endpoints[I].id}))}}for(x=0;x<m.length;x++)0===m[x].connections.length&&m[x].anchor.isContinuous&&(u[t]||(u[t]={top:[],right:[],bottom:[],left:[]}),y(u[t],-Math.PI/2,0,{endpoints:[m[x],m[x]],paint:function(){}},!1,t,0,!1,m[x].anchor.getDefaultFace(),t,p,d),n.addWithFunction(g,t,(function(n){return n===t})));for(x=0;x<g.length;x++)v(g[x],u[g[x]]);for(x=0;x<m.length;x++)m[x].paint({timestamp:o,offset:_,dimensions:_.s,recalc:!0!==f});for(x=0;x<d.length;x++){var L=l.getCachedData(d[x].elementId);d[x].paint({timestamp:null,offset:L,dimensions:L.s})}for(x=0;x<b.length;x++){var F=b[x][1];if(F.anchor.constructor===e.DynamicAnchor){F.paint({elementWithPrecedence:t,timestamp:o}),n.addWithFunction(p,b[x][0],(function(t){return t.id===b[x][0].id}));for(var R=0;R<F.connections.length;R++)F.connections[R]!==b[x][0]&&n.addWithFunction(p,F.connections[R],(function(t){return t.id===F.connections[R].id}))}else n.addWithFunction(p,b[x][0],(function(t){return t.id===b[x][0].id}))}var N=c[t];for(N&&N.paint({timestamp:o,recalc:!1,elId:t}),x=0;x<p.length;x++)p[x].paint({elId:t,timestamp:null,recalc:!1,clearEdits:h})}return{c:p,e:d}};var b=function(t){n.EventGenerator.apply(this),this.type="Continuous",this.isDynamic=!0,this.isContinuous=!0;for(var e=t.faces||["top","right","bottom","left"],i=!(!1===t.clockwise),s={},a={top:"bottom",right:"left",left:"right",bottom:"top"},u={top:"right",right:"bottom",left:"top",bottom:"left"},l={top:"left",right:"top",left:"bottom",bottom:"right"},c=i?u:l,h=i?l:u,f=t.cssClass||"",p=null,d=null,g=["left","right"],v=["top","bottom"],m=null,y=0;y<e.length;y++)s[e[y]]=!0;this.getDefaultFace=function(){return 0===e.length?"top":e[0]},this.isRelocatable=function(){return!0},this.isSnapOnRelocate=function(){return!0},this.verifyEdge=function(t){return s[t]?t:s[a[t]]?a[t]:s[c[t]]?c[t]:s[h[t]]?h[t]:t},this.isEdgeSupported=function(t){return null==m?null==d?!0===s[t]:d===t:-1!==m.indexOf(t)},this.setCurrentFace=function(t,n){p=t,n&&null!=d&&(d=p)},this.getCurrentFace=function(){return p},this.getSupportedFaces=function(){var t=[];for(var n in s)s[n]&&t.push(n);return t},this.lock=function(){d=p},this.unlock=function(){d=null},this.isLocked=function(){return null!=d},this.lockCurrentAxis=function(){null!=p&&(m="left"===p||"right"===p?g:v)},this.unlockCurrentAxis=function(){m=null},this.compute=function(t){return r[t.element.id]||[0,0]},this.getCurrentLocation=function(t){return r[t.element.id]||[0,0]},this.getOrientation=function(t){return o[t.id]||[0,0]},this.getCssClass=function(){return f}};l.continuousAnchorFactory={get:function(t){return new b(t)},clear:function(t){delete r[t]}}},e.AnchorManager.prototype.calculateOrientation=function(t,n,e,i,r,o,s,a,u){var l={HORIZONTAL:"horizontal",VERTICAL:"vertical",DIAGONAL:"diagonal",IDENTITY:"identity"},c=["left","top","right","bottom"];if(t===n)return{orientation:l.IDENTITY,a:["top","top"]};var h=Math.atan2(i.centery-e.centery,i.centerx-e.centerx),f=Math.atan2(e.centery-i.centery,e.centerx-i.centerx),p=[],d={};(function(t,n){for(var e=0;e<t.length;e++)if(d[t[e]]={left:[n[e][0].left,n[e][0].centery],right:[n[e][0].right,n[e][0].centery],top:[n[e][0].centerx,n[e][0].top],bottom:[n[e][0].centerx,n[e][0].bottom]},0!==n[e][1])for(var i in d[t[e]])d[t[e]][i]=jsPlumbUtil.rotatePoint(d[t[e]][i],[n[e][0].centerx,n[e][0].centery],n[e][1])})(["source","target"],[[e,a],[i,u]]);for(var g=0;g<c.length;g++)for(var v=0;v<c.length;v++)p.push({source:c[g],target:c[v],dist:Biltong.lineLength(d.source[c[g]],d.target[c[v]])});p.sort((function(t,n){return t.dist<n.dist?-1:t.dist>n.dist?1:0}));for(var m=p[0].source,y=p[0].target,b=0;b<p.length;b++)if(m=r.isContinuous&&r.locked?r.getCurrentFace():!r.isContinuous||r.isEdgeSupported(p[b].source)?p[b].source:null,y=o.isContinuous&&o.locked?o.getCurrentFace():!o.isContinuous||o.isEdgeSupported(p[b].target)?p[b].target:null,null!=m&&null!=y)break;return r.isContinuous&&r.setCurrentFace(m),o.isContinuous&&o.setCurrentFace(y),{a:[m,y],theta:h,theta2:f}},e.Anchor=function(t){this.x=t.x||0,this.y=t.y||0,this.elementId=t.elementId,this.cssClass=t.cssClass||"",this.orientation=t.orientation||[0,0],this.lastReturnValue=null,this.offsets=t.offsets||[0,0],this.timestamp=null,this._unrotatedOrientation=[this.orientation[0],this.orientation[1]],this.relocatable=!1!==t.relocatable,this.snapOnRelocate=!1!==t.snapOnRelocate,this.locked=!1,n.EventGenerator.apply(this),this.compute=function(t){var n=t.xy,e=t.wh,i=t.timestamp;if(i&&i===this.timestamp)return this.lastReturnValue;var r=[n[0]+this.x*e[0]+this.offsets[0],n[1]+this.y*e[1]+this.offsets[1],this.x,this.y],o=t.rotation;if(null!=o&&0!==o){var s=jsPlumbUtil.rotatePoint(r,[n[0]+e[0]/2,n[1]+e[1]/2],o);this.orientation[0]=Math.round(this._unrotatedOrientation[0]*s[2]-this._unrotatedOrientation[1]*s[3]),this.orientation[1]=Math.round(this._unrotatedOrientation[1]*s[2]+this._unrotatedOrientation[0]*s[3]),this.lastReturnValue=[s[0],s[1],this.x,this.y]}else this.orientation[0]=this._unrotatedOrientation[0],this.orientation[1]=this._unrotatedOrientation[1],this.lastReturnValue=r;return this.timestamp=i,this.lastReturnValue},this.getCurrentLocation=function(t){return t=t||{},null==this.lastReturnValue||null!=t.timestamp&&this.timestamp!==t.timestamp?this.compute(t):this.lastReturnValue},this.setPosition=function(t,n,e,i,r){this.locked&&!r||(this.x=t,this.y=n,this.orientation=[e,i],this.lastReturnValue=null)}},n.extend(e.Anchor,n.EventGenerator,{equals:function(t){if(!t)return!1;var n=t.getOrientation(),e=this.getOrientation();return this.x===t.x&&this.y===t.y&&this.offsets[0]===t.offsets[0]&&this.offsets[1]===t.offsets[1]&&e[0]===n[0]&&e[1]===n[1]},getOrientation:function(){return this.orientation},getCssClass:function(){return this.cssClass}}),e.FloatingAnchor=function(t){e.Anchor.apply(this,arguments);var n=t.reference,i=t.referenceCanvas,r=e.getSize(i),o=0,s=0,a=null,u=null;this.orientation=null,this.x=0,this.y=0,this.isFloating=!0,this.compute=function(t){var n=t.xy,e=[n[0]+r[0]/2,n[1]+r[1]/2];return u=e,e},this.getOrientation=function(t){if(a)return a;var e=n.getOrientation(t);return[Math.abs(e[0])*o*-1,Math.abs(e[1])*s*-1]},this.over=function(t,n){a=t.getOrientation(n)},this.out=function(){a=null},this.getCurrentLocation=function(t){return null==u?this.compute(t):u}},n.extend(e.FloatingAnchor,e.Anchor);var i=function(t,n,i){return t.constructor===e.Anchor?t:n.makeAnchor(t,i,n)};e.DynamicAnchor=function(t){e.Anchor.apply(this,arguments),this.isDynamic=!0,this.anchors=[],this.elementId=t.elementId,this.jsPlumbInstance=t.jsPlumbInstance;for(var n=0;n<t.anchors.length;n++)this.anchors[n]=i(t.anchors[n],this.jsPlumbInstance,this.elementId);this.getAnchors=function(){return this.anchors};var r=this.anchors.length>0?this.anchors[0]:null,o=r,s=function(t,n,e,i,r,o,s){var a=i[0]+t.x*r[0],u=i[1]+t.y*r[1],l=i[0]+r[0]/2,c=i[1]+r[1]/2;if(null!=o&&0!==o){var h=jsPlumbUtil.rotatePoint([a,u],[l,c],o);a=h[0],u=h[1]}return Math.sqrt(Math.pow(n-a,2)+Math.pow(e-u,2))+Math.sqrt(Math.pow(l-a,2)+Math.pow(c-u,2))},a=t.selector||function(t,n,e,i,r,o,a){for(var u=e[0]+i[0]/2,l=e[1]+i[1]/2,c=-1,h=1/0,f=0;f<a.length;f++){var p=s(a[f],u,l,t,n,r,o);p<h&&(c=f+0,h=p)}return a[c]};this.compute=function(t){var n=t.xy,e=t.wh,i=t.txy,s=t.twh,u=t.rotation,l=t.tRotation;return this.timestamp=t.timestamp,this.locked||null==i||null==s?(this.lastReturnValue=r.compute(t),this.lastReturnValue):(t.timestamp=null,r=a(n,e,i,s,u,l,this.anchors),this.x=r.x,this.y=r.y,r!==o&&this.fire("anchorChanged",r),o=r,this.lastReturnValue=r.compute(t),this.lastReturnValue)},this.getCurrentLocation=function(t){return null!=r?r.getCurrentLocation(t):null},this.getOrientation=function(t){return null!=r?r.getOrientation(t):[0,0]},this.over=function(t,n){null!=r&&r.over(t,n)},this.out=function(){null!=r&&r.out()},this.setAnchor=function(t){r=t},this.getCssClass=function(){return r&&r.getCssClass()||""},this.setAnchorCoordinates=function(t){var n=jsPlumbUtil.findWithFunction(this.anchors,(function(n){return n.x===t[0]&&n.y===t[1]}));return-1!==n&&(this.setAnchor(this.anchors[n]),!0)}},n.extend(e.DynamicAnchor,e.Anchor);var r=function(t,n,i,r,o,s){e.Anchors[o]=function(e){var a=e.jsPlumbInstance.makeAnchor([t,n,i,r,0,0],e.elementId,e.jsPlumbInstance);return a.type=o,s&&s(a,e),a}};r(.5,0,0,-1,"TopCenter"),r(.5,1,0,1,"BottomCenter"),r(0,.5,-1,0,"LeftMiddle"),r(1,.5,1,0,"RightMiddle"),r(.5,0,0,-1,"Top"),r(.5,1,0,1,"Bottom"),r(0,.5,-1,0,"Left"),r(1,.5,1,0,"Right"),r(.5,.5,0,0,"Center"),r(1,0,0,-1,"TopRight"),r(1,1,0,1,"BottomRight"),r(0,0,0,-1,"TopLeft"),r(0,1,0,1,"BottomLeft"),e.Defaults.DynamicAnchors=function(t){return t.jsPlumbInstance.makeAnchors(["TopCenter","RightMiddle","BottomCenter","LeftMiddle"],t.elementId,t.jsPlumbInstance)},e.Anchors.AutoDefault=function(t){var n=t.jsPlumbInstance.makeDynamicAnchor(e.Defaults.DynamicAnchors(t));return n.type="AutoDefault",n};var o=function(t,n){e.Anchors[t]=function(e){var i=e.jsPlumbInstance.makeAnchor(["Continuous",{faces:n}],e.elementId,e.jsPlumbInstance);return i.type=t,i}};e.Anchors.Continuous=function(t){return t.jsPlumbInstance.continuousAnchorFactory.get(t)},o("ContinuousLeft",["left"]),o("ContinuousTop",["top"]),o("ContinuousBottom",["bottom"]),o("ContinuousRight",["right"]),r(0,0,0,0,"Assign",(function(t,n){var e=n.position||"Fixed";t.positionFinder=e.constructor===String?n.jsPlumbInstance.AnchorPositionFinders[e]:e,t.constructorParams=n})),t.jsPlumbInstance.prototype.AnchorPositionFinders={Fixed:function(t,n,e){return[(t.left-n.left)/e[0],(t.top-n.top)/e[1]]},Grid:function(t,n,e,i){var r=t.left-n.left,o=t.top-n.top,s=e[0]/i.grid[0],a=e[1]/i.grid[1],u=Math.floor(r/s),l=Math.floor(o/a);return[(u*s+s/2)/e[0],(l*a+a/2)/e[1]]}},e.Anchors.Perimeter=function(t){t=t||{};var n=t.anchorCount||60,e=t.shape;if(!e)throw new Error("no shape supplied to Perimeter Anchor type");var i=function(){for(var t=.5,e=2*Math.PI/n,i=0,r=[],o=0;o<n;o++){var s=t+t*Math.sin(i),a=t+t*Math.cos(i);r.push([s,a,0,0]),i+=e}return r},r=function(t){for(var e=n/t.length,i=[],r=function(t,r,o,s,a,u,l){e=n*a;for(var c=(o-t)/e,h=(s-r)/e,f=0;f<e;f++)i.push([t+c*f,r+h*f,null==u?0:u,null==l?0:l])},o=0;o<t.length;o++)r.apply(null,t[o]);return i},o=function(t){for(var n=[],e=0;e<t.length;e++)n.push([t[e][0],t[e][1],t[e][2],t[e][3],1/t.length,t[e][4],t[e][5]]);return r(n)},s=function(){return o([[0,0,1,0,0,-1],[1,0,1,1,1,0],[1,1,0,1,0,1],[0,1,0,0,-1,0]])},a={Circle:i,Ellipse:i,Diamond:function(){return o([[.5,0,1,.5],[1,.5,.5,1],[.5,1,0,.5],[0,.5,.5,0]])},Rectangle:s,Square:s,Triangle:function(){return o([[.5,0,1,1],[1,1,0,1],[0,1,.5,0]])},Path:function(t){for(var n=t.points,e=[],i=0,o=0;o<n.length-1;o++){var s=Math.sqrt(Math.pow(n[o][2]-n[o][0])+Math.pow(n[o][3]-n[o][1]));i+=s,e.push([n[o][0],n[o][1],n[o+1][0],n[o+1][1],s])}for(var a=0;a<e.length;a++)e[a][4]=e[a][4]/i;return r(e)}},u=function(t,n){for(var e=[],i=n/180*Math.PI,r=0;r<t.length;r++){var o=t[r][0]-.5,s=t[r][1]-.5;e.push([o*Math.cos(i)-s*Math.sin(i)+.5,o*Math.sin(i)+s*Math.cos(i)+.5,t[r][2],t[r][3]])}return e};if(!a[e])throw new Error("Shape ["+e+"] is unknown by Perimeter Anchor type");var l=a[e](t);t.rotation&&(l=u(l,t.rotation));var c=t.jsPlumbInstance.makeDynamicAnchor(l);return c.type="Perimeter",c}}.call("undefined"!==typeof window?window:this),function(){"use strict";var t=this,n=(t.jsPlumbUtil,t.jsPlumb);n.DefaultRouter=function(t){this.jsPlumbInstance=t,this.anchorManager=new n.AnchorManager({jsPlumbInstance:t}),this.sourceOrTargetChanged=function(t,n,e,i,r){this.anchorManager.sourceOrTargetChanged(t,n,e,i,r)},this.reset=function(){this.anchorManager.reset()},this.changeId=function(t,n){this.anchorManager.changeId(t,n)},this.elementRemoved=function(t){this.anchorManager.elementRemoved(t)},this.newConnection=function(t){this.anchorManager.newConnection(t)},this.connectionDetached=function(t,n){this.anchorManager.connectionDetached(t,n)},this.redraw=function(t,n,e,i,r,o){return this.anchorManager.redraw(t,n,e,i,r,o)},this.deleteEndpoint=function(t){this.anchorManager.deleteEndpoint(t)},this.rehomeEndpoint=function(t,n,e){this.anchorManager.rehomeEndpoint(t,n,e)},this.addEndpoint=function(t,n){this.anchorManager.addEndpoint(t,n)}}}.call("undefined"!==typeof window?window:this),function(){"use strict";var t=this,n=t.jsPlumb,e=t.jsPlumbUtil,i=t.Biltong;n.Segments={AbstractSegment:function(t){this.params=t,this.findClosestPointOnPath=function(t,n){return{d:1/0,x:null,y:null,l:null}},this.getBounds=function(){return{minX:Math.min(t.x1,t.x2),minY:Math.min(t.y1,t.y2),maxX:Math.max(t.x1,t.x2),maxY:Math.max(t.y1,t.y2)}},this.lineIntersection=function(t,n,e,i){return[]},this.boxIntersection=function(t,n,e,i){var r=[];return r.push.apply(r,this.lineIntersection(t,n,t+e,n)),r.push.apply(r,this.lineIntersection(t+e,n,t+e,n+i)),r.push.apply(r,this.lineIntersection(t+e,n+i,t,n+i)),r.push.apply(r,this.lineIntersection(t,n+i,t,n)),r},this.boundingBoxIntersection=function(t){return this.boxIntersection(t.x,t.y,t.w,t.y)}},Straight:function(t){n.Segments.AbstractSegment.apply(this,arguments);var e,r,o,s,a,u,l,c=function(){e=Math.sqrt(Math.pow(a-s,2)+Math.pow(l-u,2)),r=i.gradient({x:s,y:u},{x:a,y:l}),o=-1/r};this.type="Straight",this.getLength=function(){return e},this.getGradient=function(){return r},this.getCoordinates=function(){return{x1:s,y1:u,x2:a,y2:l}},this.setCoordinates=function(t){s=t.x1,u=t.y1,a=t.x2,l=t.y2,c()},this.setCoordinates({x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2}),this.getBounds=function(){return{minX:Math.min(s,a),minY:Math.min(u,l),maxX:Math.max(s,a),maxY:Math.max(u,l)}},this.pointOnPath=function(t,n){if(0!==t||n){if(1!==t||n){var r=n?t>0?t:e+t:t*e;return i.pointOnLine({x:s,y:u},{x:a,y:l},r)}return{x:a,y:l}}return{x:s,y:u}},this.gradientAtPoint=function(t){return r},this.pointAlongPathFrom=function(t,n,e){var r=this.pointOnPath(t,e),o=n<=0?{x:s,y:u}:{x:a,y:l};return n<=0&&Math.abs(n)>1&&(n*=-1),i.pointOnLine(r,o,n)};var h=function(t,n,e){return e>=Math.min(t,n)&&e<=Math.max(t,n)},f=function(t,n,e){return Math.abs(e-t)<Math.abs(e-n)?t:n};this.findClosestPointOnPath=function(t,n){var c={d:1/0,x:null,y:null,l:null,x1:s,x2:a,y1:u,y2:l};if(0===r)c.y=u,c.x=h(s,a,t)?t:f(s,a,t);else if(r===1/0||r===-1/0)c.x=s,c.y=h(u,l,n)?n:f(u,l,n);else{var p=u-r*s,d=n-o*t,g=(d-p)/(r-o),v=r*g+p;c.x=h(s,a,g)?g:f(s,a,g),c.y=h(u,l,v)?v:f(u,l,v)}var m=i.lineLength([c.x,c.y],[s,u]);return c.d=i.lineLength([t,n],[c.x,c.y]),c.l=m/e,c};var p=function(t,n,e){return e>n?n<=t&&t<=e:n>=t&&t>=e},d=p;this.lineIntersection=function(t,n,e,o){var c=Math.abs(i.gradient({x:t,y:n},{x:e,y:o})),h=Math.abs(r),f=h===1/0?s:u-h*s,p=[],g=c===1/0?t:n-c*t;if(c!==h)if(c===1/0&&0===h)d(t,s,a)&&d(u,n,o)&&(p=[t,u]);else if(0===c&&h===1/0)d(n,u,l)&&d(s,t,e)&&(p=[s,n]);else{var v,m;c===1/0?(v=t,d(v,s,a)&&(m=h*t+f,d(m,n,o)&&(p=[v,m]))):0===c?(m=n,d(m,u,l)&&(v=(n-f)/h,d(v,t,e)&&(p=[v,m]))):(v=(g-f)/(h-c),m=h*v+f,d(v,s,a)&&d(m,u,l)&&(p=[v,m]))}return p},this.boxIntersection=function(t,n,e,i){var r=[];return r.push.apply(r,this.lineIntersection(t,n,t+e,n)),r.push.apply(r,this.lineIntersection(t+e,n,t+e,n+i)),r.push.apply(r,this.lineIntersection(t+e,n+i,t,n+i)),r.push.apply(r,this.lineIntersection(t,n+i,t,n)),r},this.boundingBoxIntersection=function(t){return this.boxIntersection(t.x,t.y,t.w,t.h)}},Arc:function(t){n.Segments.AbstractSegment.apply(this,arguments);var e=function(n,e){return i.theta([t.cx,t.cy],[n,e])},r=function(t,n){if(t.anticlockwise){var e=t.startAngle<t.endAngle?t.startAngle+o:t.startAngle,i=Math.abs(e-t.endAngle);return e-i*n}var r=t.endAngle<t.startAngle?t.endAngle+o:t.endAngle,s=Math.abs(r-t.startAngle);return t.startAngle+s*n},o=2*Math.PI;this.radius=t.r,this.anticlockwise=t.ac,this.type="Arc",t.startAngle&&t.endAngle?(this.startAngle=t.startAngle,this.endAngle=t.endAngle,this.x1=t.cx+this.radius*Math.cos(t.startAngle),this.y1=t.cy+this.radius*Math.sin(t.startAngle),this.x2=t.cx+this.radius*Math.cos(t.endAngle),this.y2=t.cy+this.radius*Math.sin(t.endAngle)):(this.startAngle=e(t.x1,t.y1),this.endAngle=e(t.x2,t.y2),this.x1=t.x1,this.y1=t.y1,this.x2=t.x2,this.y2=t.y2),this.endAngle<0&&(this.endAngle+=o),this.startAngle<0&&(this.startAngle+=o);var s=this.endAngle<this.startAngle?this.endAngle+o:this.endAngle;this.sweep=Math.abs(s-this.startAngle),this.anticlockwise&&(this.sweep=o-this.sweep);var a=2*Math.PI*this.radius,u=this.sweep/o,l=a*u;this.getLength=function(){return l},this.getBounds=function(){return{minX:t.cx-t.r,maxX:t.cx+t.r,minY:t.cy-t.r,maxY:t.cy+t.r}};var c=1e-10,h=function(t){var n=Math.floor(t),e=Math.ceil(t);return t-n<c?n:e-t<c?e:t};this.pointOnPath=function(n,e){if(0===n)return{x:this.x1,y:this.y1,theta:this.startAngle};if(1===n)return{x:this.x2,y:this.y2,theta:this.endAngle};e&&(n/=l);var i=r(this,n),o=t.cx+t.r*Math.cos(i),s=t.cy+t.r*Math.sin(i);return{x:h(o),y:h(s),theta:i}},this.gradientAtPoint=function(n,e){var r=this.pointOnPath(n,e),o=i.normal([t.cx,t.cy],[r.x,r.y]);return this.anticlockwise||o!==1/0&&o!==-1/0||(o*=-1),o},this.pointAlongPathFrom=function(n,e,i){var r=this.pointOnPath(n,i),o=e/a*2*Math.PI,s=this.anticlockwise?-1:1,u=r.theta+s*o,l=t.cx+this.radius*Math.cos(u),c=t.cy+this.radius*Math.sin(u);return{x:l,y:c}}},Bezier:function(e){this.curve=[{x:e.x1,y:e.y1},{x:e.cp1x,y:e.cp1y},{x:e.cp2x,y:e.cp2y},{x:e.x2,y:e.y2}];var i=function(t){return t[0].x===t[1].x&&t[0].y===t[1].y},r=function(t,n){return Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2))},o=function(t){var n={x:0,y:0};if(0===t)return this.curve[0];var e=this.curve.length-1;if(1===t)return this.curve[e];var i=this.curve,r=1-t;if(0===e)return this.curve[0];if(1===e)return{x:r*i[0].x+t*i[1].x,y:r*i[0].y+t*i[1].y};if(e<4){var o,s,a,u=r*r,l=t*t,c=0;return 2===e?(i=[i[0],i[1],i[2],n],o=u,s=r*t*2,a=l):3===e&&(o=u*r,s=u*t*3,a=r*l*3,c=t*l),{x:o*i[0].x+s*i[1].x+a*i[2].x+c*i[3].x,y:o*i[0].y+s*i[1].y+a*i[2].y+c*i[3].y}}return n}.bind(this),s=function(t){var n=[];t--;for(var e=0;e<=t;e++)n.push(o(e/t));return n},a=function(){i(this.curve)&&(this.length=0);var t=16,n=s(t);this.length=0;for(var e=0;e<t-1;e++){var o=n[e],a=n[e+1];this.length+=r(o,a)}}.bind(this);n.Segments.AbstractSegment.apply(this,arguments);this.bounds={minX:Math.min(e.x1,e.x2,e.cp1x,e.cp2x),minY:Math.min(e.y1,e.y2,e.cp1y,e.cp2y),maxX:Math.max(e.x1,e.x2,e.cp1x,e.cp2x),maxY:Math.max(e.y1,e.y2,e.cp1y,e.cp2y)},this.type="Bezier",a();var u=function(n,e,i){return i&&(e=t.jsBezier.locationAlongCurveFrom(n,e>0?0:1,e)),e};this.pointOnPath=function(n,e){return n=u(this.curve,n,e),t.jsBezier.pointOnCurve(this.curve,n)},this.gradientAtPoint=function(n,e){return n=u(this.curve,n,e),t.jsBezier.gradientAtPoint(this.curve,n)},this.pointAlongPathFrom=function(n,e,i){return n=u(this.curve,n,i),t.jsBezier.pointAlongCurveFrom(this.curve,n,e)},this.getLength=function(){return this.length},this.getBounds=function(){return this.bounds},this.findClosestPointOnPath=function(n,e){var i=t.jsBezier.nearestPointOnCurve({x:n,y:e},this.curve);return{d:Math.sqrt(Math.pow(i.point.x-n,2)+Math.pow(i.point.y-e,2)),x:i.point.x,y:i.point.y,l:1-i.location,s:this}},this.lineIntersection=function(n,e,i,r){return t.jsBezier.lineIntersection(n,e,i,r,this.curve)}}},n.SegmentRenderer={getPath:function(t,n){return{Straight:function(n){var e=t.getCoordinates();return(n?"M "+e.x1+" "+e.y1+" ":"")+"L "+e.x2+" "+e.y2},Bezier:function(n){var e=t.params;return(n?"M "+e.x2+" "+e.y2+" ":"")+"C "+e.cp2x+" "+e.cp2y+" "+e.cp1x+" "+e.cp1y+" "+e.x1+" "+e.y1},Arc:function(n){var e=t.params,i=t.sweep>Math.PI?1:0,r=t.anticlockwise?0:1;return(n?"M"+t.x1+" "+t.y1+" ":"")+"A "+t.radius+" "+e.r+" 0 "+i+","+r+" "+t.x2+" "+t.y2}}[t.type](n)}};var r=function(){this.resetBounds=function(){this.bounds={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}},this.resetBounds()};n.Connectors.AbstractConnector=function(t){r.apply(this,arguments);var o=[],s=0,a=[],u=[],l=t.stub||0,c=e.isArray(l)?l[0]:l,h=e.isArray(l)?l[1]:l,f=t.gap||0,p=e.isArray(f)?f[0]:f,d=e.isArray(f)?f[1]:f,g=null,v=null;this.getPathData=function(){for(var t="",e=0;e<o.length;e++)t+=n.SegmentRenderer.getPath(o[e],0===e),t+=" ";return t},this.findSegmentForPoint=function(t,n){for(var e={d:1/0,s:null,x:null,y:null,l:null},i=0;i<o.length;i++){var r=o[i].findClosestPointOnPath(t,n);r.d<e.d&&(e.d=r.d,e.l=r.l,e.x=r.x,e.y=r.y,e.s=o[i],e.x1=r.x1,e.x2=r.x2,e.y1=r.y1,e.y2=r.y2,e.index=i,e.connectorLocation=a[i][0]+r.l*(a[i][1]-a[i][0]))}return e},this.lineIntersection=function(t,n,e,i){for(var r=[],s=0;s<o.length;s++)r.push.apply(r,o[s].lineIntersection(t,n,e,i));return r},this.boxIntersection=function(t,n,e,i){for(var r=[],s=0;s<o.length;s++)r.push.apply(r,o[s].boxIntersection(t,n,e,i));return r},this.boundingBoxIntersection=function(t){for(var n=[],e=0;e<o.length;e++)n.push.apply(n,o[e].boundingBoxIntersection(t));return n};var m=function(){for(var t=0,n=0;n<o.length;n++){var e=o[n].getLength();u[n]=e/s,a[n]=[t,t+=e/s]}},y=function(t,n){var e,i,r;if(n&&(t=t>0?t/s:(s+t)/s),1===t)e=o.length-1,r=1;else if(0===t)r=0,e=0;else if(t>=.5){for(e=0,r=0,i=a.length-1;i>-1;i--)if(a[i][1]>=t&&a[i][0]<=t){e=i,r=(t-a[i][0])/u[i];break}}else for(e=a.length-1,r=1,i=0;i<a.length;i++)if(a[i][1]>=t){e=i,r=(t-a[i][0])/u[i];break}return{segment:o[e],proportion:r,index:e}},b=function(t,e,i){if(i.x1!==i.x2||i.y1!==i.y2){var r=new n.Segments[e](i);o.push(r),s+=r.getLength(),t.updateBounds(r)}},_=function(){s=o.length=a.length=u.length=0};this.setSegments=function(t){g=[],s=0;for(var n=0;n<t.length;n++)g.push(t[n]),s+=t[n].getLength()},this.getLength=function(){return s};var P=function(t){this.strokeWidth=t.strokeWidth;var n=i.quadrant(t.sourcePos,t.targetPos),e=t.targetPos[0]<t.sourcePos[0],r=t.targetPos[1]<t.sourcePos[1],o=t.strokeWidth||1,s=t.sourceEndpoint.anchor.getOrientation(t.sourceEndpoint),a=t.targetEndpoint.anchor.getOrientation(t.targetEndpoint),u=e?t.targetPos[0]:t.sourcePos[0],l=r?t.targetPos[1]:t.sourcePos[1],f=Math.abs(t.targetPos[0]-t.sourcePos[0]),g=Math.abs(t.targetPos[1]-t.sourcePos[1]);if(0===s[0]&&0===s[1]||0===a[0]&&0===a[1]){var v=f>g?0:1,m=[1,0][v];s=[],a=[],s[v]=t.sourcePos[v]>t.targetPos[v]?-1:1,a[v]=t.sourcePos[v]>t.targetPos[v]?1:-1,s[m]=0,a[m]=0}var y=e?f+p*s[0]:p*s[0],b=r?g+p*s[1]:p*s[1],_=e?d*a[0]:f+d*a[0],P=r?d*a[1]:g+d*a[1],x=s[0]*a[0]+s[1]*a[1],C={sx:y,sy:b,tx:_,ty:P,lw:o,xSpan:Math.abs(_-y),ySpan:Math.abs(P-b),mx:(y+_)/2,my:(b+P)/2,so:s,to:a,x:u,y:l,w:f,h:g,segment:n,startStubX:y+s[0]*c,startStubY:b+s[1]*c,endStubX:_+a[0]*h,endStubY:P+a[1]*h,isXGreaterThanStubTimes2:Math.abs(y-_)>c+h,isYGreaterThanStubTimes2:Math.abs(b-P)>c+h,opposite:-1===x,perpendicular:0===x,orthogonal:1===x,sourceAxis:0===s[0]?"y":"x",points:[u,l,f,g,y,b,_,P],stubs:[c,h]};return C.anchorOrientation=C.opposite?"opposite":C.orthogonal?"orthogonal":"perpendicular",C};this.getSegments=function(){return o},this.updateBounds=function(t){var n=t.getBounds();this.bounds.minX=Math.min(this.bounds.minX,n.minX),this.bounds.maxX=Math.max(this.bounds.maxX,n.maxX),this.bounds.minY=Math.min(this.bounds.minY,n.minY),this.bounds.maxY=Math.max(this.bounds.maxY,n.maxY)};return this.pointOnPath=function(t,n){var e=y(t,n);return e.segment&&e.segment.pointOnPath(e.proportion,!1)||[0,0]},this.gradientAtPoint=function(t,n){var e=y(t,n);return e.segment&&e.segment.gradientAtPoint(e.proportion,!1)||0},this.pointAlongPathFrom=function(t,n,e){var i=y(t,e);return i.segment&&i.segment.pointAlongPathFrom(i.proportion,n,!1)||[0,0]},this.compute=function(t){v=P.call(this,t),_(),this._compute(v,t),this.x=v.points[0],this.y=v.points[1],this.w=v.points[2],this.h=v.points[3],this.segment=v.segment,m()},{addSegment:b,prepareCompute:P,sourceStub:c,targetStub:h,maxStub:Math.max(c,h),sourceGap:p,targetGap:d,maxGap:Math.max(p,d)}},e.extend(n.Connectors.AbstractConnector,r),n.Endpoints.AbstractEndpoint=function(t){r.apply(this,arguments);var n=this.compute=function(t,n,e,i){var r=this._compute.apply(this,arguments);return this.x=r[0],this.y=r[1],this.w=r[2],this.h=r[3],this.bounds.minX=this.x,this.bounds.minY=this.y,this.bounds.maxX=this.x+this.w,this.bounds.maxY=this.y+this.h,r};return{compute:n,cssClass:t.cssClass}},e.extend(n.Endpoints.AbstractEndpoint,r),n.Endpoints.Dot=function(t){this.type="Dot";n.Endpoints.AbstractEndpoint.apply(this,arguments);t=t||{},this.radius=t.radius||10,this.defaultOffset=.5*this.radius,this.defaultInnerRadius=this.radius/3,this._compute=function(t,n,e,i){this.radius=e.radius||this.radius;var r=t[0]-this.radius,o=t[1]-this.radius,s=2*this.radius,a=2*this.radius;if(e.stroke){var u=e.strokeWidth||1;r-=u,o-=u,s+=2*u,a+=2*u}return[r,o,s,a,this.radius]}},e.extend(n.Endpoints.Dot,n.Endpoints.AbstractEndpoint),n.Endpoints.Rectangle=function(t){this.type="Rectangle";n.Endpoints.AbstractEndpoint.apply(this,arguments);t=t||{},this.width=t.width||20,this.height=t.height||20,this._compute=function(t,n,e,i){var r=e.width||this.width,o=e.height||this.height,s=t[0]-r/2,a=t[1]-o/2;return[s,a,r,o]}},e.extend(n.Endpoints.Rectangle,n.Endpoints.AbstractEndpoint);var o=function(t){n.jsPlumbUIComponent.apply(this,arguments),this._jsPlumb.displayElements=[]};e.extend(o,n.jsPlumbUIComponent,{getDisplayElements:function(){return this._jsPlumb.displayElements},appendDisplayElement:function(t){this._jsPlumb.displayElements.push(t)}}),n.Endpoints.Image=function(i){this.type="Image",o.apply(this,arguments),n.Endpoints.AbstractEndpoint.apply(this,arguments);var r=i.onload,s=i.src||i.url,a=i.cssClass?" "+i.cssClass:"";this._jsPlumb.img=new Image,this._jsPlumb.ready=!1,this._jsPlumb.initialized=!1,this._jsPlumb.deleted=!1,this._jsPlumb.widthToUse=i.width,this._jsPlumb.heightToUse=i.height,this._jsPlumb.endpoint=i.endpoint,this._jsPlumb.img.onload=function(){null!=this._jsPlumb&&(this._jsPlumb.ready=!0,this._jsPlumb.widthToUse=this._jsPlumb.widthToUse||this._jsPlumb.img.width,this._jsPlumb.heightToUse=this._jsPlumb.heightToUse||this._jsPlumb.img.height,r&&r(this))}.bind(this),this._jsPlumb.endpoint.setImage=function(t,n){var e=t.constructor===String?t:t.src;r=n,this._jsPlumb.img.src=e,null!=this.canvas&&this.canvas.setAttribute("src",this._jsPlumb.img.src)}.bind(this),this._jsPlumb.endpoint.setImage(s,r),this._compute=function(t,n,e,i){return this.anchorPoint=t,this._jsPlumb.ready?[t[0]-this._jsPlumb.widthToUse/2,t[1]-this._jsPlumb.heightToUse/2,this._jsPlumb.widthToUse,this._jsPlumb.heightToUse]:[0,0,0,0]},this.canvas=n.createElement("img",{position:"absolute",margin:0,padding:0,outline:0},this._jsPlumb.instance.endpointClass+a),this._jsPlumb.widthToUse&&this.canvas.setAttribute("width",this._jsPlumb.widthToUse),this._jsPlumb.heightToUse&&this.canvas.setAttribute("height",this._jsPlumb.heightToUse),this._jsPlumb.instance.appendElement(this.canvas),this.actuallyPaint=function(t,n,i){if(!this._jsPlumb.deleted){this._jsPlumb.initialized||(this.canvas.setAttribute("src",this._jsPlumb.img.src),this.appendDisplayElement(this.canvas),this._jsPlumb.initialized=!0);var r=this.anchorPoint[0]-this._jsPlumb.widthToUse/2,o=this.anchorPoint[1]-this._jsPlumb.heightToUse/2;e.sizeElement(this.canvas,r,o,this._jsPlumb.widthToUse,this._jsPlumb.heightToUse)}},this.paint=function(n,e){null!=this._jsPlumb&&(this._jsPlumb.ready?this.actuallyPaint(n,e):t.setTimeout(function(){this.paint(n,e)}.bind(this),200))}},e.extend(n.Endpoints.Image,[o,n.Endpoints.AbstractEndpoint],{cleanup:function(t){t&&(this._jsPlumb.deleted=!0,this.canvas&&this.canvas.parentNode.removeChild(this.canvas),this.canvas=null)}}),n.Endpoints.Blank=function(t){n.Endpoints.AbstractEndpoint.apply(this,arguments);this.type="Blank",o.apply(this,arguments),this._compute=function(t,n,e,i){return[t[0],t[1],10,0]};var i=t.cssClass?" "+t.cssClass:"";this.canvas=n.createElement("div",{display:"block",width:"1px",height:"1px",background:"transparent",position:"absolute"},this._jsPlumb.instance.endpointClass+i),this._jsPlumb.instance.appendElement(this.canvas),this.paint=function(t,n){e.sizeElement(this.canvas,this.x,this.y,this.w,this.h)}},e.extend(n.Endpoints.Blank,[n.Endpoints.AbstractEndpoint,o],{cleanup:function(){this.canvas&&this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas)}}),n.Endpoints.Triangle=function(t){this.type="Triangle",n.Endpoints.AbstractEndpoint.apply(this,arguments);var e=this;t=t||{},t.width=t.width||55,t.height=t.height||55,this.width=t.width,this.height=t.height,this._compute=function(t,n,i,r){var o=i.width||e.width,s=i.height||e.height,a=t[0]-o/2,u=t[1]-s/2;return[a,u,o,s]}};var s=n.Overlays.AbstractOverlay=function(t){this.visible=!0,this.isAppendedAtTopLevel=!0,this.component=t.component,this.loc=null==t.location?.5:t.location,this.endpointLoc=null==t.endpointLocation?[.5,.5]:t.endpointLocation,this.visible=!1!==t.visible};s.prototype={cleanup:function(t){t&&(this.component=null,this.canvas=null,this.endpointLoc=null)},reattach:function(t,n){},setVisible:function(t){this.visible=t,this.component.repaint()},isVisible:function(){return this.visible},hide:function(){this.setVisible(!1)},show:function(){this.setVisible(!0)},incrementLocation:function(t){this.loc+=t,this.component.repaint()},setLocation:function(t){this.loc=t,this.component.repaint()},getLocation:function(){return this.loc},updateFrom:function(){}},n.Overlays.Arrow=function(t){this.type="Arrow",s.apply(this,arguments),this.isAppendedAtTopLevel=!1,t=t||{};var r=this;this.length=t.length||20,this.width=t.width||20,this.id=t.id,this.direction=(t.direction||1)<0?-1:1;var o=t.paintStyle||{"stroke-width":1},a=t.foldback||.623;this.computeMaxSize=function(){return 1.5*r.width},this.elementCreated=function(e,i){if(this.path=e,t.events)for(var r in t.events)n.on(e,r,t.events[r])},this.draw=function(t,n){var r,s,u,l,c;if(t.pointAlongPathFrom){if(e.isString(this.loc)||this.loc>1||this.loc<0){var h=parseInt(this.loc,10),f=this.loc<0?1:0;r=t.pointAlongPathFrom(f,h,!1),s=t.pointAlongPathFrom(f,h-this.direction*this.length/2,!1),u=i.pointOnLine(r,s,this.length)}else if(1===this.loc){if(r=t.pointOnPath(this.loc),s=t.pointAlongPathFrom(this.loc,-this.length),u=i.pointOnLine(r,s,this.length),-1===this.direction){var p=u;u=r,r=p}}else if(0===this.loc){if(u=t.pointOnPath(this.loc),s=t.pointAlongPathFrom(this.loc,this.length),r=i.pointOnLine(u,s,this.length),-1===this.direction){var d=u;u=r,r=d}}else r=t.pointAlongPathFrom(this.loc,this.direction*this.length/2),s=t.pointOnPath(this.loc),u=i.pointOnLine(r,s,this.length);l=i.perpendicularLineTo(r,u,this.width),c=i.pointOnLine(r,u,a*this.length);var g={hxy:r,tail:l,cxy:c},v=o.stroke||n.stroke,m=o.fill||n.stroke,y=o.strokeWidth||n.strokeWidth;return{component:t,d:g,"stroke-width":y,stroke:v,fill:m,minX:Math.min(r.x,l[0].x,l[1].x),maxX:Math.max(r.x,l[0].x,l[1].x),minY:Math.min(r.y,l[0].y,l[1].y),maxY:Math.max(r.y,l[0].y,l[1].y)}}return{component:t,minX:0,maxX:0,minY:0,maxY:0}}},e.extend(n.Overlays.Arrow,s,{updateFrom:function(t){this.length=t.length||this.length,this.width=t.width||this.width,this.direction=null!=t.direction?t.direction:this.direction,this.foldback=t.foldback||this.foldback},cleanup:function(){this.path&&this.path.parentNode&&this.path.parentNode.removeChild(this.path)}}),n.Overlays.PlainArrow=function(t){t=t||{};var e=n.extend(t,{foldback:1});n.Overlays.Arrow.call(this,e),this.type="PlainArrow"},e.extend(n.Overlays.PlainArrow,n.Overlays.Arrow),n.Overlays.Diamond=function(t){t=t||{};var e=t.length||40,i=n.extend(t,{length:e/2,foldback:2});n.Overlays.Arrow.call(this,i),this.type="Diamond"},e.extend(n.Overlays.Diamond,n.Overlays.Arrow);var a=function(t,n){return(null==t._jsPlumb.cachedDimensions||n)&&(t._jsPlumb.cachedDimensions=t.getDimensions()),t._jsPlumb.cachedDimensions},u=function(t){n.jsPlumbUIComponent.apply(this,arguments),s.apply(this,arguments);var i=this.fire;this.fire=function(){i.apply(this,arguments),this.component&&this.component.fire.apply(this.component,arguments)},this.detached=!1,this.id=t.id,this._jsPlumb.div=null,this._jsPlumb.initialised=!1,this._jsPlumb.component=t.component,this._jsPlumb.cachedDimensions=null,this._jsPlumb.create=t.create,this._jsPlumb.initiallyInvisible=!1===t.visible,this.getElement=function(){if(null==this._jsPlumb.div){var e=this._jsPlumb.div=n.getElement(this._jsPlumb.create(this._jsPlumb.component));e.style.position="absolute",jsPlumb.addClass(e,this._jsPlumb.instance.overlayClass+" "+(this.cssClass?this.cssClass:t.cssClass?t.cssClass:"")),this._jsPlumb.instance.appendElement(e),this._jsPlumb.instance.getId(e),this.canvas=e;var i="translate(-50%, -50%)";e.style.webkitTransform=i,e.style.mozTransform=i,e.style.msTransform=i,e.style.oTransform=i,e.style.transform=i,e._jsPlumb=this,!1===t.visible&&(e.style.display="none")}return this._jsPlumb.div},this.draw=function(t,n,i){var r=a(this);if(null!=r&&2===r.length){var o={x:0,y:0};if(i)o={x:i[0],y:i[1]};else if(t.pointOnPath){var s=this.loc,u=!1;(e.isString(this.loc)||this.loc<0||this.loc>1)&&(s=parseInt(this.loc,10),u=!0),o=t.pointOnPath(s,u)}else{var l=this.loc.constructor===Array?this.loc:this.endpointLoc;o={x:l[0]*t.w,y:l[1]*t.h}}var c=o.x-r[0]/2,h=o.y-r[1]/2;return{component:t,d:{minx:c,miny:h,td:r,cxy:o},minX:c,maxX:c+r[0],minY:h,maxY:h+r[1]}}return{minX:0,maxX:0,minY:0,maxY:0}}};e.extend(u,[n.jsPlumbUIComponent,s],{getDimensions:function(){return[1,1]},setVisible:function(t){this._jsPlumb.div&&(this._jsPlumb.div.style.display=t?"block":"none",t&&this._jsPlumb.initiallyInvisible&&(a(this,!0),this.component.repaint(),this._jsPlumb.initiallyInvisible=!1))},clearCachedDimensions:function(){this._jsPlumb.cachedDimensions=null},cleanup:function(t){t?null!=this._jsPlumb.div&&(this._jsPlumb.div._jsPlumb=null,this._jsPlumb.instance.removeElement(this._jsPlumb.div)):(this._jsPlumb&&this._jsPlumb.div&&this._jsPlumb.div.parentNode&&this._jsPlumb.div.parentNode.removeChild(this._jsPlumb.div),this.detached=!0)},reattach:function(t,n){null!=this._jsPlumb.div&&t.getContainer().appendChild(this._jsPlumb.div),this.detached=!1},computeMaxSize:function(){var t=a(this);return Math.max(t[0],t[1])},paint:function(t,n){this._jsPlumb.initialised||(this.getElement(),t.component.appendDisplayElement(this._jsPlumb.div),this._jsPlumb.initialised=!0,this.detached&&this._jsPlumb.div.parentNode.removeChild(this._jsPlumb.div)),this._jsPlumb.div.style.left=t.component.x+t.d.minx+"px",this._jsPlumb.div.style.top=t.component.y+t.d.miny+"px"}}),n.Overlays.Custom=function(t){this.type="Custom",u.apply(this,arguments)},e.extend(n.Overlays.Custom,u),n.Overlays.GuideLines=function(){var t=this;t.length=50,t.strokeWidth=5,this.type="GuideLines",s.apply(this,arguments),n.jsPlumbUIComponent.apply(this,arguments),this.draw=function(n,e){var r=n.pointAlongPathFrom(t.loc,t.length/2),o=n.pointOnPath(t.loc),s=i.pointOnLine(r,o,t.length),a=i.perpendicularLineTo(r,s,40),u=i.perpendicularLineTo(s,r,20);return{connector:n,head:r,tail:s,headLine:u,tailLine:a,minX:Math.min(r.x,s.x,u[0].x,u[1].x),minY:Math.min(r.y,s.y,u[0].y,u[1].y),maxX:Math.max(r.x,s.x,u[0].x,u[1].x),maxY:Math.max(r.y,s.y,u[0].y,u[1].y)}}},n.Overlays.Label=function(t){this.labelStyle=t.labelStyle;this.cssClass=null!=this.labelStyle?this.labelStyle.cssClass:null;var e=n.extend({create:function(){return n.createElement("div")}},t);if(n.Overlays.Custom.call(this,e),this.type="Label",this.label=t.label||"",this.labelText=null,this.labelStyle){var i=this.getElement();if(this.labelStyle.font=this.labelStyle.font||"12px sans-serif",i.style.font=this.labelStyle.font,i.style.color=this.labelStyle.color||"black",this.labelStyle.fill&&(i.style.background=this.labelStyle.fill),this.labelStyle.borderWidth>0){var r=this.labelStyle.borderStyle?this.labelStyle.borderStyle:"black";i.style.border=this.labelStyle.borderWidth+"px solid "+r}this.labelStyle.padding&&(i.style.padding=this.labelStyle.padding)}},e.extend(n.Overlays.Label,n.Overlays.Custom,{cleanup:function(t){t&&(this.div=null,this.label=null,this.labelText=null,this.cssClass=null,this.labelStyle=null)},getLabel:function(){return this.label},setLabel:function(t){this.label=t,this.labelText=null,this.clearCachedDimensions(),this.update(),this.component.repaint()},getDimensions:function(){return this.update(),u.prototype.getDimensions.apply(this,arguments)},update:function(){if("function"===typeof this.label){var t=this.label(this);this.getElement().innerHTML=t.replace(/\r\n/g,"<br/>")}else null==this.labelText&&(this.labelText=this.label,this.getElement().innerHTML=this.labelText.replace(/\r\n/g,"<br/>"))},updateFrom:function(t){null!=t.label&&this.setLabel(t.label)}})}.call("undefined"!==typeof window?window:this),function(){"use strict";var t=this,n=t.jsPlumbUtil,e=t.jsPlumbInstance,i="jtk-group-collapsed",r="jtk-group-expanded",o="[jtk-group-content]",s="elementDraggable",a="stop",u="revert",l="_groupManager",c="_jsPlumbGroup",h="_jsPlumbGroupDrag",f="group:addMember",p="group:removeMember",d="group:add",g="group:remove",v="group:expand",m="group:collapse",y="groupDragStop",b="connectionMoved",_="internal.connectionDetached",P="removeAll",x="orphanAll",C="show",j="hide",w=function(t){var e={},o={},s={},a=this;function u(n,e){var i=t.getContainer(),r=!1;while(!r){if(null==n||n===i)return!1;if(n===e)return!0;n=n.parentNode}}function l(t){delete t.proxies;var e,i=o[t.id];null!=i&&(e=function(n){return n.id===t.id},n.removeWithFunction(i.connections.source,e),n.removeWithFunction(i.connections.target,e),delete o[t.id]),i=s[t.id],null!=i&&(e=function(n){return n.id===t.id},n.removeWithFunction(i.connections.source,e),n.removeWithFunction(i.connections.target,e),delete s[t.id])}function h(n,e){for(var i=n.getEl().querySelectorAll(".jtk-managed"),r=0;r<i.length;r++)t[e?C:j](i[r],!0)}t.bind("connection",(function(e){var i=t.getGroupFor(e.source),r=t.getGroupFor(e.target);null!=i&&null!=r&&i===r?(o[e.connection.id]=i,s[e.connection.id]=i):(null!=i&&(n.suggest(i.connections.source,e.connection),o[e.connection.id]=i),null!=r&&(n.suggest(r.connections.target,e.connection),s[e.connection.id]=r))})),t.bind(_,(function(t){l(t.connection)})),t.bind(b,(function(t){var n=0===t.index?o:s,e=n[t.connection.id];if(e){var i=e.connections[0===t.index?"source":"target"],r=i.indexOf(t.connection);-1!==r&&i.splice(r,1)}})),this.addGroup=function(n){t.addClass(n.getEl(),r),e[n.id]=n,n.manager=this,w(n),t.fire(d,{group:n})},this.addToGroup=function(n,e,i){if(n=this.getGroup(n),n){var r=n.getEl();if(e._isJsPlumbGroup)return;var o=e._jsPlumbGroup;if(o!==n){t.removeFromDragSelection(e);var s=t.getOffset(e,!0),u=n.collapsed?t.getOffset(r,!0):t.getOffset(n.getDragArea(),!0);null!=o&&(o.remove(e,!1,i,!1,n),a.updateConnectionsForGroup(o)),n.add(e,i);var l=function(t,e){var i=0===e?1:0;t.each((function(t){t.setVisible(!1),t.endpoints[i].element._jsPlumbGroup===n?(t.endpoints[i].setVisible(!1),y(t,i,n)):(t.endpoints[e].setVisible(!1),p(t,e,n))}))};n.collapsed&&(l(t.select({source:e}),0),l(t.select({target:e}),1));var c=t.getId(e);t.dragManager.setParent(e,c,r,t.getId(r),s);var h={left:s.left-u.left,top:s.top-u.top};if(t.setPosition(e,h),t.dragManager.revalidateParent(e,c,s),a.updateConnectionsForGroup(n),t.revalidate(c),!i){var d={group:n,el:e,pos:h};o&&(d.sourceGroup=o),t.fire(f,d)}}}},this.removeFromGroup=function(t,n,e){if(t=this.getGroup(t),t){if(t.collapsed){var i=function(e,i){for(var r=0;r<e.length;r++){var o=e[r];if(o.proxies)for(var s=0;s<o.proxies.length;s++)if(null!=o.proxies[s]){var a=o.proxies[s].originalEp.element;(a===n||u(a,n))&&y(o,i,t)}}};i(t.connections.source.slice(),0),i(t.connections.target.slice(),1)}t.remove(n,null,e)}},this.getGroup=function(t){var i=t;if(n.isString(t)&&(i=e[t],null==i))throw new TypeError("No such group ["+t+"]");return i},this.getGroups=function(){var t=[];for(var n in e)t.push(e[n]);return t},this.removeGroup=function(n,i,r,o){n=this.getGroup(n),this.expandGroup(n,!0);var s=n[i?P:x](r,o);return t.remove(n.getEl()),delete e[n.id],delete t._groups[n.id],t.fire(g,{group:n}),s},this.removeAllGroups=function(t,n,i){for(var r in e)this.removeGroup(e[r],t,n,i)};var p=function(n,e,i){var r=n.endpoints[0===e?1:0].element;if(!r[c]||r[c].shouldProxy()||!r[c].collapsed){var o=i.getEl(),s=t.getId(o);t.proxyConnection(n,e,o,s,(function(t,n){return i.getEndpoint(t,n)}),(function(t,n){return i.getAnchor(t,n)}))}};this.collapseGroup=function(n){if(n=this.getGroup(n),null!=n&&!n.collapsed){var e=n.getEl();if(h(n,!1),n.shouldProxy()){var o=function(t,e){for(var i=0;i<t.length;i++){var r=t[i];p(r,e,n)}};o(n.connections.source,0),o(n.connections.target,1)}n.collapsed=!0,t.removeClass(e,r),t.addClass(e,i),t.revalidate(e),t.fire(m,{group:n})}};var y=function(n,e,i){t.unproxyConnection(n,e,t.getId(i.getEl()))};function w(n){for(var e=n.getMembers().slice(),i=[],r=0;r<e.length;r++)Array.prototype.push.apply(i,e[r].querySelectorAll(".jtk-managed"));Array.prototype.push.apply(e,i);var a=t.getConnections({source:e,scope:"*"},!0),u=t.getConnections({target:e,scope:"*"},!0),l={};n.connections.source.length=0,n.connections.target.length=0;var c=function(e){for(var i=0;i<e.length;i++)if(!l[e[i].id]){l[e[i].id]=!0;var r=t.getGroupFor(e[i].source),a=t.getGroupFor(e[i].target);r===n?(a!==n&&n.connections.source.push(e[i]),o[e[i].id]=n):a===n&&(n.connections.target.push(e[i]),s[e[i].id]=n)}};c(a),c(u)}this.expandGroup=function(n,e){if(n=this.getGroup(n),null!=n&&n.collapsed){var o=n.getEl();if(h(n,!0),n.shouldProxy()){var s=function(t,e){for(var i=0;i<t.length;i++){var r=t[i];y(r,e,n)}};s(n.connections.source,0),s(n.connections.target,1)}n.collapsed=!1,t.addClass(o,r),t.removeClass(o,i),t.revalidate(o),this.repaintGroup(n),e||t.fire(v,{group:n})}},this.repaintGroup=function(n){n=this.getGroup(n);for(var e=n.getMembers(),i=0;i<e.length;i++)t.revalidate(e[i])},this.updateConnectionsForGroup=w,this.refreshAllGroups=function(){for(var n in e)w(e[n]),t.dragManager.updateOffsets(t.getId(e[n].getEl()))}},E=function(e,i){var r=this,l=i.el;this.getEl=function(){return l},this.id=i.id||n.uuid(),l._isJsPlumbGroup=!0;var f=this.getDragArea=function(){var t=e.getSelector(l,o);return t&&t.length>0?t[0]:l},d=!0===i.ghost,g=d||!0===i.constrain,v=!1!==i.revert,m=!0===i.orphan,b=!0===i.prune,_=!0===i.dropOverride,P=!1!==i.proxied,x=[];if(this.connections={source:[],target:[],internal:[]},this.getAnchor=function(t,n){return i.anchor||"Continuous"},this.getEndpoint=function(t,n){return i.endpoint||["Dot",{radius:10}]},this.collapsed=!1,!1!==i.draggable){var C={drag:function(){for(var t=0;t<x.length;t++)e.draw(x[t])},stop:function(t){e.fire(y,jsPlumb.extend(t,{group:r}))},scope:h};i.dragOptions&&t.jsPlumb.extend(C,i.dragOptions),e.draggable(i.el,C)}!1!==i.droppable&&e.droppable(i.el,{drop:function(t){var n=t.drag.el;if(!n._isJsPlumbGroup){var i=n._jsPlumbGroup;if(i!==r){if(null!=i&&i.overrideDrop(n,r))return;e.getGroupManager().addToGroup(r,n,!1)}}}});var j=function(t,n){for(var e=null==t.nodeType?t:[t],i=0;i<e.length;i++)n(e[i])};function w(t){return t.offsetParent}function E(t,n){var i=w(t),r=e.getSize(i),o=e.getSize(t),s=n[0],a=s+o[0],u=n[1],l=u+o[1];return a>0&&s<r[0]&&l>0&&u<r[1]}function S(t){var n=e.getId(t),i=e.getOffset(t);return t.parentNode.removeChild(t),e.getContainer().appendChild(t),e.setPosition(t,i),I(t),e.dragManager.clearParent(t,n),[n,i]}function D(t){var n=[];function i(t,n,i){var r=null;if(!E(t,[n,i])){var o=t._jsPlumbGroup;b?e.remove(t):r=S(t),o.remove(t)}return r}for(var r=0;r<t.selection.length;r++)n.push(i(t.selection[r][0],t.selection[r][1].left,t.selection[r][1].top));return 1===n.length?n[0]:n}function A(t){var n=e.getId(t);e.revalidate(t),e.dragManager.revalidateParent(t,n)}function I(t){t._katavorioDrag&&((b||m)&&t._katavorioDrag.off(a,D),b||m||!v||(t._katavorioDrag.off(u,A),t._katavorioDrag.setRevert(null)))}function k(t){t._katavorioDrag&&((b||m)&&t._katavorioDrag.on(a,D),g&&t._katavorioDrag.setConstrain(!0),d&&t._katavorioDrag.setUseGhostProxy(!0),b||m||!v||(t._katavorioDrag.on(u,A),t._katavorioDrag.setRevert((function(t,n){return!E(t,n)}))))}this.overrideDrop=function(t,n){return _&&(v||b||m)},this.add=function(t,n){var i=f();j(t,(function(t){if(null!=t._jsPlumbGroup){if(t._jsPlumbGroup===r)return;t._jsPlumbGroup.remove(t,!0,n,!1)}t._jsPlumbGroup=r,x.push(t),e.isAlreadyDraggable(t)&&k(t),t.parentNode!==i&&i.appendChild(t)})),e.getGroupManager().updateConnectionsForGroup(r)},this.remove=function(t,i,o,s,a){j(t,(function(t){if(t._jsPlumbGroup===r){if(delete t._jsPlumbGroup,n.removeWithFunction(x,(function(n){return n===t})),i)try{r.getDragArea().removeChild(t)}catch(u){jsPlumbUtil.log("Could not remove element from Group "+u)}if(I(t),!o){var s={group:r,el:t};a&&(s.targetGroup=a),e.fire(p,s)}}})),s||e.getGroupManager().updateConnectionsForGroup(r)},this.removeAll=function(t,n){for(var i=0,o=x.length;i<o;i++){var s=x[0];r.remove(s,t,n,!0),e.remove(s,!0)}x.length=0,e.getGroupManager().updateConnectionsForGroup(r)},this.orphanAll=function(){for(var t={},n=0;n<x.length;n++){var e=S(x[n]);t[e[0]]=e[1]}return x.length=0,t},this.getMembers=function(){return x},l[c]=this,e.bind(s,function(t){t.el._jsPlumbGroup===this&&k(t.el)}.bind(this)),this.shouldProxy=function(){return P},e.getGroupManager().addGroup(this)};e.prototype.addGroup=function(t){var n=this;if(n._groups=n._groups||{},null!=n._groups[t.id])throw new TypeError("cannot create Group ["+t.id+"]; a Group with that ID exists");if(null!=t.el[c])throw new TypeError("cannot create Group ["+t.id+"]; the given element is already a Group");var e=new E(n,t);return n._groups[e.id]=e,t.collapsed&&this.collapseGroup(e),e},e.prototype.addToGroup=function(t,n,e){var i=function(n){var i=this.getId(n);this.manage(i,n),this.getGroupManager().addToGroup(t,n,e)}.bind(this);if(Array.isArray(n))for(var r=0;r<n.length;r++)i(n[r]);else i(n)},e.prototype.removeFromGroup=function(t,n,e){this.getGroupManager().removeFromGroup(t,n,e),this.getContainer().appendChild(n)},e.prototype.removeGroup=function(t,n,e,i){return this.getGroupManager().removeGroup(t,n,e,i)},e.prototype.removeAllGroups=function(t,n,e){this.getGroupManager().removeAllGroups(t,n,e)},e.prototype.getGroup=function(t){return this.getGroupManager().getGroup(t)},e.prototype.getGroups=function(){return this.getGroupManager().getGroups()},e.prototype.expandGroup=function(t){this.getGroupManager().expandGroup(t)},e.prototype.collapseGroup=function(t){this.getGroupManager().collapseGroup(t)},e.prototype.repaintGroup=function(t){this.getGroupManager().repaintGroup(t)},e.prototype.toggleGroup=function(t){t=this.getGroupManager().getGroup(t),null!=t&&this.getGroupManager()[t.collapsed?"expandGroup":"collapseGroup"](t)},e.prototype.getGroupManager=function(){var t=this[l];return null==t&&(t=this[l]=new w(this)),t},e.prototype.removeGroupManager=function(){delete this[l]},e.prototype.getGroupFor=function(t){if(t=this.getElement(t),t){var n=this.getContainer(),e=!1,i=null;while(!e)null==t||t===n?e=!0:t[c]?(i=t[c],t,e=!0):t=t.parentNode;return i}}}.call("undefined"!==typeof window?window:this),function(){"use strict";var t=this,n=t.jsPlumb,e=t.jsPlumbUtil,i="Straight",r="Arc",o=function(t){this.type="Flowchart",t=t||{},t.stub=null==t.stub?30:t.stub;var e,o=n.Connectors.AbstractConnector.apply(this,arguments),s=null==t.midpoint?.5:t.midpoint,a=!0===t.alwaysRespectStubs,u=null,l=null,c=null!=t.cornerRadius?t.cornerRadius:0,h=(t.loopbackRadius,function(t){return t<0?-1:0===t?0:1}),f=function(t){return[h(t[2]-t[0]),h(t[3]-t[1])]},p=function(t,n,e,i){if(u!==n||l!==e){var r=null==u?i.sx:u,o=null==l?i.sy:l,s=r===n?"v":"h";u=n,l=e,t.push([r,o,n,e,s])}},d=function(t){return Math.sqrt(Math.pow(t[0]-t[2],2)+Math.pow(t[1]-t[3],2))},g=function(t){var n=[];return n.push.apply(n,t),n},v=function(t,n,e){for(var s,a,u,l=null,h=0;h<n.length-1;h++){if(l=l||g(n[h]),s=g(n[h+1]),a=f(l),u=f(s),c>0&&l[4]!==s[4]){var p=Math.min(d(l),d(s)),v=Math.min(c,p/2);l[2]-=a[0]*v,l[3]-=a[1]*v,s[0]+=u[0]*v,s[1]+=u[1]*v;var m=a[1]===u[0]&&1===u[0]||a[1]===u[0]&&0===u[0]&&a[0]!==u[1]||a[1]===u[0]&&-1===u[0],y=s[1]>l[3]?1:-1,b=s[0]>l[2]?1:-1,_=y===b,P=_&&m||!_&&!m?s[0]:l[2],x=_&&m||!_&&!m?l[3]:s[1];o.addSegment(t,i,{x1:l[0],y1:l[1],x2:l[2],y2:l[3]}),o.addSegment(t,r,{r:v,x1:l[2],y1:l[3],x2:s[0],y2:s[1],cx:P,cy:x,ac:m})}else{var C=l[2]===l[0]?0:l[2]>l[0]?e.lw/2:-e.lw/2,j=l[3]===l[1]?0:l[3]>l[1]?e.lw/2:-e.lw/2;o.addSegment(t,i,{x1:l[0]-C,y1:l[1]-j,x2:l[2]+C,y2:l[3]+j})}l=s}null!=s&&o.addSegment(t,i,{x1:s[0],y1:s[1],x2:s[2],y2:s[3]})};this._compute=function(t,n){e=[],u=null,l=null,null;var i=function(){return[t.startStubX,t.startStubY,t.endStubX,t.endStubY]},r={perpendicular:i,orthogonal:i,opposite:function(n){var e=t,i="x"===n?0:1,r={x:function(){return 1===e.so[i]&&(e.startStubX>e.endStubX&&e.tx>e.startStubX||e.sx>e.endStubX&&e.tx>e.sx)||-1===e.so[i]&&(e.startStubX<e.endStubX&&e.tx<e.startStubX||e.sx<e.endStubX&&e.tx<e.sx)},y:function(){return 1===e.so[i]&&(e.startStubY>e.endStubY&&e.ty>e.startStubY||e.sy>e.endStubY&&e.ty>e.sy)||-1===e.so[i]&&(e.startStubY<e.endStubY&&e.ty<e.startStubY||e.sy<e.endStubY&&e.ty<e.sy)}};return!a&&r[n]()?{x:[(t.sx+t.tx)/2,t.startStubY,(t.sx+t.tx)/2,t.endStubY],y:[t.startStubX,(t.sy+t.ty)/2,t.endStubX,(t.sy+t.ty)/2]}[n]:[t.startStubX,t.startStubY,t.endStubX,t.endStubY]}},c=r[t.anchorOrientation](t.sourceAxis),h="x"===t.sourceAxis?0:1,f="x"===t.sourceAxis?1:0,d=c[h],g=c[f],m=c[h+2],y=c[f+2];p(e,c[0],c[1],t);var b=t.startStubX+(t.endStubX-t.startStubX)*s,_=t.startStubY+(t.endStubY-t.startStubY)*s,P={x:[0,1],y:[1,0]},x={perpendicular:function(n){var e=t,i={x:[[[1,2,3,4],null,[2,1,4,3]],null,[[4,3,2,1],null,[3,4,1,2]]],y:[[[3,2,1,4],null,[2,3,4,1]],null,[[4,1,2,3],null,[1,4,3,2]]]},r={x:[[e.startStubX,e.endStubX],null,[e.endStubX,e.startStubX]],y:[[e.startStubY,e.endStubY],null,[e.endStubY,e.startStubY]]},o={x:[[b,e.startStubY],[b,e.endStubY]],y:[[e.startStubX,_],[e.endStubX,_]]},s={x:[[e.endStubX,e.startStubY]],y:[[e.startStubX,e.endStubY]]},a={x:[[e.startStubX,e.endStubY],[e.endStubX,e.endStubY]],y:[[e.endStubX,e.startStubY],[e.endStubX,e.endStubY]]},u={x:[[e.startStubX,_],[e.endStubX,_],[e.endStubX,e.endStubY]],y:[[b,e.startStubY],[b,e.endStubY],[e.endStubX,e.endStubY]]},l={x:[e.startStubY,e.endStubY],y:[e.startStubX,e.endStubX]},c=P[n][0],h=P[n][1],f=e.so[c]+1,p=e.to[h]+1,d=-1===e.to[h]&&l[n][1]<l[n][0]||1===e.to[h]&&l[n][1]>l[n][0],g=r[n][f][0],v=r[n][f][1],m=i[n][f][p];return e.segment===m[3]||e.segment===m[2]&&d?o[n]:e.segment===m[2]&&v<g?s[n]:e.segment===m[2]&&v>=g||e.segment===m[1]&&!d?u[n]:e.segment===m[0]||e.segment===m[1]&&d?a[n]:void 0},orthogonal:function(n,e,i,r,o){var s=t,a={x:-1===s.so[0]?Math.min(e,r):Math.max(e,r),y:-1===s.so[1]?Math.min(e,r):Math.max(e,r)}[n];return{x:[[a,i],[a,o],[r,o]],y:[[i,a],[o,a],[o,r]]}[n]},opposite:function(e,i,r,s){var a=t,u={x:"y",y:"x"}[e],l={x:"height",y:"width"}[e],c=a["is"+e.toUpperCase()+"GreaterThanStubTimes2"];if(n.sourceEndpoint.elementId===n.targetEndpoint.elementId){var f=r+(1-n.sourceEndpoint.anchor[u])*n.sourceInfo[l]+o.maxStub;return{x:[[i,f],[s,f]],y:[[f,i],[f,s]]}[e]}return!c||1===a.so[h]&&i>s||-1===a.so[h]&&i<s?{x:[[i,_],[s,_]],y:[[b,i],[b,s]]}[e]:1===a.so[h]&&i<s||-1===a.so[h]&&i>s?{x:[[b,a.sy],[b,a.ty]],y:[[a.sx,_],[a.tx,_]]}[e]:void 0}},C=x[t.anchorOrientation](t.sourceAxis,d,g,m,y);if(C)for(var j=0;j<C.length;j++)p(e,C[j][0],C[j][1],t);p(e,c[2],c[3],t),p(e,t.tx,t.ty,t),v(this,e,t)}};n.Connectors.Flowchart=o,e.extend(n.Connectors.Flowchart,n.Connectors.AbstractConnector)}.call("undefined"!==typeof window?window:this),function(){"use strict";var t=this,n=t.jsPlumb,e=t.jsPlumbUtil;n.Connectors.AbstractBezierConnector=function(t){t=t||{};var e,i=!1!==t.showLoopback,r=(t.curviness,t.margin||5),o=(t.proximityLimit,t.orientation&&"clockwise"===t.orientation),s=t.loopbackRadius||25;return this._compute=function(t,n){var a=n.sourcePos,u=n.targetPos,l=Math.abs(a[0]-u[0]),c=Math.abs(a[1]-u[1]);if(i&&n.sourceEndpoint.elementId===n.targetEndpoint.elementId){!0;var h=n.sourcePos[0],f=n.sourcePos[1]-r,p=h,d=f-s,g=p-s,v=d-s;l=2*s,c=2*s,t.points[0]=g,t.points[1]=v,t.points[2]=l,t.points[3]=c,e.addSegment(this,"Arc",{loopback:!0,x1:h-g+4,y1:f-v,startAngle:0,endAngle:2*Math.PI,r:s,ac:!o,x2:h-g-4,y2:f-v,cx:p-g,cy:d-v})}else!1,this._computeBezier(t,n,a,u,l,c)},e=n.Connectors.AbstractConnector.apply(this,arguments),e},e.extend(n.Connectors.AbstractBezierConnector,n.Connectors.AbstractConnector);var i=function(t){t=t||{},this.type="Bezier";var e=n.Connectors.AbstractBezierConnector.apply(this,arguments),i=t.curviness||150,r=10;this.getCurviness=function(){return i},this._findControlPoint=function(t,n,e,o,s,a,u){var l=a[0]!==u[0]||a[1]===u[1],c=[];return l?(0===u[0]?c.push(e[0]<n[0]?t[0]+r:t[0]-r):c.push(t[0]+i*u[0]),0===u[1]?c.push(e[1]<n[1]?t[1]+r:t[1]-r):c.push(t[1]+i*a[1])):(0===a[0]?c.push(n[0]<e[0]?t[0]+r:t[0]-r):c.push(t[0]-i*a[0]),0===a[1]?c.push(n[1]<e[1]?t[1]+r:t[1]-r):c.push(t[1]+i*u[1])),c},this._computeBezier=function(t,n,i,r,o,s){var a,u,l=i[0]<r[0]?o:0,c=i[1]<r[1]?s:0,h=i[0]<r[0]?0:o,f=i[1]<r[1]?0:s;a=this._findControlPoint([l,c],i,r,n.sourceEndpoint,n.targetEndpoint,t.so,t.to),u=this._findControlPoint([h,f],r,i,n.targetEndpoint,n.sourceEndpoint,t.to,t.so),e.addSegment(this,"Bezier",{x1:l,y1:c,x2:h,y2:f,cp1x:a[0],cp1y:a[1],cp2x:u[0],cp2y:u[1]})}};n.Connectors.Bezier=i,e.extend(i,n.Connectors.AbstractBezierConnector)}.call("undefined"!==typeof window?window:this),function(){"use strict";var t=this,n=t.jsPlumb,e=t.jsPlumbUtil,i=function(t,n,e,i){return t<=e&&i<=n?1:t<=e&&n<=i?2:e<=t&&i>=n?3:4},r=function(t,n,e,i,r,o,s,a,u){return a<=u?[t,n]:1===e?i[3]<=0&&r[3]>=1?[t+(i[2]<.5?-1*o:o),n]:i[2]>=1&&r[2]<=0?[t,n+(i[3]<.5?-1*s:s)]:[t+-1*o,n+-1*s]:2===e?i[3]>=1&&r[3]<=0?[t+(i[2]<.5?-1*o:o),n]:i[2]>=1&&r[2]<=0?[t,n+(i[3]<.5?-1*s:s)]:[t+o,n+-1*s]:3===e?i[3]>=1&&r[3]<=0?[t+(i[2]<.5?-1*o:o),n]:i[2]<=0&&r[2]>=1?[t,n+(i[3]<.5?-1*s:s)]:[t+-1*o,n+-1*s]:4===e?i[3]<=0&&r[3]>=1?[t+(i[2]<.5?-1*o:o),n]:i[2]<=0&&r[2]>=1?[t,n+(i[3]<.5?-1*s:s)]:[t+o,n+-1*s]:void 0},o=function(t){t=t||{},this.type="StateMachine";var e,o=n.Connectors.AbstractBezierConnector.apply(this,arguments),s=t.curviness||10,a=t.margin||5,u=t.proximityLimit||80;t.orientation&&t.orientation;this._computeBezier=function(t,n,l,c,h,f){var p=n.sourcePos[0]<n.targetPos[0]?0:h,d=n.sourcePos[1]<n.targetPos[1]?0:f,g=n.sourcePos[0]<n.targetPos[0]?h:0,v=n.sourcePos[1]<n.targetPos[1]?f:0;0===n.sourcePos[2]&&(p-=a),1===n.sourcePos[2]&&(p+=a),0===n.sourcePos[3]&&(d-=a),1===n.sourcePos[3]&&(d+=a),0===n.targetPos[2]&&(g-=a),1===n.targetPos[2]&&(g+=a),0===n.targetPos[3]&&(v-=a),1===n.targetPos[3]&&(v+=a);var m,y,b,_,P=(p+g)/2,x=(d+v)/2,C=i(p,d,g,v),j=Math.sqrt(Math.pow(g-p,2)+Math.pow(v-d,2));e=r(P,x,C,n.sourcePos,n.targetPos,s,s,j,u),m=e[0],y=e[0],b=e[1],_=e[1],o.addSegment(this,"Bezier",{x1:g,y1:v,x2:p,y2:d,cp1x:m,cp1y:b,cp2x:y,cp2y:_})}};n.Connectors.StateMachine=o,e.extend(o,n.Connectors.AbstractBezierConnector)}.call("undefined"!==typeof window?window:this),function(){"use strict";var t=this,n=t.jsPlumb,e=t.jsPlumbUtil,i="Straight",r=function(t){this.type=i;var e=n.Connectors.AbstractConnector.apply(this,arguments);this._compute=function(t,n){e.addSegment(this,i,{x1:t.sx,y1:t.sy,x2:t.startStubX,y2:t.startStubY}),e.addSegment(this,i,{x1:t.startStubX,y1:t.startStubY,x2:t.endStubX,y2:t.endStubY}),e.addSegment(this,i,{x1:t.endStubX,y1:t.endStubY,x2:t.tx,y2:t.ty})}};n.Connectors.Straight=r,e.extend(r,n.Connectors.AbstractConnector)}.call("undefined"!==typeof window?window:this),function(){"use strict";var t=this,n=t.jsPlumb,e=t.jsPlumbUtil,i={"stroke-linejoin":"stroke-linejoin","stroke-dashoffset":"stroke-dashoffset","stroke-linecap":"stroke-linecap"},r="stroke-dasharray",o="dashstyle",s="linearGradient",a="radialGradient",u="defs",l="fill",c="stop",h="stroke",f="stroke-width",p="style",d="none",g="jsplumb_gradient_",v="strokeWidth",m={svg:"http://www.w3.org/2000/svg"},y=function(t,n){for(var e in n)t.setAttribute(e,""+n[e])},b=function(t,e){return e=e||{},e.version="1.1",e.xmlns=m.svg,n.createElementNS(m.svg,t,null,null,e)},_=function(t){return"position:absolute;left:"+t[0]+"px;top:"+t[1]+"px"},P=function(t){for(var n=t.querySelectorAll(" defs,linearGradient,radialGradient"),e=0;e<n.length;e++)n[e].parentNode.removeChild(n[e])},x=function(t,n,e,i,r){var o,f=g+r._jsPlumb.instance.idstamp();P(t),o=e.gradient.offset?b(a,{id:f}):b(s,{id:f,gradientUnits:"userSpaceOnUse"});var p=b(u);t.appendChild(p),p.appendChild(o);for(var d=0;d<e.gradient.stops.length;d++){var v=1===r.segment||2===r.segment?d:e.gradient.stops.length-1-d,m=e.gradient.stops[v][1],y=b(c,{offset:Math.floor(100*e.gradient.stops[d][0])+"%","stop-color":m});o.appendChild(y)}var _=e.stroke?h:l;n.setAttribute(_,"url(#"+f+")")},C=function(t,n,e,s,a){if(n.setAttribute(l,e.fill?e.fill:d),n.setAttribute(h,e.stroke?e.stroke:d),e.gradient?x(t,n,e,s,a):(P(t),n.setAttribute(p,"")),e.strokeWidth&&n.setAttribute(f,e.strokeWidth),e[o]&&e[v]&&!e[r]){var u=-1===e[o].indexOf(",")?" ":",",c=e[o].split(u),g="";c.forEach((function(t){g+=Math.floor(t*e.strokeWidth)+u})),n.setAttribute(r,g)}else e[r]&&n.setAttribute(r,e[r]);for(var m in i)e[m]&&n.setAttribute(i[m],e[m])},j=function(t,n,e){t.childNodes.length>e?t.insertBefore(n,t.childNodes[e]):t.appendChild(n)};e.svg={node:b,attr:y,pos:_};var w=function(t){var i=t.pointerEventsSpec||"all",r={};n.jsPlumbUIComponent.apply(this,t.originalArgs),this.canvas=null,this.path=null,this.svg=null,this.bgCanvas=null;var o=t.cssClass+" "+(t.originalArgs[0].cssClass||""),s={style:"",width:0,height:0,"pointer-events":i,position:"absolute"};this.svg=b("svg",s),t.useDivWrapper?(this.canvas=n.createElement("div",{position:"absolute"}),e.sizeElement(this.canvas,0,0,1,1),this.canvas.className=o):(y(this.svg,{class:o}),this.canvas=this.svg),t._jsPlumb.appendElement(this.canvas,t.originalArgs[0].parent),t.useDivWrapper&&this.canvas.appendChild(this.svg);var a=[this.canvas];return this.getDisplayElements=function(){return a},this.appendDisplayElement=function(t){a.push(t)},this.paint=function(n,i,o){if(null!=n){var s,a=[this.x,this.y],u=[this.w,this.h];null!=o&&(o.xmin<0&&(a[0]+=o.xmin),o.ymin<0&&(a[1]+=o.ymin),u[0]=o.xmax+(o.xmin<0?-o.xmin:0),u[1]=o.ymax+(o.ymin<0?-o.ymin:0)),t.useDivWrapper?(e.sizeElement(this.canvas,a[0],a[1],u[0]>0?u[0]:1,u[1]>0?u[1]:1),a[0]=0,a[1]=0,s=_([0,0])):s=_([a[0],a[1]]),r.paint.apply(this,arguments),y(this.svg,{style:s,width:u[0]||1,height:u[1]||1})}},{renderer:r}};e.extend(w,n.jsPlumbUIComponent,{cleanup:function(t){t||null==this.typeId?(this.canvas&&(this.canvas._jsPlumb=null),this.svg&&(this.svg._jsPlumb=null),this.bgCanvas&&(this.bgCanvas._jsPlumb=null),this.canvas&&this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this.bgCanvas&&this.bgCanvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this.svg=null,this.canvas=null,this.path=null,this.group=null,this._jsPlumb=null):(this.canvas&&this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this.bgCanvas&&this.bgCanvas.parentNode&&this.bgCanvas.parentNode.removeChild(this.bgCanvas))},reattach:function(t){var n=t.getContainer();this.canvas&&null==this.canvas.parentNode&&n.appendChild(this.canvas),this.bgCanvas&&null==this.bgCanvas.parentNode&&n.appendChild(this.bgCanvas)},setVisible:function(t){this.canvas&&(this.canvas.style.display=t?"block":"none")}}),n.ConnectorRenderers.svg=function(t){var e=this,i=w.apply(this,[{cssClass:t._jsPlumb.connectorClass,originalArgs:arguments,pointerEventsSpec:"none",_jsPlumb:t._jsPlumb}]);i.renderer.paint=function(i,r,o){var s=e.getSegments(),a="",u=[0,0];if(o.xmin<0&&(u[0]=-o.xmin),o.ymin<0&&(u[1]=-o.ymin),s.length>0){a=e.getPathData();var l={d:a,transform:"translate("+u[0]+","+u[1]+")","pointer-events":t["pointer-events"]||"visibleStroke"},c=null,h=[e.x,e.y,e.w,e.h];if(i.outlineStroke){var f=i.outlineWidth||1,p=i.strokeWidth+2*f;c=n.extend({},i),delete c.gradient,c.stroke=i.outlineStroke,c.strokeWidth=p,null==e.bgPath?(e.bgPath=b("path",l),n.addClass(e.bgPath,n.connectorOutlineClass),j(e.svg,e.bgPath,0)):y(e.bgPath,l),C(e.svg,e.bgPath,c,h,e)}null==e.path?(e.path=b("path",l),j(e.svg,e.path,i.outlineStroke?1:0)):y(e.path,l),C(e.svg,e.path,i,h,e)}}},e.extend(n.ConnectorRenderers.svg,w);var E=n.SvgEndpoint=function(t){var e=w.apply(this,[{cssClass:t._jsPlumb.endpointClass,originalArgs:arguments,pointerEventsSpec:"all",useDivWrapper:!0,_jsPlumb:t._jsPlumb}]);e.renderer.paint=function(t){var e=n.extend({},t);e.outlineStroke&&(e.stroke=e.outlineStroke),null==this.node?(this.node=this.makeNode(e),this.svg.appendChild(this.node)):null!=this.updateNode&&this.updateNode(this.node),C(this.svg,this.node,e,[this.x,this.y,this.w,this.h],this),_(this.node,[this.x,this.y])}.bind(this)};e.extend(E,w),n.Endpoints.svg.Dot=function(){n.Endpoints.Dot.apply(this,arguments),E.apply(this,arguments),this.makeNode=function(t){return b("circle",{cx:this.w/2,cy:this.h/2,r:this.radius})},this.updateNode=function(t){y(t,{cx:this.w/2,cy:this.h/2,r:this.radius})}},e.extend(n.Endpoints.svg.Dot,[n.Endpoints.Dot,E]),n.Endpoints.svg.Rectangle=function(){n.Endpoints.Rectangle.apply(this,arguments),E.apply(this,arguments),this.makeNode=function(t){return b("rect",{width:this.w,height:this.h})},this.updateNode=function(t){y(t,{width:this.w,height:this.h})}},e.extend(n.Endpoints.svg.Rectangle,[n.Endpoints.Rectangle,E]),n.Endpoints.svg.Image=n.Endpoints.Image,n.Endpoints.svg.Blank=n.Endpoints.Blank,n.Overlays.svg.Label=n.Overlays.Label,n.Overlays.svg.Custom=n.Overlays.Custom;var S=function(t,e){t.apply(this,e),n.jsPlumbUIComponent.apply(this,e),this.isAppendedAtTopLevel=!1;this.path=null,this.paint=function(t,n){if(t.component.svg&&n){null==this.path&&(this.path=b("path",{"pointer-events":"all"}),t.component.svg.appendChild(this.path),this.elementCreated&&this.elementCreated(this.path,t.component),this.canvas=t.component.svg);var r=e&&1===e.length&&e[0].cssClass||"",o=[0,0];n.xmin<0&&(o[0]=-n.xmin),n.ymin<0&&(o[1]=-n.ymin),y(this.path,{d:i(t.d),class:r,stroke:t.stroke?t.stroke:null,fill:t.fill?t.fill:null,transform:"translate("+o[0]+","+o[1]+")"})}};var i=function(t){return isNaN(t.cxy.x)||isNaN(t.cxy.y)?"":"M"+t.hxy.x+","+t.hxy.y+" L"+t.tail[0].x+","+t.tail[0].y+" L"+t.cxy.x+","+t.cxy.y+" L"+t.tail[1].x+","+t.tail[1].y+" L"+t.hxy.x+","+t.hxy.y};this.transfer=function(t){t.canvas&&this.path&&this.path.parentNode&&(this.path.parentNode.removeChild(this.path),t.canvas.appendChild(this.path))}},D={cleanup:function(t){null!=this.path&&(t?this._jsPlumb.instance.removeElement(this.path):this.path.parentNode&&this.path.parentNode.removeChild(this.path))},reattach:function(t,n){this.path&&n.canvas&&n.canvas.appendChild(this.path)},setVisible:function(t){null!=this.path&&(this.path.style.display=t?"block":"none")}};e.extend(S,[n.jsPlumbUIComponent,n.Overlays.AbstractOverlay]),n.Overlays.svg.Arrow=function(){S.apply(this,[n.Overlays.Arrow,arguments])},e.extend(n.Overlays.svg.Arrow,[n.Overlays.Arrow,S],D),n.Overlays.svg.PlainArrow=function(){S.apply(this,[n.Overlays.PlainArrow,arguments])},e.extend(n.Overlays.svg.PlainArrow,[n.Overlays.PlainArrow,S],D),n.Overlays.svg.Diamond=function(){S.apply(this,[n.Overlays.Diamond,arguments])},e.extend(n.Overlays.svg.Diamond,[n.Overlays.Diamond,S],D),n.Overlays.svg.GuideLines=function(){var t,e,i=null,r=this;n.Overlays.GuideLines.apply(this,arguments),this.paint=function(n,s){null==i&&(i=b("path"),n.connector.svg.appendChild(i),r.attachListeners(i,n.connector),r.attachListeners(i,r),t=b("path"),n.connector.svg.appendChild(t),r.attachListeners(t,n.connector),r.attachListeners(t,r),e=b("path"),n.connector.svg.appendChild(e),r.attachListeners(e,n.connector),r.attachListeners(e,r));var a=[0,0];s.xmin<0&&(a[0]=-s.xmin),s.ymin<0&&(a[1]=-s.ymin),y(i,{d:o(n.head,n.tail),stroke:"red",fill:null,transform:"translate("+a[0]+","+a[1]+")"}),y(t,{d:o(n.tailLine[0],n.tailLine[1]),stroke:"blue",fill:null,transform:"translate("+a[0]+","+a[1]+")"}),y(e,{d:o(n.headLine[0],n.headLine[1]),stroke:"green",fill:null,transform:"translate("+a[0]+","+a[1]+")"})};var o=function(t,n){return"M "+t.x+","+t.y+" L"+n.x+","+n.y}},e.extend(n.Overlays.svg.GuideLines,n.Overlays.GuideLines)}.call("undefined"!==typeof window?window:this),function(){"use strict";var t=this,n=t.jsPlumb,e=t.jsPlumbUtil,i=t.Katavorio,r=t.Biltong,o=function(n){var e=n._mottle;return e||(e=n._mottle=new t.Mottle),e},s=function(t,e){e=e||"main";var o="_katavorio_"+e,s=t[o],a=t.getEventManager();return s||(s=new i({bind:a.on,unbind:a.off,getSize:n.getSize,getConstrainingRectangle:function(t){return[t.parentNode.scrollWidth,t.parentNode.scrollHeight]},getPosition:function(n,e){var i=t.getOffset(n,e,n._katavorioDrag?n.offsetParent:null);return[i.left,i.top]},setPosition:function(t,n){t.style.left=n[0]+"px",t.style.top=n[1]+"px"},addClass:n.addClass,removeClass:n.removeClass,intersects:r.intersects,indexOf:function(t,n){return t.indexOf(n)},scope:t.getDefaultScope(),css:{noSelect:t.dragSelectClass,droppable:"jtk-droppable",draggable:"jtk-draggable",drag:"jtk-drag",selected:"jtk-drag-selected",active:"jtk-drag-active",hover:"jtk-drag-hover",ghostProxy:"jtk-ghost-proxy"}}),s.setZoom(t.getZoom()),t[o]=s,t.bind("zoom",s.setZoom)),s},a=function(t){var n=t.el._jsPlumbDragOptions,e=!0;return n.canDrag&&(e=n.canDrag()),e&&(this.setHoverSuspended(!0),this.select({source:t.el}).addClass(this.elementDraggingClass+" "+this.sourceElementDraggingClass,!0),this.select({target:t.el}).addClass(this.elementDraggingClass+" "+this.targetElementDraggingClass,!0),this.setConnectionBeingDragged(!0)),e},u=function(t){var n=this.getUIPosition(arguments,this.getZoom());if(null!=n){var e=t.el._jsPlumbDragOptions;this.draw(t.el,n,null,!0),e._dragging&&this.addClass(t.el,"jtk-dragged"),e._dragging=!0}},l=function(t){for(var n,e=t.selection,i=function(e){var i;null!=e[1]&&(n=this.getUIPosition([{el:e[2].el,pos:[e[1].left,e[1].top]}]),i=this.draw(e[2].el,n)),null!=e[0]._jsPlumbDragOptions&&delete e[0]._jsPlumbDragOptions._dragging,this.removeClass(e[0],"jtk-dragged"),this.select({source:e[2].el}).removeClass(this.elementDraggingClass+" "+this.sourceElementDraggingClass,!0),this.select({target:e[2].el}).removeClass(this.elementDraggingClass+" "+this.targetElementDraggingClass,!0),t.e._drawResult=t.e._drawResult||{c:[],e:[],a:[]},Array.prototype.push.apply(t.e._drawResult.c,i.c),Array.prototype.push.apply(t.e._drawResult.e,i.e),Array.prototype.push.apply(t.e._drawResult.a,i.a),this.getDragManager().dragEnded(e[2].el)}.bind(this),r=0;r<e.length;r++)i(e[r]);this.setHoverSuspended(!1),this.setConnectionBeingDragged(!1)},c=function(t,n){var i=function(i){if(null!=n[i]){if(e.isString(n[i])){var r=n[i].match(/-=/)?-1:1,o=n[i].substring(2);return t[i]+r*o}return n[i]}return t[i]};return[i("left"),i("top")]},h=function(t,n){if(null==n)return[0,0];var e=v(n),i=g(e,0);return[i[t+"X"],i[t+"Y"]]},f=h.bind(this,"page"),p=h.bind(this,"screen"),d=h.bind(this,"client"),g=function(t,n){return t.item?t.item(n):t[n]},v=function(t){return t.touches&&t.touches.length>0?t.touches:t.changedTouches&&t.changedTouches.length>0?t.changedTouches:t.targetTouches&&t.targetTouches.length>0?t.targetTouches:[t]},m=function(t){var n={},e=[],i={},r={},o={};this.register=function(s){var a,u=t.getId(s);n[u]||(n[u]=s,e.push(s),i[u]={});var l=function(n){if(n)for(var e=0;e<n.childNodes.length;e++)if(3!==n.childNodes[e].nodeType&&8!==n.childNodes[e].nodeType){var c=jsPlumb.getElement(n.childNodes[e]),h=t.getId(n.childNodes[e],null,!0);if(h&&r[h]&&r[h]>0){a||(a=t.getOffset(s));var f=t.getOffset(c);i[u][h]={id:h,offset:{left:f.left-a.left,top:f.top-a.top}},o[h]=u}l(n.childNodes[e])}};l(s)},this.updateOffsets=function(n,e){if(null!=n){e=e||{};var r,s=jsPlumb.getElement(n),a=t.getId(s),u=i[a];if(u)for(var l in u)if(u.hasOwnProperty(l)){var c=jsPlumb.getElement(l),h=e[l]||t.getOffset(c);if(null==c.offsetParent&&null!=i[a][l])continue;r||(r=t.getOffset(s)),i[a][l]={id:l,offset:{left:h.left-r.left,top:h.top-r.top}},o[l]=a}}},this.endpointAdded=function(e,s){s=s||t.getId(e);var a=document.body,u=e.parentNode;r[s]=r[s]?r[s]+1:1;while(null!=u&&u!==a){var l=t.getId(u,null,!0);if(l&&n[l]){var c=t.getOffset(u);if(null==i[l][s]){var h=t.getOffset(e);i[l][s]={id:s,offset:{left:h.left-c.left,top:h.top-c.top}},o[s]=l}break}u=u.parentNode}},this.endpointDeleted=function(t){if(r[t.elementId]&&(r[t.elementId]--,r[t.elementId]<=0))for(var n in i)i.hasOwnProperty(n)&&i[n]&&(delete i[n][t.elementId],delete o[t.elementId])},this.changeId=function(t,n){i[n]=i[t],i[t]={},o[n]=o[t],o[t]=null},this.getElementsForDraggable=function(t){return i[t]},this.elementRemoved=function(t){var n=o[t];n&&(i[n]&&delete i[n][t],delete o[t])},this.reset=function(){n={},e=[],i={},r={}},this.dragEnded=function(n){if(null!=n.offsetParent){var e=t.getId(n),i=o[e];i&&this.updateOffsets(i)}},this.setParent=function(n,e,r,s,a){var u=o[e];i[s]||(i[s]={});var l=t.getOffset(r),c=a||t.getOffset(n);u&&i[u]&&delete i[u][e],i[s][e]={id:e,offset:{left:c.left-l.left,top:c.top-l.top}},o[e]=s},this.clearParent=function(t,n){var e=o[n];e&&(delete i[e][n],delete o[n])},this.revalidateParent=function(n,e,i){var r=o[e];if(r){var s={};s[e]=i,this.updateOffsets(r,s),t.revalidate(r)}},this.getDragAncestor=function(n){var e=jsPlumb.getElement(n),i=t.getId(e),r=o[i];return r?jsPlumb.getElement(r):null}},y=function(t,n,i){n=e.fastTrim(n),"undefined"!==typeof t.className.baseVal?t.className.baseVal=n:t.className=n;try{var r=t.classList;if(null!=r){while(r.length>0)r.remove(r.item(0));for(var o=0;o<i.length;o++)i[o]&&r.add(i[o])}}catch(s){e.log("JSPLUMB: cannot set class list",s)}},b=function(t){return"undefined"===typeof t.className.baseVal?t.className:t.className.baseVal},_=function(t,n,i){n=null==n?[]:e.isArray(n)?n:n.split(/\s+/),i=null==i?[]:e.isArray(i)?i:i.split(/\s+/);var r=b(t),o=r.split(/\s+/),s=function(t,n){for(var e=0;e<n.length;e++)if(t)-1===o.indexOf(n[e])&&o.push(n[e]);else{var i=o.indexOf(n[e]);-1!==i&&o.splice(i,1)}};s(!0,n),s(!1,i),y(t,o.join(" "),o)};t.jsPlumb.extend(t.jsPlumbInstance.prototype,{headless:!1,pageLocation:f,screenLocation:p,clientLocation:d,getDragManager:function(){return null==this.dragManager&&(this.dragManager=new m(this)),this.dragManager},recalculateOffsets:function(t){this.getDragManager().updateOffsets(t)},createElement:function(t,n,e,i){return this.createElementNS(null,t,n,e,i)},createElementNS:function(t,n,e,i,r){var o,s=null==t?document.createElement(n):document.createElementNS(t,n);for(o in e=e||{},e)s.style[o]=e[o];for(o in i&&(s.className=i),r=r||{},r)s.setAttribute(o,""+r[o]);return s},getAttribute:function(t,n){return null!=t.getAttribute?t.getAttribute(n):null},setAttribute:function(t,n,e){null!=t.setAttribute&&t.setAttribute(n,e)},setAttributes:function(t,n){for(var e in n)n.hasOwnProperty(e)&&t.setAttribute(e,n[e])},appendToRoot:function(t){document.body.appendChild(t)},getRenderModes:function(){return["svg"]},getClass:b,addClass:function(t,n){jsPlumb.each(t,(function(t){_(t,n)}))},hasClass:function(t,n){return t=jsPlumb.getElement(t),t.classList?t.classList.contains(n):-1!==b(t).indexOf(n)},removeClass:function(t,n){jsPlumb.each(t,(function(t){_(t,null,n)}))},toggleClass:function(t,n){jsPlumb.hasClass(t,n)?jsPlumb.removeClass(t,n):jsPlumb.addClass(t,n)},updateClasses:function(t,n,e){jsPlumb.each(t,(function(t){_(t,n,e)}))},setClass:function(t,n){null!=n&&jsPlumb.each(t,(function(t){y(t,n,n.split(/\s+/))}))},setPosition:function(t,n){t.style.left=n.left+"px",t.style.top=n.top+"px"},getPosition:function(t){var n=function(n){var e=t.style[n];return e?e.substring(0,e.length-2):0};return{left:n("left"),top:n("top")}},getStyle:function(t,n){return"undefined"!==typeof window.getComputedStyle?getComputedStyle(t,null).getPropertyValue(n):t.currentStyle[n]},getSelector:function(t,n){var e=null;return e=1===arguments.length?null!=t.nodeType?t:document.querySelectorAll(t):t.querySelectorAll(n),e},getOffset:function(t,n,e){t=jsPlumb.getElement(t),e=e||this.getContainer();var i={left:t.offsetLeft,top:t.offsetTop},r=n||null!=e&&t!==e&&t.offsetParent!==e?t.offsetParent:null,o=function(t){null!=t&&t!==document.body&&(t.scrollTop>0||t.scrollLeft>0)&&(i.left-=t.scrollLeft,i.top-=t.scrollTop)}.bind(this);while(null!=r)i.left+=r.offsetLeft,i.top+=r.offsetTop,o(r),r=n?r.offsetParent:r.offsetParent===e?null:r.offsetParent;if(null!=e&&!n&&(e.scrollTop>0||e.scrollLeft>0)){var s=null!=t.offsetParent?this.getStyle(t.offsetParent,"position"):"static",a=this.getStyle(t,"position");"absolute"!==a&&"fixed"!==a&&"absolute"!==s&&"fixed"!==s&&(i.left-=e.scrollLeft,i.top-=e.scrollTop)}return i},getPositionOnElement:function(t,n,e){var i="undefined"!==typeof n.getBoundingClientRect?n.getBoundingClientRect():{left:0,top:0,width:0,height:0},r=document.body,o=document.documentElement,s=window.pageYOffset||o.scrollTop||r.scrollTop,a=window.pageXOffset||o.scrollLeft||r.scrollLeft,u=o.clientTop||r.clientTop||0,l=o.clientLeft||r.clientLeft||0,c=0,h=0,f=i.top+s-u+c*e,p=i.left+a-l+h*e,d=jsPlumb.pageLocation(t),g=i.width||n.offsetWidth*e,v=i.height||n.offsetHeight*e,m=(d[0]-p)/g,y=(d[1]-f)/v;return[m,y]},getAbsolutePosition:function(t){var n=function(n){var e=t.style[n];if(e)return parseFloat(e.substring(0,e.length-2))};return[n("left"),n("top")]},setAbsolutePosition:function(t,n,e,i){e?this.animate(t,{left:"+="+(n[0]-e[0]),top:"+="+(n[1]-e[1])},i):(t.style.left=n[0]+"px",t.style.top=n[1]+"px")},getSize:function(t){return[t.offsetWidth,t.offsetHeight]},getWidth:function(t){return t.offsetWidth},getHeight:function(t){return t.offsetHeight},getRenderMode:function(){return"svg"},draggable:function(t,n){var i;return t=e.isArray(t)||null!=t.length&&!e.isString(t)?t:[t],Array.prototype.slice.call(t).forEach(function(t){i=this.info(t),i.el&&this._initDraggableIfNecessary(i.el,!0,n,i.id,!0)}.bind(this)),this},snapToGrid:function(t,n,e){var i=[],r=function(t){var r=this.info(t);if(null!=r.el&&r.el._katavorioDrag){var o=r.el._katavorioDrag.snap(n,e);this.revalidate(r.el),i.push([r.el,o])}}.bind(this);if(1===arguments.length||3===arguments.length)r(t,n,e);else{var o=this.getManagedElements();for(var s in o)r(s,arguments[0],arguments[1])}return i},initDraggable:function(t,n,e){s(this,e).draggable(t,n),t._jsPlumbDragOptions=n},destroyDraggable:function(t,n){s(this,n).destroyDraggable(t),t._jsPlumbDragOptions=null,t._jsPlumbRelatedElement=null},unbindDraggable:function(t,n,e,i){s(this,i).destroyDraggable(t,n,e)},setDraggable:function(t,n){return jsPlumb.each(t,function(t){this.isDragSupported(t)&&(this._draggableStates[this.getAttribute(t,"id")]=n,this.setElementDraggable(t,n))}.bind(this))},_draggableStates:{},toggleDraggable:function(t){var n;return jsPlumb.each(t,function(t){var e=this.getAttribute(t,"id");return n=null!=this._draggableStates[e]&&this._draggableStates[e],n=!n,this._draggableStates[e]=n,this.setDraggable(t,n),n}.bind(this)),n},_initDraggableIfNecessary:function(t,n,i,r,o){if(!jsPlumb.headless){var s=null!=n&&n;if(s&&jsPlumb.isDragSupported(t,this)){var c=i||this.Defaults.DragOptions;if(c=jsPlumb.extend({},c),jsPlumb.isAlreadyDraggable(t,this))i.force&&this.initDraggable(t,c);else{var h=jsPlumb.dragEvents.drag,f=jsPlumb.dragEvents.stop,p=jsPlumb.dragEvents.start;this.manage(r,t),c[p]=e.wrap(c[p],a.bind(this)),c[h]=e.wrap(c[h],u.bind(this)),c[f]=e.wrap(c[f],l.bind(this));var d=this.getId(t);this._draggableStates[d]=!0;var g=this._draggableStates[d];c.disabled=null!=g&&!g,this.initDraggable(t,c),this.getDragManager().register(t),o&&this.fire("elementDraggable",{el:t,options:c})}}}},animationSupported:!0,getElement:function(t){return null==t?null:(t="string"===typeof t?t:null==t.tagName&&null!=t.length&&null==t.enctype?t[0]:t,"string"===typeof t?document.getElementById(t):t)},removeElement:function(t){s(this).elementRemoved(t),this.getEventManager().remove(t)},doAnimate:function(t,e,i){i=i||{};var r=this.getOffset(t),o=c(r,e),s=o[0]-r.left,a=o[1]-r.top,u=i.duration||250,l=15,h=u/l,f=l/u*s,p=l/u*a,d=0,g=setInterval((function(){n.setPosition(t,{left:r.left+f*(d+1),top:r.top+p*(d+1)}),null!=i.step&&i.step(d,Math.ceil(h)),d++,d>=h&&(window.clearInterval(g),null!=i.complete&&i.complete())}),l)},destroyDroppable:function(t,n){s(this,n).destroyDroppable(t)},unbindDroppable:function(t,n,e,i){s(this,i).destroyDroppable(t,n,e)},droppable:function(t,n){var i;return t=e.isArray(t)||null!=t.length&&!e.isString(t)?t:[t],n=n||{},n.allowLoopback=!1,Array.prototype.slice.call(t).forEach(function(t){i=this.info(t),i.el&&this.initDroppable(i.el,n)}.bind(this)),this},initDroppable:function(t,n,e){s(this,e).droppable(t,n)},isAlreadyDraggable:function(t){return null!=t._katavorioDrag},isDragSupported:function(t,n){return!0},isDropSupported:function(t,n){return!0},isElementDraggable:function(t){return t=n.getElement(t),t._katavorioDrag&&t._katavorioDrag.isEnabled()},getDragObject:function(t){return t[0].drag.getDragElement()},getDragScope:function(t){return t._katavorioDrag&&t._katavorioDrag.scopes.join(" ")||""},getDropEvent:function(t){return t[0].e},getUIPosition:function(t,n){var e=t[0].el;if(null==e.offsetParent)return null;var i=t[0].finalPos||t[0].pos,r={left:i[0],top:i[1]};if(e._katavorioDrag&&e.offsetParent!==this.getContainer()){var o=this.getOffset(e.offsetParent);r.left+=o.left,r.top+=o.top}return r},setDragFilter:function(t,n,e){t._katavorioDrag&&t._katavorioDrag.setFilter(n,e)},setElementDraggable:function(t,e){t=n.getElement(t),t._katavorioDrag&&t._katavorioDrag.setEnabled(e)},setDragScope:function(t,n){t._katavorioDrag&&t._katavorioDrag.k.setDragScope(t,n)},setDropScope:function(t,n){t._katavorioDrop&&t._katavorioDrop.length>0&&t._katavorioDrop[0].k.setDropScope(t,n)},addToPosse:function(t,e){var i=Array.prototype.slice.call(arguments,1),r=s(this);n.each(t,(function(t){t=[n.getElement(t)],t.push.apply(t,i),r.addToPosse.apply(r,t)}))},setPosse:function(t,e){var i=Array.prototype.slice.call(arguments,1),r=s(this);n.each(t,(function(t){t=[n.getElement(t)],t.push.apply(t,i),r.setPosse.apply(r,t)}))},removeFromPosse:function(t,e){var i=Array.prototype.slice.call(arguments,1),r=s(this);n.each(t,(function(t){t=[n.getElement(t)],t.push.apply(t,i),r.removeFromPosse.apply(r,t)}))},removeFromAllPosses:function(t){var e=s(this);n.each(t,(function(t){e.removeFromAllPosses(n.getElement(t))}))},setPosseState:function(t,e,i){var r=s(this);n.each(t,(function(t){r.setPosseState(n.getElement(t),e,i)}))},dragEvents:{start:"start",stop:"stop",drag:"drag",step:"step",over:"over",out:"out",drop:"drop",complete:"complete",beforeStart:"beforeStart"},animEvents:{step:"step",complete:"complete"},stopDrag:function(t){t._katavorioDrag&&t._katavorioDrag.abort()},addToDragSelection:function(t){var n=this.getElement(t);null==n||!n._isJsPlumbGroup&&null!=n._jsPlumbGroup||s(this).select(t)},removeFromDragSelection:function(t){s(this).deselect(t)},getDragSelection:function(){return s(this).getSelection()},clearDragSelection:function(){s(this).deselectAll()},trigger:function(t,n,e,i){this.getEventManager().trigger(t,n,e,i)},doReset:function(){for(var t in this)0===t.indexOf("_katavorio_")&&this[t].reset()},getEventManager:function(){return o(this)},on:function(t,n,e){return this.getEventManager().on.apply(this,arguments),this},off:function(t,n,e){return this.getEventManager().off.apply(this,arguments),this}});var P=function(t){var n=function(){/complete|loaded|interactive/.test(document.readyState)&&"undefined"!==typeof document.body&&null!=document.body?t():setTimeout(n,9)};n()};P(n.init)}.call("undefined"!==typeof window?window:this)}}]);